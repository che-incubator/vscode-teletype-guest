module.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=74)}([function(e,t){e.exports=require("util")},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";t.Emitter=r(78),t.Disposable=r(26),t.CompositeDisposable=r(41)},function(e,t,r){var o=r(53),n=o.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=o:(i(o,t),t.Buffer=s),s.prototype=Object.create(n.prototype),i(n,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t){e.exports=require("assert")},function(e,t,r){"use strict";var o=!0,n=!0;function i(e,t,r){var o=e.match(t);return o&&o.length>=r&&parseInt(o[r],10)}e.exports={extractVersion:i,wrapPeerConnectionEvent:function(e,t,r){if(e.RTCPeerConnection){var o=e.RTCPeerConnection.prototype,n=o.addEventListener;o.addEventListener=function(e,o){if(e!==t)return n.apply(this,arguments);var i=function(e){o(r(e))};return this._eventMap=this._eventMap||{},this._eventMap[o]=i,n.apply(this,[e,i])};var i=o.removeEventListener;o.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return i.apply(this,arguments);var o=this._eventMap[r];return delete this._eventMap[r],i.apply(this,[e,o])},Object.defineProperty(o,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)}})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){n&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=i(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)r.browser="chrome",r.version=i(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=i(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=i(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r}}},function(e,t){class r extends Error{constructor(){super(...arguments)}}class o extends Error{constructor(){super(...arguments)}}class n extends Error{constructor(){super(...arguments)}}class i extends Error{constructor(){super(...arguments)}}class s extends Error{constructor(){super(...arguments)}}class a extends Error{constructor(){super(...arguments)}}class c extends Error{constructor(){super(...arguments)}}class p extends Error{constructor(){super(...arguments)}}class d extends Error{constructor(){super(...arguments)}}class l extends Error{constructor(){super(...arguments)}}e.exports={ClientOutOfDateError:r,HTTPRequestError:o,NetworkConnectionError:n,InvalidAuthenticationTokenError:i,UnexpectedAuthenticationError:s,PeerConnectionError:a,PortalCreationError:c,PortalJoinError:p,PortalNotFoundError:d,PubSubConnectionError:l}},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";var o=r(4).Buffer,n=r(13).EventEmitter,i=r(0),s=r(99),a=r(32),c=r(100),p=function(e,t,r){n.call(this),p.validateOptions(r||{},["maxLength","masking","requireMasking","protocols"]),this._request=e,this._reader=new c,this._options=r||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new a,this.__queue=[],this.readyState=0,this.url=t,this.io=new s.IO(this),this.messages=new s.Messages(this),this._bindEventListeners()};i.inherits(p,n),p.isWebSocket=function(e){var t=e.headers.connection||"",r=e.headers.upgrade||"";return"GET"===e.method&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&"websocket"===r.toLowerCase()},p.validateOptions=function(e,t){for(var r in e)if(t.indexOf(r)<0)throw new Error("Unrecognized option: "+r)};var d={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var e=this;this.messages.on("error",(function(){})),this.on("message",(function(t){var r=e.messages;r.readable&&r.emit("data",t.data)})),this.on("error",(function(t){var r=e.messages;r.readable&&r.emit("error",t)})),this.on("close",(function(){var t=e.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}))},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(e){return!1},setHeader:function(e,t){return!(this.readyState>0)&&(this._headers.set(e,t),!0)},start:function(){if(0!==this.readyState)return!1;if(!p.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var e;try{e=this._handshakeResponse()}catch(e){return this._failHandshake(e)}return this._write(e),-1!==this._stage&&this._open(),!0},_failHandshake:function(e){var t=new a;return t.set("Content-Type","text/plain"),t.set("Content-Length",o.byteLength(e.message,"utf8")),t=["HTTP/1.1 400 Bad Request",t.toString(),e.message],this._write(o.from(t.join("\r\n"),"utf8")),this._fail("protocol_error",e.message),!1},text:function(e){return this.frame(e)},binary:function(e){return!1},ping:function(){return!1},pong:function(){return!1},close:function(e,t){return 1===this.readyState&&(this.readyState=3,this.emit("close",new p.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach((function(e){this.frame.apply(this,e)}),this),this.__queue=[],this.emit("open",new p.OpenEvent)},_queue:function(e){return this.__queue.push(e),!0},_write:function(e){var t=this.io;t.readable&&t.emit("data",e)},_fail:function(e,t){this.readyState=2,this.emit("error",new Error(t)),this.close()}};for(var l in d)p.prototype[l]=d[l];p.ConnectEvent=function(){},p.OpenEvent=function(){},p.CloseEvent=function(e,t){this.code=e,this.reason=t},p.MessageEvent=function(e){this.data=e},p.PingEvent=function(e){this.data=e},p.PongEvent=function(e){this.data=e},e.exports=p},function(e,t){e.exports=require("crypto")},function(e,t,r){var o=r(27),n=o,i=Function("return this")(),s=r(91);n.exportSymbol("proto.BufferProxy",null,i),n.exportSymbol("proto.BufferProxyUpdate",null,i),n.exportSymbol("proto.BufferProxyUpdate.OperationsUpdate",null,i),n.exportSymbol("proto.BufferProxyUpdate.URIUpdate",null,i),n.exportSymbol("proto.EditorProxy",null,i),n.exportSymbol("proto.EditorProxyMetadata",null,i),n.exportSymbol("proto.EditorProxyUpdate",null,i),n.exportSymbol("proto.EditorProxyUpdate.SelectionsUpdate",null,i),n.exportSymbol("proto.NetworkMessage",null,i),n.exportSymbol("proto.NetworkMessage.StarBroadcast",null,i),n.exportSymbol("proto.NetworkMessage.StarJoinNotification",null,i),n.exportSymbol("proto.NetworkMessage.StarJoinRequest",null,i),n.exportSymbol("proto.NetworkMessage.StarJoinResponse",null,i),n.exportSymbol("proto.NetworkMessage.StarLeaveNotification",null,i),n.exportSymbol("proto.NetworkMessage.StarUnicast",null,i),n.exportSymbol("proto.PeerIdentity",null,i),n.exportSymbol("proto.PortalSubscriptionResponse",null,i),n.exportSymbol("proto.PortalUpdate",null,i),n.exportSymbol("proto.PortalUpdate.EditorProxyCreation",null,i),n.exportSymbol("proto.PortalUpdate.EditorProxyRemoval",null,i),n.exportSymbol("proto.PortalUpdate.EditorProxySwitch",null,i),n.exportSymbol("proto.PortalUpdate.SiteAssignment",null,i),n.exportSymbol("proto.RouterMessage",null,i),n.exportSymbol("proto.RouterMessage.Notification",null,i),n.exportSymbol("proto.RouterMessage.Request",null,i),n.exportSymbol("proto.RouterMessage.Response",null,i),n.exportSymbol("proto.Tether",null,i),proto.PortalSubscriptionResponse=function(e){o.Message.initialize(this,e,0,-1,proto.PortalSubscriptionResponse.repeatedFields_,null)},n.inherits(proto.PortalSubscriptionResponse,o.Message),n.DEBUG&&!COMPILED&&(proto.PortalSubscriptionResponse.displayName="proto.PortalSubscriptionResponse"),proto.PortalSubscriptionResponse.repeatedFields_=[4,5,6,8],o.Message.GENERATE_TO_OBJECT&&(proto.PortalSubscriptionResponse.prototype.toObject=function(e){return proto.PortalSubscriptionResponse.toObject(e,this)},proto.PortalSubscriptionResponse.toObject=function(e,t){var r,n={siteIdsByPeerIdMap:(r=t.getSiteIdsByPeerIdMap())?r.toObject(e,void 0):[],tethersList:o.Message.toObjectList(t.getTethersList(),proto.Tether.toObject,e),activeBufferProxiesList:o.Message.toObjectList(t.getActiveBufferProxiesList(),proto.BufferProxy.toObject,e),activeEditorProxiesList:o.Message.toObjectList(t.getActiveEditorProxiesList(),proto.EditorProxy.toObject,e),activeEditorProxyIdsBySiteIdMap:(r=t.getActiveEditorProxyIdsBySiteIdMap())?r.toObject(e,void 0):[],editorProxiesMetadataList:o.Message.toObjectList(t.getEditorProxiesMetadataList(),proto.EditorProxyMetadata.toObject,e)};return e&&(n.$jspbMessageInstance=t),n}),proto.PortalSubscriptionResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PortalSubscriptionResponse;return proto.PortalSubscriptionResponse.deserializeBinaryFromReader(r,t)},proto.PortalSubscriptionResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=e.getSiteIdsByPeerIdMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readString,o.BinaryReader.prototype.readUint32)}));break;case 4:r=new proto.Tether;t.readMessage(r,proto.Tether.deserializeBinaryFromReader),e.addTethers(r);break;case 5:r=new proto.BufferProxy;t.readMessage(r,proto.BufferProxy.deserializeBinaryFromReader),e.addActiveBufferProxies(r);break;case 6:r=new proto.EditorProxy;t.readMessage(r,proto.EditorProxy.deserializeBinaryFromReader),e.addActiveEditorProxies(r);break;case 7:r=e.getActiveEditorProxyIdsBySiteIdMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readUint32)}));break;case 8:r=new proto.EditorProxyMetadata;t.readMessage(r,proto.EditorProxyMetadata.deserializeBinaryFromReader),e.addEditorProxiesMetadata(r);break;default:t.skipField()}}return e},proto.PortalSubscriptionResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PortalSubscriptionResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalSubscriptionResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSiteIdsByPeerIdMap(!0))&&r.getLength()>0&&r.serializeBinary(1,t,o.BinaryWriter.prototype.writeString,o.BinaryWriter.prototype.writeUint32),(r=e.getTethersList()).length>0&&t.writeRepeatedMessage(4,r,proto.Tether.serializeBinaryToWriter),(r=e.getActiveBufferProxiesList()).length>0&&t.writeRepeatedMessage(5,r,proto.BufferProxy.serializeBinaryToWriter),(r=e.getActiveEditorProxiesList()).length>0&&t.writeRepeatedMessage(6,r,proto.EditorProxy.serializeBinaryToWriter),(r=e.getActiveEditorProxyIdsBySiteIdMap(!0))&&r.getLength()>0&&r.serializeBinary(7,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeUint32),(r=e.getEditorProxiesMetadataList()).length>0&&t.writeRepeatedMessage(8,r,proto.EditorProxyMetadata.serializeBinaryToWriter)},proto.PortalSubscriptionResponse.prototype.getSiteIdsByPeerIdMap=function(e){return o.Message.getMapField(this,1,e,null)},proto.PortalSubscriptionResponse.prototype.clearSiteIdsByPeerIdMap=function(){this.getSiteIdsByPeerIdMap().clear()},proto.PortalSubscriptionResponse.prototype.getTethersList=function(){return o.Message.getRepeatedWrapperField(this,proto.Tether,4)},proto.PortalSubscriptionResponse.prototype.setTethersList=function(e){o.Message.setRepeatedWrapperField(this,4,e)},proto.PortalSubscriptionResponse.prototype.addTethers=function(e,t){return o.Message.addToRepeatedWrapperField(this,4,e,proto.Tether,t)},proto.PortalSubscriptionResponse.prototype.clearTethersList=function(){this.setTethersList([])},proto.PortalSubscriptionResponse.prototype.getActiveBufferProxiesList=function(){return o.Message.getRepeatedWrapperField(this,proto.BufferProxy,5)},proto.PortalSubscriptionResponse.prototype.setActiveBufferProxiesList=function(e){o.Message.setRepeatedWrapperField(this,5,e)},proto.PortalSubscriptionResponse.prototype.addActiveBufferProxies=function(e,t){return o.Message.addToRepeatedWrapperField(this,5,e,proto.BufferProxy,t)},proto.PortalSubscriptionResponse.prototype.clearActiveBufferProxiesList=function(){this.setActiveBufferProxiesList([])},proto.PortalSubscriptionResponse.prototype.getActiveEditorProxiesList=function(){return o.Message.getRepeatedWrapperField(this,proto.EditorProxy,6)},proto.PortalSubscriptionResponse.prototype.setActiveEditorProxiesList=function(e){o.Message.setRepeatedWrapperField(this,6,e)},proto.PortalSubscriptionResponse.prototype.addActiveEditorProxies=function(e,t){return o.Message.addToRepeatedWrapperField(this,6,e,proto.EditorProxy,t)},proto.PortalSubscriptionResponse.prototype.clearActiveEditorProxiesList=function(){this.setActiveEditorProxiesList([])},proto.PortalSubscriptionResponse.prototype.getActiveEditorProxyIdsBySiteIdMap=function(e){return o.Message.getMapField(this,7,e,null)},proto.PortalSubscriptionResponse.prototype.clearActiveEditorProxyIdsBySiteIdMap=function(){this.getActiveEditorProxyIdsBySiteIdMap().clear()},proto.PortalSubscriptionResponse.prototype.getEditorProxiesMetadataList=function(){return o.Message.getRepeatedWrapperField(this,proto.EditorProxyMetadata,8)},proto.PortalSubscriptionResponse.prototype.setEditorProxiesMetadataList=function(e){o.Message.setRepeatedWrapperField(this,8,e)},proto.PortalSubscriptionResponse.prototype.addEditorProxiesMetadata=function(e,t){return o.Message.addToRepeatedWrapperField(this,8,e,proto.EditorProxyMetadata,t)},proto.PortalSubscriptionResponse.prototype.clearEditorProxiesMetadataList=function(){this.setEditorProxiesMetadataList([])},proto.PortalUpdate=function(e){o.Message.initialize(this,e,0,-1,null,proto.PortalUpdate.oneofGroups_)},n.inherits(proto.PortalUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.PortalUpdate.displayName="proto.PortalUpdate"),proto.PortalUpdate.oneofGroups_=[[1,2,4,5]],proto.PortalUpdate.VariantCase={VARIANT_NOT_SET:0,EDITOR_PROXY_SWITCH:1,SITE_ASSIGNMENT:2,TETHER_UPDATE:4,EDITOR_PROXY_CREATION:5},proto.PortalUpdate.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.PortalUpdate.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.prototype.toObject=function(e){return proto.PortalUpdate.toObject(e,this)},proto.PortalUpdate.toObject=function(e,t){var r,o={editorProxySwitch:(r=t.getEditorProxySwitch())&&proto.PortalUpdate.EditorProxySwitch.toObject(e,r),siteAssignment:(r=t.getSiteAssignment())&&proto.PortalUpdate.SiteAssignment.toObject(e,r),tetherUpdate:(r=t.getTetherUpdate())&&proto.Tether.toObject(e,r),editorProxyCreation:(r=t.getEditorProxyCreation())&&proto.PortalUpdate.EditorProxyCreation.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.PortalUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PortalUpdate;return proto.PortalUpdate.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.PortalUpdate.EditorProxySwitch;t.readMessage(r,proto.PortalUpdate.EditorProxySwitch.deserializeBinaryFromReader),e.setEditorProxySwitch(r);break;case 2:r=new proto.PortalUpdate.SiteAssignment;t.readMessage(r,proto.PortalUpdate.SiteAssignment.deserializeBinaryFromReader),e.setSiteAssignment(r);break;case 4:r=new proto.Tether;t.readMessage(r,proto.Tether.deserializeBinaryFromReader),e.setTetherUpdate(r);break;case 5:r=new proto.PortalUpdate.EditorProxyCreation;t.readMessage(r,proto.PortalUpdate.EditorProxyCreation.deserializeBinaryFromReader),e.setEditorProxyCreation(r);break;default:t.skipField()}}return e},proto.PortalUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PortalUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getEditorProxySwitch())&&t.writeMessage(1,r,proto.PortalUpdate.EditorProxySwitch.serializeBinaryToWriter),null!=(r=e.getSiteAssignment())&&t.writeMessage(2,r,proto.PortalUpdate.SiteAssignment.serializeBinaryToWriter),null!=(r=e.getTetherUpdate())&&t.writeMessage(4,r,proto.Tether.serializeBinaryToWriter),null!=(r=e.getEditorProxyCreation())&&t.writeMessage(5,r,proto.PortalUpdate.EditorProxyCreation.serializeBinaryToWriter)},proto.PortalUpdate.EditorProxySwitch=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.PortalUpdate.EditorProxySwitch,o.Message),n.DEBUG&&!COMPILED&&(proto.PortalUpdate.EditorProxySwitch.displayName="proto.PortalUpdate.EditorProxySwitch"),o.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.EditorProxySwitch.prototype.toObject=function(e){return proto.PortalUpdate.EditorProxySwitch.toObject(e,this)},proto.PortalUpdate.EditorProxySwitch.toObject=function(e,t){var r={editorProxyId:o.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.PortalUpdate.EditorProxySwitch.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PortalUpdate.EditorProxySwitch;return proto.PortalUpdate.EditorProxySwitch.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.EditorProxySwitch.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setEditorProxyId(r);break;default:t.skipField()}}return e},proto.PortalUpdate.EditorProxySwitch.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PortalUpdate.EditorProxySwitch.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.EditorProxySwitch.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getEditorProxyId())&&t.writeUint32(1,r)},proto.PortalUpdate.EditorProxySwitch.prototype.getEditorProxyId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.PortalUpdate.EditorProxySwitch.prototype.setEditorProxyId=function(e){o.Message.setProto3IntField(this,1,e)},proto.PortalUpdate.SiteAssignment=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.PortalUpdate.SiteAssignment,o.Message),n.DEBUG&&!COMPILED&&(proto.PortalUpdate.SiteAssignment.displayName="proto.PortalUpdate.SiteAssignment"),o.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.SiteAssignment.prototype.toObject=function(e){return proto.PortalUpdate.SiteAssignment.toObject(e,this)},proto.PortalUpdate.SiteAssignment.toObject=function(e,t){var r={peerId:o.Message.getFieldWithDefault(t,1,""),siteId:o.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.PortalUpdate.SiteAssignment.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PortalUpdate.SiteAssignment;return proto.PortalUpdate.SiteAssignment.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.SiteAssignment.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setPeerId(r);break;case 2:r=t.readUint32();e.setSiteId(r);break;default:t.skipField()}}return e},proto.PortalUpdate.SiteAssignment.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PortalUpdate.SiteAssignment.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.SiteAssignment.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getPeerId()).length>0&&t.writeString(1,r),0!==(r=e.getSiteId())&&t.writeUint32(2,r)},proto.PortalUpdate.SiteAssignment.prototype.getPeerId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.PortalUpdate.SiteAssignment.prototype.setPeerId=function(e){o.Message.setProto3StringField(this,1,e)},proto.PortalUpdate.SiteAssignment.prototype.getSiteId=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.PortalUpdate.SiteAssignment.prototype.setSiteId=function(e){o.Message.setProto3IntField(this,2,e)},proto.PortalUpdate.EditorProxyRemoval=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.PortalUpdate.EditorProxyRemoval,o.Message),n.DEBUG&&!COMPILED&&(proto.PortalUpdate.EditorProxyRemoval.displayName="proto.PortalUpdate.EditorProxyRemoval"),o.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.EditorProxyRemoval.prototype.toObject=function(e){return proto.PortalUpdate.EditorProxyRemoval.toObject(e,this)},proto.PortalUpdate.EditorProxyRemoval.toObject=function(e,t){var r={editorProxyId:o.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.PortalUpdate.EditorProxyRemoval.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PortalUpdate.EditorProxyRemoval;return proto.PortalUpdate.EditorProxyRemoval.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.EditorProxyRemoval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setEditorProxyId(r);break;default:t.skipField()}}return e},proto.PortalUpdate.EditorProxyRemoval.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PortalUpdate.EditorProxyRemoval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.EditorProxyRemoval.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getEditorProxyId())&&t.writeUint32(1,r)},proto.PortalUpdate.EditorProxyRemoval.prototype.getEditorProxyId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.PortalUpdate.EditorProxyRemoval.prototype.setEditorProxyId=function(e){o.Message.setProto3IntField(this,1,e)},proto.PortalUpdate.EditorProxyCreation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.PortalUpdate.EditorProxyCreation,o.Message),n.DEBUG&&!COMPILED&&(proto.PortalUpdate.EditorProxyCreation.displayName="proto.PortalUpdate.EditorProxyCreation"),o.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.EditorProxyCreation.prototype.toObject=function(e){return proto.PortalUpdate.EditorProxyCreation.toObject(e,this)},proto.PortalUpdate.EditorProxyCreation.toObject=function(e,t){var r,o={editorProxyMetadata:(r=t.getEditorProxyMetadata())&&proto.EditorProxyMetadata.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.PortalUpdate.EditorProxyCreation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PortalUpdate.EditorProxyCreation;return proto.PortalUpdate.EditorProxyCreation.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.EditorProxyCreation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.EditorProxyMetadata;t.readMessage(r,proto.EditorProxyMetadata.deserializeBinaryFromReader),e.setEditorProxyMetadata(r);break;default:t.skipField()}}return e},proto.PortalUpdate.EditorProxyCreation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PortalUpdate.EditorProxyCreation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.EditorProxyCreation.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getEditorProxyMetadata())&&t.writeMessage(1,r,proto.EditorProxyMetadata.serializeBinaryToWriter)},proto.PortalUpdate.EditorProxyCreation.prototype.getEditorProxyMetadata=function(){return o.Message.getWrapperField(this,proto.EditorProxyMetadata,1)},proto.PortalUpdate.EditorProxyCreation.prototype.setEditorProxyMetadata=function(e){o.Message.setWrapperField(this,1,e)},proto.PortalUpdate.EditorProxyCreation.prototype.clearEditorProxyMetadata=function(){this.setEditorProxyMetadata(void 0)},proto.PortalUpdate.EditorProxyCreation.prototype.hasEditorProxyMetadata=function(){return null!=o.Message.getField(this,1)},proto.PortalUpdate.prototype.getEditorProxySwitch=function(){return o.Message.getWrapperField(this,proto.PortalUpdate.EditorProxySwitch,1)},proto.PortalUpdate.prototype.setEditorProxySwitch=function(e){o.Message.setOneofWrapperField(this,1,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearEditorProxySwitch=function(){this.setEditorProxySwitch(void 0)},proto.PortalUpdate.prototype.hasEditorProxySwitch=function(){return null!=o.Message.getField(this,1)},proto.PortalUpdate.prototype.getSiteAssignment=function(){return o.Message.getWrapperField(this,proto.PortalUpdate.SiteAssignment,2)},proto.PortalUpdate.prototype.setSiteAssignment=function(e){o.Message.setOneofWrapperField(this,2,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearSiteAssignment=function(){this.setSiteAssignment(void 0)},proto.PortalUpdate.prototype.hasSiteAssignment=function(){return null!=o.Message.getField(this,2)},proto.PortalUpdate.prototype.getTetherUpdate=function(){return o.Message.getWrapperField(this,proto.Tether,4)},proto.PortalUpdate.prototype.setTetherUpdate=function(e){o.Message.setOneofWrapperField(this,4,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearTetherUpdate=function(){this.setTetherUpdate(void 0)},proto.PortalUpdate.prototype.hasTetherUpdate=function(){return null!=o.Message.getField(this,4)},proto.PortalUpdate.prototype.getEditorProxyCreation=function(){return o.Message.getWrapperField(this,proto.PortalUpdate.EditorProxyCreation,5)},proto.PortalUpdate.prototype.setEditorProxyCreation=function(e){o.Message.setOneofWrapperField(this,5,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearEditorProxyCreation=function(){this.setEditorProxyCreation(void 0)},proto.PortalUpdate.prototype.hasEditorProxyCreation=function(){return null!=o.Message.getField(this,5)},proto.Tether=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Tether,o.Message),n.DEBUG&&!COMPILED&&(proto.Tether.displayName="proto.Tether"),o.Message.GENERATE_TO_OBJECT&&(proto.Tether.prototype.toObject=function(e){return proto.Tether.toObject(e,this)},proto.Tether.toObject=function(e,t){var r={followerSiteId:o.Message.getFieldWithDefault(t,1,0),leaderSiteId:o.Message.getFieldWithDefault(t,2,0),state:o.Message.getFieldWithDefault(t,3,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Tether.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Tether;return proto.Tether.deserializeBinaryFromReader(r,t)},proto.Tether.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setFollowerSiteId(r);break;case 2:r=t.readUint32();e.setLeaderSiteId(r);break;case 3:r=t.readUint32();e.setState(r);break;default:t.skipField()}}return e},proto.Tether.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Tether.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Tether.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getFollowerSiteId())&&t.writeUint32(1,r),0!==(r=e.getLeaderSiteId())&&t.writeUint32(2,r),0!==(r=e.getState())&&t.writeUint32(3,r)},proto.Tether.prototype.getFollowerSiteId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Tether.prototype.setFollowerSiteId=function(e){o.Message.setProto3IntField(this,1,e)},proto.Tether.prototype.getLeaderSiteId=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Tether.prototype.setLeaderSiteId=function(e){o.Message.setProto3IntField(this,2,e)},proto.Tether.prototype.getState=function(){return o.Message.getFieldWithDefault(this,3,0)},proto.Tether.prototype.setState=function(e){o.Message.setProto3IntField(this,3,e)},proto.EditorProxy=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.EditorProxy,o.Message),n.DEBUG&&!COMPILED&&(proto.EditorProxy.displayName="proto.EditorProxy"),o.Message.GENERATE_TO_OBJECT&&(proto.EditorProxy.prototype.toObject=function(e){return proto.EditorProxy.toObject(e,this)},proto.EditorProxy.toObject=function(e,t){var r,n={id:o.Message.getFieldWithDefault(t,1,0),bufferProxyId:o.Message.getFieldWithDefault(t,2,0),selectionLayerIdsBySiteIdMap:(r=t.getSelectionLayerIdsBySiteIdMap())?r.toObject(e,void 0):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.EditorProxy.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.EditorProxy;return proto.EditorProxy.deserializeBinaryFromReader(r,t)},proto.EditorProxy.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readUint32();e.setBufferProxyId(r);break;case 3:r=e.getSelectionLayerIdsBySiteIdMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.EditorProxy.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.EditorProxy.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxy.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),0!==(r=e.getBufferProxyId())&&t.writeUint32(2,r),(r=e.getSelectionLayerIdsBySiteIdMap(!0))&&r.getLength()>0&&r.serializeBinary(3,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeUint32)},proto.EditorProxy.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.EditorProxy.prototype.setId=function(e){o.Message.setProto3IntField(this,1,e)},proto.EditorProxy.prototype.getBufferProxyId=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.EditorProxy.prototype.setBufferProxyId=function(e){o.Message.setProto3IntField(this,2,e)},proto.EditorProxy.prototype.getSelectionLayerIdsBySiteIdMap=function(e){return o.Message.getMapField(this,3,e,null)},proto.EditorProxy.prototype.clearSelectionLayerIdsBySiteIdMap=function(){this.getSelectionLayerIdsBySiteIdMap().clear()},proto.EditorProxyMetadata=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.EditorProxyMetadata,o.Message),n.DEBUG&&!COMPILED&&(proto.EditorProxyMetadata.displayName="proto.EditorProxyMetadata"),o.Message.GENERATE_TO_OBJECT&&(proto.EditorProxyMetadata.prototype.toObject=function(e){return proto.EditorProxyMetadata.toObject(e,this)},proto.EditorProxyMetadata.toObject=function(e,t){var r={id:o.Message.getFieldWithDefault(t,1,0),bufferProxyId:o.Message.getFieldWithDefault(t,2,0),bufferProxyUri:o.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.EditorProxyMetadata.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.EditorProxyMetadata;return proto.EditorProxyMetadata.deserializeBinaryFromReader(r,t)},proto.EditorProxyMetadata.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readUint32();e.setBufferProxyId(r);break;case 3:r=t.readString();e.setBufferProxyUri(r);break;default:t.skipField()}}return e},proto.EditorProxyMetadata.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.EditorProxyMetadata.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxyMetadata.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),0!==(r=e.getBufferProxyId())&&t.writeUint32(2,r),(r=e.getBufferProxyUri()).length>0&&t.writeString(3,r)},proto.EditorProxyMetadata.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.EditorProxyMetadata.prototype.setId=function(e){o.Message.setProto3IntField(this,1,e)},proto.EditorProxyMetadata.prototype.getBufferProxyId=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.EditorProxyMetadata.prototype.setBufferProxyId=function(e){o.Message.setProto3IntField(this,2,e)},proto.EditorProxyMetadata.prototype.getBufferProxyUri=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.EditorProxyMetadata.prototype.setBufferProxyUri=function(e){o.Message.setProto3StringField(this,3,e)},proto.EditorProxyUpdate=function(e){o.Message.initialize(this,e,0,-1,null,proto.EditorProxyUpdate.oneofGroups_)},n.inherits(proto.EditorProxyUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.EditorProxyUpdate.displayName="proto.EditorProxyUpdate"),proto.EditorProxyUpdate.oneofGroups_=[[1]],proto.EditorProxyUpdate.VariantCase={VARIANT_NOT_SET:0,SELECTIONS_UPDATE:1},proto.EditorProxyUpdate.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.EditorProxyUpdate.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.EditorProxyUpdate.prototype.toObject=function(e){return proto.EditorProxyUpdate.toObject(e,this)},proto.EditorProxyUpdate.toObject=function(e,t){var r,o={selectionsUpdate:(r=t.getSelectionsUpdate())&&proto.EditorProxyUpdate.SelectionsUpdate.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.EditorProxyUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.EditorProxyUpdate;return proto.EditorProxyUpdate.deserializeBinaryFromReader(r,t)},proto.EditorProxyUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.EditorProxyUpdate.SelectionsUpdate;t.readMessage(r,proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinaryFromReader),e.setSelectionsUpdate(r);break;default:t.skipField()}}return e},proto.EditorProxyUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.EditorProxyUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxyUpdate.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getSelectionsUpdate())&&t.writeMessage(1,r,proto.EditorProxyUpdate.SelectionsUpdate.serializeBinaryToWriter)},proto.EditorProxyUpdate.SelectionsUpdate=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.EditorProxyUpdate.SelectionsUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.EditorProxyUpdate.SelectionsUpdate.displayName="proto.EditorProxyUpdate.SelectionsUpdate"),o.Message.GENERATE_TO_OBJECT&&(proto.EditorProxyUpdate.SelectionsUpdate.prototype.toObject=function(e){return proto.EditorProxyUpdate.SelectionsUpdate.toObject(e,this)},proto.EditorProxyUpdate.SelectionsUpdate.toObject=function(e,t){var r,o={selectionLayerIdsBySiteIdMap:(r=t.getSelectionLayerIdsBySiteIdMap())?r.toObject(e,void 0):[]};return e&&(o.$jspbMessageInstance=t),o}),proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.EditorProxyUpdate.SelectionsUpdate;return proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinaryFromReader(r,t)},proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=e.getSelectionLayerIdsBySiteIdMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.EditorProxyUpdate.SelectionsUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.EditorProxyUpdate.SelectionsUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxyUpdate.SelectionsUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSelectionLayerIdsBySiteIdMap(!0))&&r.getLength()>0&&r.serializeBinary(1,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeUint32)},proto.EditorProxyUpdate.SelectionsUpdate.prototype.getSelectionLayerIdsBySiteIdMap=function(e){return o.Message.getMapField(this,1,e,null)},proto.EditorProxyUpdate.SelectionsUpdate.prototype.clearSelectionLayerIdsBySiteIdMap=function(){this.getSelectionLayerIdsBySiteIdMap().clear()},proto.EditorProxyUpdate.prototype.getSelectionsUpdate=function(){return o.Message.getWrapperField(this,proto.EditorProxyUpdate.SelectionsUpdate,1)},proto.EditorProxyUpdate.prototype.setSelectionsUpdate=function(e){o.Message.setOneofWrapperField(this,1,proto.EditorProxyUpdate.oneofGroups_[0],e)},proto.EditorProxyUpdate.prototype.clearSelectionsUpdate=function(){this.setSelectionsUpdate(void 0)},proto.EditorProxyUpdate.prototype.hasSelectionsUpdate=function(){return null!=o.Message.getField(this,1)},proto.BufferProxy=function(e){o.Message.initialize(this,e,0,-1,proto.BufferProxy.repeatedFields_,null)},n.inherits(proto.BufferProxy,o.Message),n.DEBUG&&!COMPILED&&(proto.BufferProxy.displayName="proto.BufferProxy"),proto.BufferProxy.repeatedFields_=[3],o.Message.GENERATE_TO_OBJECT&&(proto.BufferProxy.prototype.toObject=function(e){return proto.BufferProxy.toObject(e,this)},proto.BufferProxy.toObject=function(e,t){var r={id:o.Message.getFieldWithDefault(t,1,0),uri:o.Message.getFieldWithDefault(t,2,""),operationsList:o.Message.toObjectList(t.getOperationsList(),s.Operation.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.BufferProxy.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.BufferProxy;return proto.BufferProxy.deserializeBinaryFromReader(r,t)},proto.BufferProxy.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readString();e.setUri(r);break;case 3:r=new s.Operation;t.readMessage(r,s.Operation.deserializeBinaryFromReader),e.addOperations(r);break;default:t.skipField()}}return e},proto.BufferProxy.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.BufferProxy.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxy.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),(r=e.getUri()).length>0&&t.writeString(2,r),(r=e.getOperationsList()).length>0&&t.writeRepeatedMessage(3,r,s.Operation.serializeBinaryToWriter)},proto.BufferProxy.prototype.getId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.BufferProxy.prototype.setId=function(e){o.Message.setProto3IntField(this,1,e)},proto.BufferProxy.prototype.getUri=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.BufferProxy.prototype.setUri=function(e){o.Message.setProto3StringField(this,2,e)},proto.BufferProxy.prototype.getOperationsList=function(){return o.Message.getRepeatedWrapperField(this,s.Operation,3)},proto.BufferProxy.prototype.setOperationsList=function(e){o.Message.setRepeatedWrapperField(this,3,e)},proto.BufferProxy.prototype.addOperations=function(e,t){return o.Message.addToRepeatedWrapperField(this,3,e,proto.Operation,t)},proto.BufferProxy.prototype.clearOperationsList=function(){this.setOperationsList([])},proto.BufferProxyUpdate=function(e){o.Message.initialize(this,e,0,-1,null,proto.BufferProxyUpdate.oneofGroups_)},n.inherits(proto.BufferProxyUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.BufferProxyUpdate.displayName="proto.BufferProxyUpdate"),proto.BufferProxyUpdate.oneofGroups_=[[2,3]],proto.BufferProxyUpdate.VariantCase={VARIANT_NOT_SET:0,OPERATIONS_UPDATE:2,URI_UPDATE:3},proto.BufferProxyUpdate.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.BufferProxyUpdate.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.BufferProxyUpdate.prototype.toObject=function(e){return proto.BufferProxyUpdate.toObject(e,this)},proto.BufferProxyUpdate.toObject=function(e,t){var r,o={operationsUpdate:(r=t.getOperationsUpdate())&&proto.BufferProxyUpdate.OperationsUpdate.toObject(e,r),uriUpdate:(r=t.getUriUpdate())&&proto.BufferProxyUpdate.URIUpdate.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.BufferProxyUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.BufferProxyUpdate;return proto.BufferProxyUpdate.deserializeBinaryFromReader(r,t)},proto.BufferProxyUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.BufferProxyUpdate.OperationsUpdate;t.readMessage(r,proto.BufferProxyUpdate.OperationsUpdate.deserializeBinaryFromReader),e.setOperationsUpdate(r);break;case 3:r=new proto.BufferProxyUpdate.URIUpdate;t.readMessage(r,proto.BufferProxyUpdate.URIUpdate.deserializeBinaryFromReader),e.setUriUpdate(r);break;default:t.skipField()}}return e},proto.BufferProxyUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.BufferProxyUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxyUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getOperationsUpdate())&&t.writeMessage(2,r,proto.BufferProxyUpdate.OperationsUpdate.serializeBinaryToWriter),null!=(r=e.getUriUpdate())&&t.writeMessage(3,r,proto.BufferProxyUpdate.URIUpdate.serializeBinaryToWriter)},proto.BufferProxyUpdate.OperationsUpdate=function(e){o.Message.initialize(this,e,0,-1,proto.BufferProxyUpdate.OperationsUpdate.repeatedFields_,null)},n.inherits(proto.BufferProxyUpdate.OperationsUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.BufferProxyUpdate.OperationsUpdate.displayName="proto.BufferProxyUpdate.OperationsUpdate"),proto.BufferProxyUpdate.OperationsUpdate.repeatedFields_=[1],o.Message.GENERATE_TO_OBJECT&&(proto.BufferProxyUpdate.OperationsUpdate.prototype.toObject=function(e){return proto.BufferProxyUpdate.OperationsUpdate.toObject(e,this)},proto.BufferProxyUpdate.OperationsUpdate.toObject=function(e,t){var r={operationsList:o.Message.toObjectList(t.getOperationsList(),s.Operation.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.BufferProxyUpdate.OperationsUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.BufferProxyUpdate.OperationsUpdate;return proto.BufferProxyUpdate.OperationsUpdate.deserializeBinaryFromReader(r,t)},proto.BufferProxyUpdate.OperationsUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new s.Operation;t.readMessage(r,s.Operation.deserializeBinaryFromReader),e.addOperations(r);break;default:t.skipField()}}return e},proto.BufferProxyUpdate.OperationsUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.BufferProxyUpdate.OperationsUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxyUpdate.OperationsUpdate.serializeBinaryToWriter=function(e,t){var r;(r=e.getOperationsList()).length>0&&t.writeRepeatedMessage(1,r,s.Operation.serializeBinaryToWriter)},proto.BufferProxyUpdate.OperationsUpdate.prototype.getOperationsList=function(){return o.Message.getRepeatedWrapperField(this,s.Operation,1)},proto.BufferProxyUpdate.OperationsUpdate.prototype.setOperationsList=function(e){o.Message.setRepeatedWrapperField(this,1,e)},proto.BufferProxyUpdate.OperationsUpdate.prototype.addOperations=function(e,t){return o.Message.addToRepeatedWrapperField(this,1,e,proto.Operation,t)},proto.BufferProxyUpdate.OperationsUpdate.prototype.clearOperationsList=function(){this.setOperationsList([])},proto.BufferProxyUpdate.URIUpdate=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.BufferProxyUpdate.URIUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.BufferProxyUpdate.URIUpdate.displayName="proto.BufferProxyUpdate.URIUpdate"),o.Message.GENERATE_TO_OBJECT&&(proto.BufferProxyUpdate.URIUpdate.prototype.toObject=function(e){return proto.BufferProxyUpdate.URIUpdate.toObject(e,this)},proto.BufferProxyUpdate.URIUpdate.toObject=function(e,t){var r={uri:o.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.BufferProxyUpdate.URIUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.BufferProxyUpdate.URIUpdate;return proto.BufferProxyUpdate.URIUpdate.deserializeBinaryFromReader(r,t)},proto.BufferProxyUpdate.URIUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setUri(r);break;default:t.skipField()}}return e},proto.BufferProxyUpdate.URIUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.BufferProxyUpdate.URIUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxyUpdate.URIUpdate.serializeBinaryToWriter=function(e,t){var r;(r=e.getUri()).length>0&&t.writeString(1,r)},proto.BufferProxyUpdate.URIUpdate.prototype.getUri=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.BufferProxyUpdate.URIUpdate.prototype.setUri=function(e){o.Message.setProto3StringField(this,1,e)},proto.BufferProxyUpdate.prototype.getOperationsUpdate=function(){return o.Message.getWrapperField(this,proto.BufferProxyUpdate.OperationsUpdate,2)},proto.BufferProxyUpdate.prototype.setOperationsUpdate=function(e){o.Message.setOneofWrapperField(this,2,proto.BufferProxyUpdate.oneofGroups_[0],e)},proto.BufferProxyUpdate.prototype.clearOperationsUpdate=function(){this.setOperationsUpdate(void 0)},proto.BufferProxyUpdate.prototype.hasOperationsUpdate=function(){return null!=o.Message.getField(this,2)},proto.BufferProxyUpdate.prototype.getUriUpdate=function(){return o.Message.getWrapperField(this,proto.BufferProxyUpdate.URIUpdate,3)},proto.BufferProxyUpdate.prototype.setUriUpdate=function(e){o.Message.setOneofWrapperField(this,3,proto.BufferProxyUpdate.oneofGroups_[0],e)},proto.BufferProxyUpdate.prototype.clearUriUpdate=function(){this.setUriUpdate(void 0)},proto.BufferProxyUpdate.prototype.hasUriUpdate=function(){return null!=o.Message.getField(this,3)},proto.RouterMessage=function(e){o.Message.initialize(this,e,0,-1,null,proto.RouterMessage.oneofGroups_)},n.inherits(proto.RouterMessage,o.Message),n.DEBUG&&!COMPILED&&(proto.RouterMessage.displayName="proto.RouterMessage"),proto.RouterMessage.oneofGroups_=[[2,3,4]],proto.RouterMessage.VariantCase={VARIANT_NOT_SET:0,NOTIFICATION:2,REQUEST:3,RESPONSE:4},proto.RouterMessage.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.RouterMessage.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.prototype.toObject=function(e){return proto.RouterMessage.toObject(e,this)},proto.RouterMessage.toObject=function(e,t){var r,o={notification:(r=t.getNotification())&&proto.RouterMessage.Notification.toObject(e,r),request:(r=t.getRequest())&&proto.RouterMessage.Request.toObject(e,r),response:(r=t.getResponse())&&proto.RouterMessage.Response.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.RouterMessage.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.RouterMessage;return proto.RouterMessage.deserializeBinaryFromReader(r,t)},proto.RouterMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.RouterMessage.Notification;t.readMessage(r,proto.RouterMessage.Notification.deserializeBinaryFromReader),e.setNotification(r);break;case 3:r=new proto.RouterMessage.Request;t.readMessage(r,proto.RouterMessage.Request.deserializeBinaryFromReader),e.setRequest(r);break;case 4:r=new proto.RouterMessage.Response;t.readMessage(r,proto.RouterMessage.Response.deserializeBinaryFromReader),e.setResponse(r);break;default:t.skipField()}}return e},proto.RouterMessage.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.RouterMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getNotification())&&t.writeMessage(2,r,proto.RouterMessage.Notification.serializeBinaryToWriter),null!=(r=e.getRequest())&&t.writeMessage(3,r,proto.RouterMessage.Request.serializeBinaryToWriter),null!=(r=e.getResponse())&&t.writeMessage(4,r,proto.RouterMessage.Response.serializeBinaryToWriter)},proto.RouterMessage.Notification=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.RouterMessage.Notification,o.Message),n.DEBUG&&!COMPILED&&(proto.RouterMessage.Notification.displayName="proto.RouterMessage.Notification"),o.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.Notification.prototype.toObject=function(e){return proto.RouterMessage.Notification.toObject(e,this)},proto.RouterMessage.Notification.toObject=function(e,t){var r={channelId:o.Message.getFieldWithDefault(t,1,""),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.RouterMessage.Notification.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.RouterMessage.Notification;return proto.RouterMessage.Notification.deserializeBinaryFromReader(r,t)},proto.RouterMessage.Notification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setChannelId(r);break;case 2:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.RouterMessage.Notification.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.RouterMessage.Notification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.Notification.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getChannelId()).length>0&&t.writeString(1,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(2,r)},proto.RouterMessage.Notification.prototype.getChannelId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.RouterMessage.Notification.prototype.setChannelId=function(e){o.Message.setProto3StringField(this,1,e)},proto.RouterMessage.Notification.prototype.getBody=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.RouterMessage.Notification.prototype.getBody_asB64=function(){return o.Message.bytesAsB64(this.getBody())},proto.RouterMessage.Notification.prototype.getBody_asU8=function(){return o.Message.bytesAsU8(this.getBody())},proto.RouterMessage.Notification.prototype.setBody=function(e){o.Message.setProto3BytesField(this,2,e)},proto.RouterMessage.Request=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.RouterMessage.Request,o.Message),n.DEBUG&&!COMPILED&&(proto.RouterMessage.Request.displayName="proto.RouterMessage.Request"),o.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.Request.prototype.toObject=function(e){return proto.RouterMessage.Request.toObject(e,this)},proto.RouterMessage.Request.toObject=function(e,t){var r={channelId:o.Message.getFieldWithDefault(t,1,""),requestId:o.Message.getFieldWithDefault(t,2,0),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.RouterMessage.Request.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.RouterMessage.Request;return proto.RouterMessage.Request.deserializeBinaryFromReader(r,t)},proto.RouterMessage.Request.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setChannelId(r);break;case 2:r=t.readUint32();e.setRequestId(r);break;case 3:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.RouterMessage.Request.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.RouterMessage.Request.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.Request.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getChannelId()).length>0&&t.writeString(1,r),0!==(r=e.getRequestId())&&t.writeUint32(2,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(3,r)},proto.RouterMessage.Request.prototype.getChannelId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.RouterMessage.Request.prototype.setChannelId=function(e){o.Message.setProto3StringField(this,1,e)},proto.RouterMessage.Request.prototype.getRequestId=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.RouterMessage.Request.prototype.setRequestId=function(e){o.Message.setProto3IntField(this,2,e)},proto.RouterMessage.Request.prototype.getBody=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.RouterMessage.Request.prototype.getBody_asB64=function(){return o.Message.bytesAsB64(this.getBody())},proto.RouterMessage.Request.prototype.getBody_asU8=function(){return o.Message.bytesAsU8(this.getBody())},proto.RouterMessage.Request.prototype.setBody=function(e){o.Message.setProto3BytesField(this,3,e)},proto.RouterMessage.Response=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.RouterMessage.Response,o.Message),n.DEBUG&&!COMPILED&&(proto.RouterMessage.Response.displayName="proto.RouterMessage.Response"),o.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.Response.prototype.toObject=function(e){return proto.RouterMessage.Response.toObject(e,this)},proto.RouterMessage.Response.toObject=function(e,t){var r={requestId:o.Message.getFieldWithDefault(t,1,0),body:t.getBody_asB64(),ok:o.Message.getFieldWithDefault(t,3,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.RouterMessage.Response.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.RouterMessage.Response;return proto.RouterMessage.Response.deserializeBinaryFromReader(r,t)},proto.RouterMessage.Response.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRequestId(r);break;case 2:r=t.readBytes();e.setBody(r);break;case 3:r=t.readBool();e.setOk(r);break;default:t.skipField()}}return e},proto.RouterMessage.Response.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.RouterMessage.Response.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.Response.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRequestId())&&t.writeUint32(1,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(2,r),(r=e.getOk())&&t.writeBool(3,r)},proto.RouterMessage.Response.prototype.getRequestId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.RouterMessage.Response.prototype.setRequestId=function(e){o.Message.setProto3IntField(this,1,e)},proto.RouterMessage.Response.prototype.getBody=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.RouterMessage.Response.prototype.getBody_asB64=function(){return o.Message.bytesAsB64(this.getBody())},proto.RouterMessage.Response.prototype.getBody_asU8=function(){return o.Message.bytesAsU8(this.getBody())},proto.RouterMessage.Response.prototype.setBody=function(e){o.Message.setProto3BytesField(this,2,e)},proto.RouterMessage.Response.prototype.getOk=function(){return o.Message.getFieldWithDefault(this,3,!1)},proto.RouterMessage.Response.prototype.setOk=function(e){o.Message.setProto3BooleanField(this,3,e)},proto.RouterMessage.prototype.getNotification=function(){return o.Message.getWrapperField(this,proto.RouterMessage.Notification,2)},proto.RouterMessage.prototype.setNotification=function(e){o.Message.setOneofWrapperField(this,2,proto.RouterMessage.oneofGroups_[0],e)},proto.RouterMessage.prototype.clearNotification=function(){this.setNotification(void 0)},proto.RouterMessage.prototype.hasNotification=function(){return null!=o.Message.getField(this,2)},proto.RouterMessage.prototype.getRequest=function(){return o.Message.getWrapperField(this,proto.RouterMessage.Request,3)},proto.RouterMessage.prototype.setRequest=function(e){o.Message.setOneofWrapperField(this,3,proto.RouterMessage.oneofGroups_[0],e)},proto.RouterMessage.prototype.clearRequest=function(){this.setRequest(void 0)},proto.RouterMessage.prototype.hasRequest=function(){return null!=o.Message.getField(this,3)},proto.RouterMessage.prototype.getResponse=function(){return o.Message.getWrapperField(this,proto.RouterMessage.Response,4)},proto.RouterMessage.prototype.setResponse=function(e){o.Message.setOneofWrapperField(this,4,proto.RouterMessage.oneofGroups_[0],e)},proto.RouterMessage.prototype.clearResponse=function(){this.setResponse(void 0)},proto.RouterMessage.prototype.hasResponse=function(){return null!=o.Message.getField(this,4)},proto.NetworkMessage=function(e){o.Message.initialize(this,e,0,-1,null,proto.NetworkMessage.oneofGroups_)},n.inherits(proto.NetworkMessage,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.displayName="proto.NetworkMessage"),proto.NetworkMessage.oneofGroups_=[[2,3,4,5,6,7]],proto.NetworkMessage.VariantCase={VARIANT_NOT_SET:0,STAR_JOIN_REQUEST:2,STAR_JOIN_RESPONSE:3,STAR_JOIN_NOTIFICATION:4,STAR_LEAVE_NOTIFICATION:5,STAR_UNICAST:6,STAR_BROADCAST:7},proto.NetworkMessage.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.NetworkMessage.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.prototype.toObject=function(e){return proto.NetworkMessage.toObject(e,this)},proto.NetworkMessage.toObject=function(e,t){var r,n={networkId:o.Message.getFieldWithDefault(t,1,""),starJoinRequest:(r=t.getStarJoinRequest())&&proto.NetworkMessage.StarJoinRequest.toObject(e,r),starJoinResponse:(r=t.getStarJoinResponse())&&proto.NetworkMessage.StarJoinResponse.toObject(e,r),starJoinNotification:(r=t.getStarJoinNotification())&&proto.NetworkMessage.StarJoinNotification.toObject(e,r),starLeaveNotification:(r=t.getStarLeaveNotification())&&proto.NetworkMessage.StarLeaveNotification.toObject(e,r),starUnicast:(r=t.getStarUnicast())&&proto.NetworkMessage.StarUnicast.toObject(e,r),starBroadcast:(r=t.getStarBroadcast())&&proto.NetworkMessage.StarBroadcast.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.NetworkMessage.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage;return proto.NetworkMessage.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setNetworkId(r);break;case 2:r=new proto.NetworkMessage.StarJoinRequest;t.readMessage(r,proto.NetworkMessage.StarJoinRequest.deserializeBinaryFromReader),e.setStarJoinRequest(r);break;case 3:r=new proto.NetworkMessage.StarJoinResponse;t.readMessage(r,proto.NetworkMessage.StarJoinResponse.deserializeBinaryFromReader),e.setStarJoinResponse(r);break;case 4:r=new proto.NetworkMessage.StarJoinNotification;t.readMessage(r,proto.NetworkMessage.StarJoinNotification.deserializeBinaryFromReader),e.setStarJoinNotification(r);break;case 5:r=new proto.NetworkMessage.StarLeaveNotification;t.readMessage(r,proto.NetworkMessage.StarLeaveNotification.deserializeBinaryFromReader),e.setStarLeaveNotification(r);break;case 6:r=new proto.NetworkMessage.StarUnicast;t.readMessage(r,proto.NetworkMessage.StarUnicast.deserializeBinaryFromReader),e.setStarUnicast(r);break;case 7:r=new proto.NetworkMessage.StarBroadcast;t.readMessage(r,proto.NetworkMessage.StarBroadcast.deserializeBinaryFromReader),e.setStarBroadcast(r);break;default:t.skipField()}}return e},proto.NetworkMessage.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getNetworkId()).length>0&&t.writeString(1,r),null!=(r=e.getStarJoinRequest())&&t.writeMessage(2,r,proto.NetworkMessage.StarJoinRequest.serializeBinaryToWriter),null!=(r=e.getStarJoinResponse())&&t.writeMessage(3,r,proto.NetworkMessage.StarJoinResponse.serializeBinaryToWriter),null!=(r=e.getStarJoinNotification())&&t.writeMessage(4,r,proto.NetworkMessage.StarJoinNotification.serializeBinaryToWriter),null!=(r=e.getStarLeaveNotification())&&t.writeMessage(5,r,proto.NetworkMessage.StarLeaveNotification.serializeBinaryToWriter),null!=(r=e.getStarUnicast())&&t.writeMessage(6,r,proto.NetworkMessage.StarUnicast.serializeBinaryToWriter),null!=(r=e.getStarBroadcast())&&t.writeMessage(7,r,proto.NetworkMessage.StarBroadcast.serializeBinaryToWriter)},proto.NetworkMessage.StarJoinRequest=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.NetworkMessage.StarJoinRequest,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarJoinRequest.displayName="proto.NetworkMessage.StarJoinRequest"),o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarJoinRequest.prototype.toObject=function(e){return proto.NetworkMessage.StarJoinRequest.toObject(e,this)},proto.NetworkMessage.StarJoinRequest.toObject=function(e,t){var r={senderId:o.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarJoinRequest.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage.StarJoinRequest;return proto.NetworkMessage.StarJoinRequest.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarJoinRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSenderId(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarJoinRequest.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.StarJoinRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarJoinRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getSenderId()).length>0&&t.writeString(1,r)},proto.NetworkMessage.StarJoinRequest.prototype.getSenderId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarJoinRequest.prototype.setSenderId=function(e){o.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarJoinResponse=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.NetworkMessage.StarJoinResponse,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarJoinResponse.displayName="proto.NetworkMessage.StarJoinResponse"),o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarJoinResponse.prototype.toObject=function(e){return proto.NetworkMessage.StarJoinResponse.toObject(e,this)},proto.NetworkMessage.StarJoinResponse.toObject=function(e,t){var r,o={memberIdentitiesByIdMap:(r=t.getMemberIdentitiesByIdMap())?r.toObject(e,proto.PeerIdentity.toObject):[]};return e&&(o.$jspbMessageInstance=t),o}),proto.NetworkMessage.StarJoinResponse.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage.StarJoinResponse;return proto.NetworkMessage.StarJoinResponse.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarJoinResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=e.getMemberIdentitiesByIdMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readString,o.BinaryReader.prototype.readMessage,proto.PeerIdentity.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.NetworkMessage.StarJoinResponse.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.StarJoinResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarJoinResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getMemberIdentitiesByIdMap(!0))&&r.getLength()>0&&r.serializeBinary(1,t,o.BinaryWriter.prototype.writeString,o.BinaryWriter.prototype.writeMessage,proto.PeerIdentity.serializeBinaryToWriter)},proto.NetworkMessage.StarJoinResponse.prototype.getMemberIdentitiesByIdMap=function(e){return o.Message.getMapField(this,1,e,proto.PeerIdentity)},proto.NetworkMessage.StarJoinResponse.prototype.clearMemberIdentitiesByIdMap=function(){this.getMemberIdentitiesByIdMap().clear()},proto.NetworkMessage.StarJoinNotification=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.NetworkMessage.StarJoinNotification,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarJoinNotification.displayName="proto.NetworkMessage.StarJoinNotification"),o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarJoinNotification.prototype.toObject=function(e){return proto.NetworkMessage.StarJoinNotification.toObject(e,this)},proto.NetworkMessage.StarJoinNotification.toObject=function(e,t){var r,n={memberId:o.Message.getFieldWithDefault(t,1,""),memberIdentity:(r=t.getMemberIdentity())&&proto.PeerIdentity.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.NetworkMessage.StarJoinNotification.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage.StarJoinNotification;return proto.NetworkMessage.StarJoinNotification.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarJoinNotification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setMemberId(r);break;case 2:r=new proto.PeerIdentity;t.readMessage(r,proto.PeerIdentity.deserializeBinaryFromReader),e.setMemberIdentity(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarJoinNotification.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.StarJoinNotification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarJoinNotification.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getMemberId()).length>0&&t.writeString(1,r),null!=(r=e.getMemberIdentity())&&t.writeMessage(2,r,proto.PeerIdentity.serializeBinaryToWriter)},proto.NetworkMessage.StarJoinNotification.prototype.getMemberId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarJoinNotification.prototype.setMemberId=function(e){o.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarJoinNotification.prototype.getMemberIdentity=function(){return o.Message.getWrapperField(this,proto.PeerIdentity,2)},proto.NetworkMessage.StarJoinNotification.prototype.setMemberIdentity=function(e){o.Message.setWrapperField(this,2,e)},proto.NetworkMessage.StarJoinNotification.prototype.clearMemberIdentity=function(){this.setMemberIdentity(void 0)},proto.NetworkMessage.StarJoinNotification.prototype.hasMemberIdentity=function(){return null!=o.Message.getField(this,2)},proto.NetworkMessage.StarLeaveNotification=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.NetworkMessage.StarLeaveNotification,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarLeaveNotification.displayName="proto.NetworkMessage.StarLeaveNotification"),o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarLeaveNotification.prototype.toObject=function(e){return proto.NetworkMessage.StarLeaveNotification.toObject(e,this)},proto.NetworkMessage.StarLeaveNotification.toObject=function(e,t){var r={memberId:o.Message.getFieldWithDefault(t,1,""),connectionLost:o.Message.getFieldWithDefault(t,2,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarLeaveNotification.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage.StarLeaveNotification;return proto.NetworkMessage.StarLeaveNotification.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarLeaveNotification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setMemberId(r);break;case 2:r=t.readBool();e.setConnectionLost(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarLeaveNotification.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.StarLeaveNotification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarLeaveNotification.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getMemberId()).length>0&&t.writeString(1,r),(r=e.getConnectionLost())&&t.writeBool(2,r)},proto.NetworkMessage.StarLeaveNotification.prototype.getMemberId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarLeaveNotification.prototype.setMemberId=function(e){o.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarLeaveNotification.prototype.getConnectionLost=function(){return o.Message.getFieldWithDefault(this,2,!1)},proto.NetworkMessage.StarLeaveNotification.prototype.setConnectionLost=function(e){o.Message.setProto3BooleanField(this,2,e)},proto.NetworkMessage.StarUnicast=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.NetworkMessage.StarUnicast,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarUnicast.displayName="proto.NetworkMessage.StarUnicast"),o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarUnicast.prototype.toObject=function(e){return proto.NetworkMessage.StarUnicast.toObject(e,this)},proto.NetworkMessage.StarUnicast.toObject=function(e,t){var r={senderId:o.Message.getFieldWithDefault(t,1,""),recipientId:o.Message.getFieldWithDefault(t,2,""),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarUnicast.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage.StarUnicast;return proto.NetworkMessage.StarUnicast.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarUnicast.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSenderId(r);break;case 2:r=t.readString();e.setRecipientId(r);break;case 3:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarUnicast.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.StarUnicast.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarUnicast.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSenderId()).length>0&&t.writeString(1,r),(r=e.getRecipientId()).length>0&&t.writeString(2,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(3,r)},proto.NetworkMessage.StarUnicast.prototype.getSenderId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarUnicast.prototype.setSenderId=function(e){o.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarUnicast.prototype.getRecipientId=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.NetworkMessage.StarUnicast.prototype.setRecipientId=function(e){o.Message.setProto3StringField(this,2,e)},proto.NetworkMessage.StarUnicast.prototype.getBody=function(){return o.Message.getFieldWithDefault(this,3,"")},proto.NetworkMessage.StarUnicast.prototype.getBody_asB64=function(){return o.Message.bytesAsB64(this.getBody())},proto.NetworkMessage.StarUnicast.prototype.getBody_asU8=function(){return o.Message.bytesAsU8(this.getBody())},proto.NetworkMessage.StarUnicast.prototype.setBody=function(e){o.Message.setProto3BytesField(this,3,e)},proto.NetworkMessage.StarBroadcast=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.NetworkMessage.StarBroadcast,o.Message),n.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarBroadcast.displayName="proto.NetworkMessage.StarBroadcast"),o.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarBroadcast.prototype.toObject=function(e){return proto.NetworkMessage.StarBroadcast.toObject(e,this)},proto.NetworkMessage.StarBroadcast.toObject=function(e,t){var r={senderId:o.Message.getFieldWithDefault(t,1,""),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarBroadcast.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.NetworkMessage.StarBroadcast;return proto.NetworkMessage.StarBroadcast.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarBroadcast.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSenderId(r);break;case 2:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarBroadcast.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.NetworkMessage.StarBroadcast.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarBroadcast.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSenderId()).length>0&&t.writeString(1,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(2,r)},proto.NetworkMessage.StarBroadcast.prototype.getSenderId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarBroadcast.prototype.setSenderId=function(e){o.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarBroadcast.prototype.getBody=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.NetworkMessage.StarBroadcast.prototype.getBody_asB64=function(){return o.Message.bytesAsB64(this.getBody())},proto.NetworkMessage.StarBroadcast.prototype.getBody_asU8=function(){return o.Message.bytesAsU8(this.getBody())},proto.NetworkMessage.StarBroadcast.prototype.setBody=function(e){o.Message.setProto3BytesField(this,2,e)},proto.NetworkMessage.prototype.getNetworkId=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.prototype.setNetworkId=function(e){o.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.prototype.getStarJoinRequest=function(){return o.Message.getWrapperField(this,proto.NetworkMessage.StarJoinRequest,2)},proto.NetworkMessage.prototype.setStarJoinRequest=function(e){o.Message.setOneofWrapperField(this,2,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarJoinRequest=function(){this.setStarJoinRequest(void 0)},proto.NetworkMessage.prototype.hasStarJoinRequest=function(){return null!=o.Message.getField(this,2)},proto.NetworkMessage.prototype.getStarJoinResponse=function(){return o.Message.getWrapperField(this,proto.NetworkMessage.StarJoinResponse,3)},proto.NetworkMessage.prototype.setStarJoinResponse=function(e){o.Message.setOneofWrapperField(this,3,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarJoinResponse=function(){this.setStarJoinResponse(void 0)},proto.NetworkMessage.prototype.hasStarJoinResponse=function(){return null!=o.Message.getField(this,3)},proto.NetworkMessage.prototype.getStarJoinNotification=function(){return o.Message.getWrapperField(this,proto.NetworkMessage.StarJoinNotification,4)},proto.NetworkMessage.prototype.setStarJoinNotification=function(e){o.Message.setOneofWrapperField(this,4,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarJoinNotification=function(){this.setStarJoinNotification(void 0)},proto.NetworkMessage.prototype.hasStarJoinNotification=function(){return null!=o.Message.getField(this,4)},proto.NetworkMessage.prototype.getStarLeaveNotification=function(){return o.Message.getWrapperField(this,proto.NetworkMessage.StarLeaveNotification,5)},proto.NetworkMessage.prototype.setStarLeaveNotification=function(e){o.Message.setOneofWrapperField(this,5,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarLeaveNotification=function(){this.setStarLeaveNotification(void 0)},proto.NetworkMessage.prototype.hasStarLeaveNotification=function(){return null!=o.Message.getField(this,5)},proto.NetworkMessage.prototype.getStarUnicast=function(){return o.Message.getWrapperField(this,proto.NetworkMessage.StarUnicast,6)},proto.NetworkMessage.prototype.setStarUnicast=function(e){o.Message.setOneofWrapperField(this,6,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarUnicast=function(){this.setStarUnicast(void 0)},proto.NetworkMessage.prototype.hasStarUnicast=function(){return null!=o.Message.getField(this,6)},proto.NetworkMessage.prototype.getStarBroadcast=function(){return o.Message.getWrapperField(this,proto.NetworkMessage.StarBroadcast,7)},proto.NetworkMessage.prototype.setStarBroadcast=function(e){o.Message.setOneofWrapperField(this,7,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarBroadcast=function(){this.setStarBroadcast(void 0)},proto.NetworkMessage.prototype.hasStarBroadcast=function(){return null!=o.Message.getField(this,7)},proto.PeerIdentity=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.PeerIdentity,o.Message),n.DEBUG&&!COMPILED&&(proto.PeerIdentity.displayName="proto.PeerIdentity"),o.Message.GENERATE_TO_OBJECT&&(proto.PeerIdentity.prototype.toObject=function(e){return proto.PeerIdentity.toObject(e,this)},proto.PeerIdentity.toObject=function(e,t){var r={login:o.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.PeerIdentity.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.PeerIdentity;return proto.PeerIdentity.deserializeBinaryFromReader(r,t)},proto.PeerIdentity.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setLogin(r);break;default:t.skipField()}}return e},proto.PeerIdentity.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.PeerIdentity.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PeerIdentity.serializeBinaryToWriter=function(e,t){var r;(r=e.getLogin()).length>0&&t.writeString(1,r)},proto.PeerIdentity.prototype.getLogin=function(){return o.Message.getFieldWithDefault(this,1,"")},proto.PeerIdentity.prototype.setLogin=function(e){o.Message.setProto3StringField(this,1,e)},n.object.extend(t,proto)},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";var o=r(22),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var i=Object.create(r(16));i.inherits=r(17);var s=r(65),a=r(68);i.inherits(l,s);for(var c=n(a.prototype),p=0;p<c.length;p++){var d=c[p];l.prototype[d]||(l.prototype[d]=a.prototype[d])}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",u)}function u(){this.allowHalfOpen||this._writableState.ended||o.nextTick(g,this)}function g(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),o.nextTick(t,e)}},function(e,t){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,r){try{var o=r(0);if("function"!=typeof o.inherits)throw"";e.exports=o.inherits}catch(t){e.exports=r(148)}},function(e,t){e.exports=require("vscode")},function(e,t){e.exports=function(e){return null==e||(e instanceof Buffer||(e=Buffer.from(e)),e.constructor=Uint8Array),e}},function(e,t,r){"use strict";var o=r(10),n=r(101),i=r(111),s={client:function(e,t){return void 0===(t=t||{}).masking&&(t.masking=!0),new n(e,t)},server:function(e){return void 0===(e=e||{}).requireMasking&&(e.requireMasking=!0),new i(e)},http:function(){return i.http.apply(i,arguments)},isSecureRequest:function(e){return i.isSecureRequest(e)},isWebSocket:function(e){return o.isWebSocket(e)},validateOptions:function(e,t){o.validateOptions(e,t)}};e.exports=s},function(e,t){var r=function(e,t){for(var r in this.type=e,t)this[r]=t[r]};r.prototype.initEvent=function(e,t,r){this.type=e,this.bubbles=t,this.cancelable=r},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,e.exports=r},function(e,t,r){"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,i,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,r)}));case 4:return process.nextTick((function(){e.call(null,t,r,o)}));default:for(n=new Array(s-1),i=0;i<n.length;)n[i++]=arguments[i];return process.nextTick((function(){e.apply(null,n)}))}}}:e.exports=process},function(e,t,r){var o=r(53),n=o.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=o:(i(o,t),t.Buffer=s),i(n,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disposed=!1,this.disposalAction=t}return n(e,null,[{key:"isDisposable",value:function(e){return"function"==typeof(null!=e?e.dispose:void 0)}}]),n(e,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,"function"==typeof this.disposalAction&&this.disposalAction(),this.disposalAction=null)}}]),e}()},function(module,exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var o=e.length,n=0;n<o;n++){var i=e[n];if(t.call(r,i,n,e))return{i:n,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,r,o){if(t){for(r=$jscomp.global,e=e.split("."),o=0;o<e.length-1;o++){var n=e[o];n in r||(r[n]={}),r=r[n]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&$jscomp.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.findIndex",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).i}}),"es6","es3"),$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length),t=Math.max(0,Math.min(0|t,r.length));for(var o=e.length;0<o&&0<t;)if(r[--t]!=e[--o])return!1;return 0>=o}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var o=r.length,n=e.length;t=Math.max(0,Math.min(0|t,r.length));for(var i=0;i<n&&t<o;)if(r[t++]!=e[i++])return!1;return i>=n}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(e){return e||function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)!e.length&&goog.isDef(t)?r[o]=t:r=r[o]&&r[o]!==Object.prototype[o]?r[o]:r[o]={}},goog.define=function(e,t){if(!COMPILED){var r=goog.global.CLOSURE_UNCOMPILED_DEFINES,o=goog.global.CLOSURE_DEFINES;r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)?t=r[e]:o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)&&(t=o[e])}return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var r=0;r<e.length;r++)if(t=t[e[r]],!goog.isDefAndNotNull(t))return null;return t},goog.globalize=function(e,t){for(var r in t=t||goog.global,e)t[r]=e[r]},goog.addDependency=function(e,t,r,o){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,r,o)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var r=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if(!goog.isString(o)||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[o]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,r){var o=goog.global.$jscomp;o||(goog.global.$jscomp=o={});var n=o.transpile;if(!n){var i=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(i);if(s){if(function(){(0,eval)(s+"\n//# sourceURL="+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,n=(o=goog.global.$jscomp).transpile}}return n||(n=o.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),n(e,t,r)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,o),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r=function(e){return goog.cssNameMapping_[e]||e},o=function(e){e=e.split("-");for(var t=[],o=0;o<e.length;o++)t.push(r(e[o]));return t.join("-")};return o=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:o:function(e){return e},e=t?e+"-"+o(t):o(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t,r){return r&&r.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,o){for(var n=Array(arguments.length-2),i=2;i<arguments.length;i++)n[i-2]=arguments[i];return t.prototype[r].apply(e,n)}},goog.base=function(e,t,r){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==o.superClass_){for(var n=Array(arguments.length-1),i=1;i<arguments.length;i++)n[i-1]=arguments[i];return o.superClass_.constructor.apply(e,n)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(n=Array(arguments.length-2),i=2;i<arguments.length;i++)n[i-2]=arguments[i];i=!1;for(var s=e.constructor.prototype;s;s=Object.getPrototypeOf(s))if(s[t]===o)i=!0;else if(i)return s[t].apply(e,n);if(e[t]===o)return e.constructor.prototype[t].apply(e,n);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,o=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=o&&(o instanceof Function?o(r):goog.defineClass.applyProperties_(r,o)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var r=!goog.defineClass.isUnsealable_(t),o=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===o&&r&&Object.seal instanceof Function&&Object.seal(t),t};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var r=e[t].src,o=r.lastIndexOf("?");if(o=-1==o?r.length:o,"base.js"==r.substr(o-7,7)){goog.basePath=r.substr(0,o-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,r){e?d[t]=!0:r()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",(function(){return b("[1,].length==1")})),a("es6",(function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')})),a("es7",(function(){return b("2 ** 2 == 4")})),a("es8",(function(){return b("async () => 1, true")})),a("es9",(function(){return b("({...rest} = {}), true")})),a("es_next",(function(){return!1})),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var r=this.createRequiresTranspilation_();this.requiresTranspilation_=r.map,this.transpilationTarget_=this.transpilationTarget_||r.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function r(){o&&(goog.global.setTimeout(o,0),o=null)}var o=t;if(e.length){t=[];for(var n=0;n<e.length;n++){var i=this.getPathFromDeps_(e[n]);if(!i)throw Error("Unregonized namespace: "+e[n]);t.push(this.dependencies_[i])}i=goog.require;var s=0;for(n=0;n<e.length;n++)i(e[n]),t[n].onLoad((function(){++s==e.length&&r()}))}else r()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,r=[],o=function(e){var n=t.getPathFromDeps_(e);if(!n)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[n]){for(t.written_[n]=!0,e=t.dependencies_[n],n=0;n<e.requires.length;n++)goog.isProvided_(e.requires[n])||o(e.requires[n]);r.push(e)}};o(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(r),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var r=!1,o=e.depsToLoad_.shift(),n=!1;e.loading_(o);var i={pause:function(){if(r)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){r?e.resume_():t=!1},loaded:function(){if(n)throw Error("Double call to loaded.");n=!0,e.loaded_(o)},pending:function(){for(var t=[],r=0;r<e.loadingDeps_.length;r++)t.push(e.loadingDeps_[r]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,r){r&&(goog.loadedModules_[r]={exports:t,type:goog.ModuleType.ES6,moduleId:r||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(r)throw Error("Cannot register with defer after the call to load.");e.defer_(o,t)},areDepsLoaded:function(){return e.areDepsLoaded_(o.requires)}};try{o.load(i)}finally{r=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var r=this.getPathFromDeps_(e[t]);if(!r||!(r in this.deferredCallbacks_)&&!goog.isProvided_(e[t]))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,r){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,r,o,n){this.path=e,this.relativePath=t,this.provides=r,this.requires=o,this.loadFlags=n,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&(0<=(t=(e=e.substring(t+3)).indexOf("/"))&&(e=e.substring(t+1))),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var r=goog.Dependency.callbackMap_[e],o=[],n=1;n<arguments.length;n++)o.push(arguments[n]);r.apply(void 0,o)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var r=goog.Dependency.registerCallback_((function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(r),e.loaded())})),o=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";o='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+r+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+o+"><\/script>",t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(o):o)}else{var n=t.createElement("script");n.defer=goog.Dependency.defer_,n.async=!1,n.type="text/javascript",(o=goog.getScriptNonce())&&n.setAttribute("nonce",o),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(e.loaded(),e.resume())}):n.onload=function(){n.onload=null,e.loaded()},n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,t.head.appendChild(n)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,r,o,n){goog.Dependency.call(this,e,t,r,o,n)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document,r=this;if(goog.isDocumentLoading_()){var o=function(e,r){e=r?'<script type="module" crossorigin>'+r+"<\/script>":'<script type="module" crossorigin src="'+e+'"><\/script>',t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)};goog.Dependency.defer_=!0}else o=function(e,r){var o=t.createElement("script");o.defer=!0,o.async=!1,o.type="module",o.setAttribute("crossorigin",!0);var n=goog.getScriptNonce();n&&o.setAttribute("nonce",n),r?o.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(r):r:o.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,t.head.appendChild(o)};var n=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(n),e.setModuleState(goog.ModuleType.ES6)}));o(void 0,'goog.Dependency.callback_("'+n+'")'),o(this.path,void 0);var i=goog.Dependency.registerCallback_((function(t){goog.Dependency.unregisterCallback_(i),e.registerEs6ModuleExports(r.path,t,goog.moduleLoaderState_.moduleName)}));o(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+i+'", m)');var s=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(s),e.clearModuleState(),e.loaded()}));o(void 0,'goog.Dependency.callback_("'+s+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,r,o,n){goog.Dependency.call(this,e,t,r,o,n),this.contents_=null,this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){o.contents_=goog.loadFileSync_(o.path),o.contents_&&(o.contents_=o.transform(o.contents_),o.contents_&&(o.contents_+="\n//# sourceURL="+o.path))}function r(){if(o.lazyFetch_&&t(),o.contents_){n&&e.setModuleState(goog.ModuleType.ES6);try{var r=o.contents_;if(o.contents_=null,goog.globalEval(r),n)var i=goog.moduleLoaderState_.moduleName}finally{n&&e.clearModuleState()}n&&goog.global.$jscomp.require.ensure([o.getPathName()],(function(){e.registerEs6ModuleExports(o.path,goog.global.$jscomp.require(o.getPathName()),i)})),e.loaded()}}var o=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var n=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var i=1<e.pending().length,s=i&&goog.DebugLoader_.IS_OLD_IE_;if(i=goog.Dependency.defer_&&(i||goog.isDocumentLoading_()),s||i)e.defer((function(){r()}));else{var a=goog.global.document;if(s=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,n&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!s){goog.Dependency.defer_=!0,e.pause();var c=a.onreadystatechange;a.onreadystatechange=function(){"interactive"==a.readyState&&(a.onreadystatechange=c,r(),e.resume()),goog.isFunction(c)&&c.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(t),r()})),o='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>";e.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(o):o)}():r()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,r,o,n,i){goog.TransformedDependency.call(this,e,t,r,o,n),this.transpiler=i},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,r,o,n){goog.TransformedDependency.call(this,e,t,r,o,n)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,r,o,n,i,s){goog.TransformedDependency.call(this,e,t,r,o,n),this.needsTranspile_=i,this.transpiler_=s},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,r,o){t=t||[],e=e.replace(/\\/g,"/");var n=goog.normalizePath_(goog.basePath+e);for(o&&"boolean"!=typeof o||(o=o?{module:goog.ModuleType.GOOG}:{}),r=this.factory_.createDependency(n,e,t,r,o,goog.transpiler_.needsTranspile(o.lang||"es3",o.module)),this.dependencies_[n]=r,r=0;r<t.length;r++)this.idToPath_[t[r]]=n;this.idToPath_[e]=n},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,r,o,n,i){return n.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,r,o,n,i,this.transpiler):i?new goog.TranspiledDependency(e,t,r,o,n,this.transpiler):n.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,r,o,n):new goog.Es6ModuleDependency(e,t,r,o,n):new goog.Dependency(e,t,r,o,n)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null;if("undefined"==typeof TrustedTypes||!TrustedTypes.createPolicy)return t;try{t=TrustedTypes.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var jspb={BinaryConstants:{},ConstBinaryMessage:function(){},BinaryMessage:function(){}};jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var r="",o=(e=e.split("%s")).length-1,n=0;n<o;n++)r+=e[n]+(n<t.length?t[n]:"%s");return r+e[o]},goog.asserts.doAssertFailure_=function(e,t,r,o){var n="Assertion failed";if(r){n+=": "+r;var i=o}else e&&(n+=": "+e,i=t);e=new goog.asserts.AssertionError(""+n,i||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,r):-1;for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,r):-1;for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)i in n&&t.call(r,n[i],i,e)},goog.array.forEachRight=function(e,t,r){var o=e.length,n=goog.isString(e)?e.split(""):e;for(--o;0<=o;--o)o in n&&t.call(r,n[o],o,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=[],i=0,s=goog.isString(e)?e.split(""):e,a=0;a<o;a++)if(a in s){var c=s[a];t.call(r,c,a,e)&&(n[i++]=c)}return n},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=Array(o),i=goog.isString(e)?e.split(""):e,s=0;s<o;s++)s in i&&(n[s]=t.call(r,i[s],s,e));return n},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,o){var n=r;return goog.array.forEach(e,(function(r,i){n=t.call(o,n,r,i,e)})),n},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,o){var n=r;return goog.array.forEachRight(e,(function(r,i){n=t.call(o,n,r,i,e)})),n},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in n&&t.call(r,n[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in n&&!t.call(r,n[i],i,e))return!1;return!0},goog.array.count=function(e,t,r){var o=0;return goog.array.forEach(e,(function(e,n,i){t.call(r,e,n,i)&&++o}),r),o},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var o=e.length,n=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in n&&t.call(r,n[i],i,e))return i;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var o=e.length,n=goog.isString(e)?e.split(""):e;for(--o;0<=o;o--)if(o in n&&t.call(r,n[o],o,e))return o;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var o;2==arguments.length||0>(o=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,o)},goog.array.remove=function(e,t){var r;return(r=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),r},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var o=0;return goog.array.forEachRight(e,(function(n,i){t.call(r,n,i,e)&&goog.array.removeAt(e,i)&&o++})),o},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),o=0;o<t;o++)r[o]=e[o];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(goog.isArrayLike(o)){var n=e.length||0,i=o.length||0;e.length=n+i;for(var s=0;s<i;s++)e[n+s]=o[s]}else e.push(o)}},goog.array.splice=function(e,t,r,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var o=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||o,o={};for(var n=0,i=0;i<e.length;){var s=e[i++],a=r(s);Object.prototype.hasOwnProperty.call(o,a)||(o[a]=!0,t[n++]=s)}t.length=n},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,o,n){for(var i,s=0,a=e.length;s<a;){var c=s+a>>1,p=r?t.call(n,e[c],c,e):t(o,e[c]);0<p?s=c+1:(a=c,i=!p)}return i?s:~s},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]={index:o,value:e[o]};var n=t||goog.array.defaultCompare;for(goog.array.sort(r,(function(e,t){return n(e.value,t.value)||e.index-t.index})),o=0;o<e.length;o++)e[o]=r[o].value},goog.array.sortByKey=function(e,t,r){var o=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return o(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var o=1;o<e.length;o++){var n=t(e[o-1],e[o]);if(0<n||0==n&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var o=e.length;r=r||goog.array.defaultCompareEquality;for(var n=0;n<o;n++)if(!r(e[n],t[n]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var o=Math.min(e.length,t.length),n=0;n<o;n++){var i=r(e[n],t[n]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var o={},n=0;n<e.length;n++){var i=e[n],s=t.call(r,i,n,e);goog.isDef(s)&&(o[s]||(o[s]=[])).push(i)}return o},goog.array.toObject=function(e,t,r){var o={};return goog.array.forEach(e,(function(n,i){o[t.call(r,n,i,e)]=n})),o},goog.array.range=function(e,t,r){var o=[],n=0,i=e;if(void 0!==t&&(n=e,i=t),0>(r=r||1)*(i-n))return[];if(0<r)for(e=n;e<i;e+=r)o.push(e);else for(e=n;e>i;e+=r)o.push(e);return o},goog.array.repeat=function(e,t){for(var r=[],o=0;o<t;o++)r[o]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var o=arguments[r];if(goog.isArray(o))for(var n=0;n<o.length;n+=8192){var i=goog.array.slice(o,n,n+8192);i=goog.array.flatten.apply(null,i);for(var s=0;s<i.length;s++)t.push(i[s])}else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,o=1;o<arguments.length;o++)arguments[o].length<r&&(r=arguments[o].length);for(o=0;o<r;o++){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i][o]);t.push(n)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var r=e.length-1;0<r;r--){var o=Math.floor(t()*(r+1)),n=e[r];e[r]=e[o],e[o]=n}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.array.concatMap=function(e,t,r){return goog.array.concat.apply([],goog.array.map(e,t,r))},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,o=0;o<e.length;o++){var n=e.charCodeAt(o);255<n&&(t[r++]=255&n,n>>=8),t[r++]=n}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var o=goog.array.slice(e,r,r+8192);t+=String.fromCharCode.apply(null,o)}return t},goog.crypt.byteArrayToHex=function(e,t){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join(t||"")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,o=0;o<e.length;o++){var n=e.charCodeAt(o);128>n?t[r++]=n:(2048>n?t[r++]=n>>6|192:(55296==(64512&n)&&o+1<e.length&&56320==(64512&e.charCodeAt(o+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++o)),t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,o=0;r<e.length;){var n=e[r++];if(128>n)t[o++]=String.fromCharCode(n);else if(191<n&&224>n){var i=e[r++];t[o++]=String.fromCharCode((31&n)<<6|63&i)}else if(239<n&&365>n){i=e[r++];var s=e[r++];n=((7&n)<<18|(63&i)<<12|(63&s)<<6|63&e[r++])-65536,t[o++]=String.fromCharCode(55296+(n>>10)),t[o++]=String.fromCharCode(56320+(1023&n))}else i=e[r++],s=e[r++],t[o++]=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],o=0;o<e.length;o++)r.push(e[o]^t[o]);return r},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var r=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var o=Math.max(e.length,t.length),n=0;0==r&&n<o;n++){var i=e[n]||"",s=t[n]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;r=0==i[1].length?0:parseInt(i[1],10);var a=0==s[1].length?0:parseInt(s[1],10);r=goog.string.internal.compareElements_(r,a)||goog.string.internal.compareElements_(0==i[2].length,0==s[2].length)||goog.string.internal.compareElements_(i[2],s[2]),i=i[3],s=s[3]}while(0==r)}return r},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\ud801\ud804-\ud839\ud83c-\udbff---",goog.i18n.bidi.rtlChars_="--\ud802-\ud803\ud83a-\ud83b--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var r=0,o=0,n=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var i=e[t];goog.i18n.bidi.startsWithRtl(i)?(r++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(i)?n=!0:goog.i18n.bidi.hasAnyLtr(i)?o++:goog.i18n.bidi.hasNumeralsRe_.test(i)&&(n=!0)}return 0==o?n?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.trustedURL_=null,this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var r=goog.html.TrustedResourceUrl.unwrap(this),o=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",o,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.unwrapTrustedURL=function(e){return e.trustedURL_?e.trustedURL_:goog.html.TrustedResourceUrl.unwrap(e)},goog.html.TrustedResourceUrl.format=function(e,t){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,o){if(!Object.prototype.hasOwnProperty.call(t,o))throw Error('Found marker, "'+o+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[o])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,r,o){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(r,o)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",r=0;r<e.length;r++)t+=goog.string.Const.unwrap(e[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.TrustedResourceUrl;return t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY&&(t.trustedURL_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(e)),t},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,r){if(null==r)return t;if(goog.isString(r))return r?e+encodeURIComponent(r):"";for(var o in r){var n=r[o];n=goog.isArray(n)?n:[n];for(var i=0;i<n.length;i++){var s=n[i];null!=s&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(o)+"="+encodeURIComponent(String(s)))}}return t},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeUrlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return goog.html.SafeUrl.unwrapTrustedURL(e).toString()},goog.html.SafeUrl.unwrapTrustedURL=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,r){return(e=e.exec(t))?(e=e[1],-1==(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.SafeUrl;return t.privateDoNotAccessOrElseSafeUrlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createURL(e):e,t},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,r="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var o=e[t];null!=o&&(r+=t+":"+(o=goog.isArray(o)?goog.array.map(o,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(o))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,r=!0,o=0;o<e.length;o++){var n=e.charAt(o);"'"==n&&r?t=!t:'"'==n&&t&&(r=!r)}return t&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,r=/^[-_a-zA-Z0-9]$/,o=0;o<e.length;o++){var n=e.charAt(o);if("]"==n){if(t)return!1;t=!0}else if("["==n){if(!t)return!1;t=!1}else if(!t&&!r.test(n))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.FUNCTIONS_RE_=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,r,o){var n="";return r=r.replace(/^(['"])(.*)\1$/,(function(e,t,r){return n=t,r})),e=goog.html.SafeUrl.sanitize(r).getTypedStringValue(),t+n+e+n+o}))},goog.html.SafeStyle.concat=function(e){var t="",r=function(e){goog.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,r),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var r=[],o=1;o<arguments.length;o++)r.push(goog.html.SafeScript.stringify_(arguments[o]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,r){for(var o in e)t.call(r,e[o],o,e)},goog.object.filter=function(e,t,r){var o,n={};for(o in e)t.call(r,e[o],o,e)&&(n[o]=e[o]);return n},goog.object.map=function(e,t,r){var o,n={};for(o in e)n[o]=t.call(r,e[o],o,e);return n},goog.object.some=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,r){for(var o in e)if(!t.call(r,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],o=0;for(t in e)r[o++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],o=0;for(t in e)r[o++]=t;return r},goog.object.getValueByKeys=function(e,t){var r=goog.isArrayLike(t),o=r?t:arguments;for(r=r?0:1;r<o.length;r++){if(null==e)return;e=e[o[r]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var o in e)if(t.call(r,e[o],o,e))return o},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(var o in t)if(!(o in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var r in t="array"==t?[]:{},e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,o,n=1;n<arguments.length;n++){for(r in o=arguments[n])e[r]=o[r];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)r=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},o=0;o<t;o+=2)r[arguments[o]]=arguments[o+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},o=0;o<t;o++)r[arguments[o]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,r){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var o={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||r);){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++)o[n[i]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(o)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var r=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},r=[],o=0;o<e.length;o++){var n=e[o];if(t[n])r.push(t[n]);else if(goog.object.contains(t,n)&&r.pop()!=n)return!1}return 0==r.length},goog.html.SafeStyleSheet.concat=function(e){var t="",r=function(e){goog.isArray(e)?goog.array.forEach(e,r):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,o=[];t=r.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,o),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var o=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,r=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(r=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,r){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,r)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error("Invalid tag name <"+e+">.");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+e+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(e,t,r,o){e&&goog.html.TrustedResourceUrl.unwrap(e);var n={};return n.src=e||null,n.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(n,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.createSandboxIframe=function(e,t,r,o){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var n={};return n.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,n.srcdoc=t||null,n.sandbox="",e=goog.html.SafeHtml.combineAttributes(n,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var r in t){var o=r.toLowerCase();if("language"==o||"src"==o||"text"==o||"type"==o)throw Error('Cannot set "'+o+'" attribute')}for(r="",e=goog.array.concat(e),o=0;o<e.length;o++)r+=goog.html.SafeScript.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var r="";e=goog.array.concat(e);for(var o=0;o<e.length;o++)r+=goog.html.SafeStyleSheet.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if("style"==t.toLowerCase())r=goog.html.SafeHtml.getStyleValue_(r);else{if(/^on/i.test(t))throw Error('Attribute "'+t+'" requires goog.string.Const value, "'+r+'" given.');if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if(!goog.isString(r))throw Error('Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.');r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert(goog.isString(r)||goog.isNumber(r),"String or number value expected, got "+typeof r+" with value: "+r),t+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,r,o){return(t=goog.html.SafeHtml.create(t,r,o)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var r=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),o=[],n=function(e){goog.isArray(e)?goog.array.forEach(e,n):(e=goog.html.SafeHtml.htmlEscape(e),o.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&r!=e&&(r=null))};return goog.array.forEach(t,n),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o.join(goog.html.SafeHtml.unwrap(e)),r)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=e,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,r){var o=null,n="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return goog.isDefAndNotNull(r)?goog.isArray(r)||(r=[r]):r=[],goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+e+"> does not allow content."),n+=">"):(o=goog.html.SafeHtml.concat(r),n+=">"+goog.html.SafeHtml.unwrap(o)+"</"+e+">",o=o.getDirection()),(e=t&&t.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,o)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var r="";if(t)for(var o in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error('Invalid attribute name "'+o+'".');var n=t[o];goog.isDefAndNotNull(n)&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,o,n))}return r},goog.html.SafeHtml.combineAttributes=function(e,t,r){var o,n={};for(o in e)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),n[o]=e[o];for(o in t)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),n[o]=t[o];for(o in r){var i=o.toLowerCase();if(i in e)throw Error('Cannot override "'+i+'" attribute, got "'+o+'" with value "'+r[o]+'"');i in t&&delete n[i],n[o]=r[o]}return n},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,r){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(e);r&&void 0!==r[t]&&(e&&(e instanceof r[t]||!(e instanceof r.Location||e instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,r=t&&(t.defaultView||t.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,r),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(r){return t?e==r:e===r}},goog.functions.compose=function(e,t){var r=arguments,o=r.length;return function(){var e;o&&(e=r[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=r[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,r=t.length;return function(){for(var e,o=0;o<r;o++)e=t[o].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,r=t.length;return function(){for(var e=0;e<r;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var r=function(){};return r.prototype=e.prototype,r=new r,e.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(t=e(),r=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,r){var o=0;return function(n){goog.global.clearTimeout(o);var i=arguments;o=goog.global.setTimeout((function(){e.apply(r,i)}),t)}},goog.functions.throttle=function(e,t,r){var o=0,n=!1,i=[],s=function(){o=0,n&&(n=!1,a())},a=function(){o=goog.global.setTimeout(s,t),e.apply(r,i)};return function(e){i=arguments,o?n=!0:a()}},goog.functions.rateLimit=function(e,t,r){var o=0,n=function(){o=0};return function(i){o||(o=goog.global.setTimeout(n,t),e.apply(r,arguments))}},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,r){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild)&&(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!t.parentElement)})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var r=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,r)}e.src=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedURL(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,r){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrapTrustedURL(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrapTrustedURL(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrapTrustedURL(t):goog.html.SafeUrl.unwrapTrustedURL(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrapTrustedURL(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrapTrustedURL(t))},goog.dom.safe.replaceLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrapTrustedURL(t))},goog.dom.safe.openInWindow=function(e,t,r,o,n){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),(t||goog.global).open(goog.html.SafeUrl.unwrapTrustedURL(e),r?goog.string.Const.unwrap(r):"",o,n)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,r){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),r)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var r=e.split("%s"),o="",n=Array.prototype.slice.call(arguments,1);n.length&&1<r.length;)o+=r.shift()+n.shift();return o+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(r),n=t.toLowerCase().match(r),i=Math.min(o.length,n.length),s=0;s<i;s++){r=o[s];var a=n[s];if(r!=a)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:r<a?-1:1}return o.length!=n.length?o.length-n.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var n=r[e];return n||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(n=String.fromCharCode(t))),n||(goog.dom.safe.setInnerHtml(o,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),n=o.firstChild.nodeValue.slice(0,-1)),r[e]=n)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,o=0;o<r;o++){var n=1==r?t:t.charAt(o);if(e.charAt(0)==n&&e.charAt(e.length-1)==n)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,o){if(r&&(e=goog.string.unescapeEntities(e)),o&&e.length>t){o>t&&(o=t);var n=e.length-o;e=e.substring(0,t-o)+"..."+e.substring(n)}else e.length>t&&(o=Math.floor(t/2),n=e.length-o,e=e.substring(0,o+t%2)+"..."+e.substring(n));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var o=e.charAt(r),n=o.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[o]||(31<n&&127>n?o:goog.string.escapeChar(o))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var r=e;else 256>t?(r="\\x",(16>t||256<t)&&(r+="0")):(r="\\u",4096>t&&(r+="0")),r+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var o=e;return 0<=t&&t<e.length&&0<r&&(o=e.substr(0,t)+e.substr(t+r,e.length-t-r)),o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,r){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=goog.isDef(r)?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t=goog.isString(t)?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var o=[];0<r&&e.length;)o.push(e.shift()),r--;return e.length&&o.push(e.join(t)),o},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var r=-1,o=0;o<t.length;o++)if(""!=t[o]){var n=e.lastIndexOf(t[o]);n>r&&(r=n)}return-1==r?e:e.slice(r+1)},goog.string.editDistance=function(e,t){var r=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var n=0;n<t.length+1;n++)r[n]=n;for(n=0;n<e.length;n++){o[0]=n+1;for(var i=0;i<t.length;i++)o[i+1]=Math.min(o[i]+1,r[i+1]+1,r[i]+Number(e[n]!=t[i]));for(i=0;i<r.length;i++)r[i]=o[i]}return o[t.length]},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,r,o){return o=o?o(t):t,Object.prototype.hasOwnProperty.call(e,o)?e[o]:e[o]=r(t)},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,r=goog.labs.userAgent.engine.getEngineTuple_(e);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):r[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&(null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e))?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(e){return goog.string.contains(goog.crypt.base64.paddingChars_,e)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),void 0===t&&(t=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),t=goog.crypt.base64.byteToCharMaps_[t];for(var r=[],o=0;o<e.length;o+=3){var n=e[o],i=o+1<e.length,s=i?e[o+1]:0,a=o+2<e.length,c=a?e[o+2]:0,p=n>>2;n=(3&n)<<4|s>>4,s=(15&s)<<2|c>>6,c&=63,a||(c=64,i||(s=64)),r.push(t[p],t[n],t[s]||"",t[c]||"")}return r.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=e.length,r=3*t/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(e[t-1])&&(r=goog.crypt.base64.isPadding_(e[t-2])?r-2:r-1);var o=new Uint8Array(r),n=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){o[n++]=e})),o.subarray(0,n)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;o<e.length;){var r=e.charAt(o++),n=goog.crypt.base64.charToByteMap_[r];if(null!=n)return n;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var o=0;;){var n=r(-1),i=r(0),s=r(64),a=r(64);if(64===a&&-1===n)break;t(n<<2|i>>4),64!=s&&(t(i<<4&240|s>>2),64!=a&&t(s<<6&192|a))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var e=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),t=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var o=e.concat(t[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=o;for(var n=0;n<o.length;n++){var i=o[n],s=goog.crypt.base64.charToByteMap_[i];void 0===s?goog.crypt.base64.charToByteMap_[i]=n:goog.asserts.assert(s===n)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(e))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(e>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|2139095040)>>>0;else if(e<jspb.BinaryConstants.FLOAT32_MIN)e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|e)>>>0;else{var r=Math.floor(Math.log(e)/Math.LN2);e*=Math.pow(2,-r),e=8388607&Math.round(e*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(t<<31|r+127<<23|e)>>>0}},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=r>>>0}else{var o=0;if(2<=(r=e))for(;2<=r&&1023>o;)o++,r/=2;else for(;1>r&&-1022<o;)r*=2,o--;e=(r=e*Math.pow(2,-o))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|o+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2),n=e.charCodeAt(3),i=e.charCodeAt(4),s=e.charCodeAt(5),a=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(o<<16)+(n<<24)>>>0,jspb.utils.split64High=i+(s<<8)+(a<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+(e>>>0)},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;return r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0)),e=jspb.utils.joinUint64(e,t),r?-e:e},jspb.utils.toZigzag64=function(e,t,r){var o=t>>31;return r(e<<1^o,(t<<1|e>>>31)^o)},jspb.utils.joinZigzag64=function(e,t){return jspb.utils.fromZigzag64(e,t,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(e,t,r){var o=-(1&e);return r((e>>>1|t<<31)^o,t>>>1^o)},jspb.utils.joinFloat32=function(e,t){t=2*(e>>31)+1;var r=e>>>23&255;return e&=8388607,255==r?e?NaN:1/0*t:0==r?t*Math.pow(2,-149)*e:t*Math.pow(2,r-150)*(e+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,o=t>>>20&2047;return e=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e,2047==o?e?NaN:1/0*r:0==o?r*Math.pow(2,-1074)*e:r*Math.pow(2,o-1075)*(e+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e,t){return e=e?String(e):"",t?"0000000".slice(e.length)+e:e}if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var o=(e>>>24|t<<8)>>>0&16777215;return e=(16777215&e)+6777216*o+6710656*(t=t>>16&65535),o+=8147497*t,t*=2,1e7<=e&&(o+=Math.floor(e/1e7),e%=1e7),1e7<=o&&(t+=Math.floor(o/1e7),o%=1e7),r(t,0)+r(o,t)+r(e,1)},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;return r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0),e=jspb.utils.joinUnsignedDecimalString(e,t),r?"-"+e:e},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(e,r):jspb.utils.joinUnsignedDecimalString(e,r)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),o=0;o<e.length;o++)r[o]=jspb.utils.hash64ToDecimalString(e[o],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++)t=e*o[r]+t,o[r]=255&t,t>>>=8}goog.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var o=[0,0,0,0,0,0,0,0],n=0;n<e.length;n++)t(10,e.charCodeAt(n)-jspb.utils.ZERO_CHAR_CODE_);return r&&(function(){for(var e=0;8>e;e++)o[e]=255&~o[e]}(),t(1,1)),goog.crypt.byteArrayToString(o)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.toHexDigit_=function(e){return String.fromCharCode(10>e?jspb.utils.ZERO_CHAR_CODE_+e:jspb.utils.A_CHAR_CODE_-10+e)},jspb.utils.fromHexCharCode_=function(e){return e>=jspb.utils.A_CHAR_CODE_?e-jspb.utils.A_CHAR_CODE_+10:e-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var o=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.toHexDigit_(o>>4),t[2*r+3]=jspb.utils.toHexDigit_(15&o)}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),goog.asserts.assert(18==e.length),goog.asserts.assert("0"==e[0]),goog.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var o=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+2)),n=jspb.utils.fromHexCharCode_(e.charCodeAt(2*r+3));t=String.fromCharCode(16*o+n)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;return t?jspb.utils.joinInt64(e,r):jspb.utils.joinUint64(e,r)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var o=0,n=t;n<r;n++)o+=e[n]>>7;return r-t-o},jspb.utils.countVarintFields=function(e,t,r,o){var n=0;if(128>(o=8*o+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==o;)for(n++;;){var i=e[t++];if(0==(128&i))break}else for(;t<r;){for(i=o;128<i;){if(e[t]!=(127&i|128))return n;t++,i>>=7}if(e[t++]!=i)break;for(n++;0!=(128&(i=e[t++])););}return n},jspb.utils.countFixedFields_=function(e,t,r,o,n){var i=0;if(128>o)for(;t<r&&e[t++]==o;)i++,t+=n;else for(;t<r;){for(var s=o;128<s;){if(e[t++]!=(127&s|128))return i;s>>=7}if(e[t++]!=s)break;i++,t+=n}return i},jspb.utils.countFixed32Fields=function(e,t,r,o){return jspb.utils.countFixedFields_(e,t,r,8*o+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,o){return jspb.utils.countFixedFields_(e,t,r,8*o+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,o){var n=0;for(o=8*o+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var i=o;128<i;){if(e[t++]!=(127&i|128))return n;i>>=7}if(e[t++]!=i)break;n++;for(var s=0,a=1;s+=(127&(i=e[t++]))*a,a*=128,0!=(128&i););t+=s}return n},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return"string"==typeof e?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(255<o)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=o}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||"undefined"!=typeof Buffer&&e.constructor===Buffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var o=jspb.BinaryDecoder.instanceCache_.pop();return e&&o.setBlock(e,t,r),o}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=void 0!==t?t:0,this.end_=void 0!==r?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(e){for(var t=128,r=0,o=0,n=0;4>n&&128<=t;n++)r|=(127&(t=this.bytes_[this.cursor_++]))<<7*n;if(128<=t&&(r|=(127&(t=this.bytes_[this.cursor_++]))<<28,o|=(127&t)>>4),128<=t)for(n=0;5>n&&128<=t;n++)o|=(127&(t=this.bytes_[this.cursor_++]))<<7*n+3;if(128>t)return e(r>>>0,o>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(e){return this.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(e){var t=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var o=0,n=0,i=r+7;i>=r;i--)o=o<<8|t[i],n=n<<8|t[i+4];return e(o,n)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e=this.bytes_,t=e[this.cursor_+0],r=127&t;return 128>t?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+1]))<<7,128>t?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+2]))<<14,128>t?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(t=e[this.cursor_+3]))<<21,128>t?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(t=e[this.cursor_+4]))<<28,128>t?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&128<=e[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],o=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|o<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],o=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|o<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var o=[],n="";r<e;){var i=t[r++];if(128>i)o.push(i);else{if(192>i)continue;if(224>i){var s=t[r++];o.push((31&i)<<6|63&s)}else if(240>i){s=t[r++];var a=t[r++];o.push((15&i)<<12|(63&s)<<6|63&a)}else if(248>i){i=(7&i)<<18|(63&(s=t[r++]))<<12|(63&(a=t[r++]))<<6|63&t[r++],i-=65536,o.push(55296+(i>>10&1023),56320+(1023&i))}}8192<=o.length&&(n+=String.fromCharCode.apply(null,o),o.length=0)}return n+=goog.crypt.byteArrayToString(o),this.cursor_=r,n},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],o=e[t+1],n=e[t+2],i=e[t+3],s=e[t+4],a=e[t+5],c=e[t+6];return e=e[t+7],this.cursor_+=8,String.fromCharCode(r,o,n,i,s,a,c,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var o=jspb.BinaryReader.instanceCache_.pop();return e&&o.decoder_.setBlock(e,t,r),o}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e=this.decoder_.readUnsignedVarint32(),t=e>>>3;return(e&=7)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type: %s (at position %s)",e,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var e=this.nextField_;;){if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=e&&(goog.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){null===this.readCallbacks_&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return goog.asserts.assert(null!==this.readCallbacks_),e=this.readCallbacks_[e],goog.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),o=this.decoder_.readUnsignedVarint32();o=this.decoder_.getCursor()+o,this.decoder_.setEnd(o),t(e,this),this.decoder_.setCursor(o),this.decoder_.setEnd(r)},jspb.BinaryReader.prototype.readGroup=function(e,t,r){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;return e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e),this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(e){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(e)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(e){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(t,r){return jspb.utils.fromZigzag64(t,r,e)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(e){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(e)},jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();t=this.decoder_.getCursor()+t;for(var r=[];this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Map=function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var o=this.map_[t[e]];(r=o.valueWrapper)&&r.toArray(),this.arr_.push([o.key,o.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),o=[],n=0;n<r.length;n++){var i=this.map_[r[n][0].toString()];this.wrapEntry_(i);var s=i.valueWrapper;s?(goog.asserts.assert(t),o.push([i.key,t(e,s)])):o.push([i.key,i.value])}return o},jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var o=0;o<e.length;o++){var n=e[o][0],i=r(e[o][1]);t.set(n,i)}return t},jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},"undefined"!=typeof Symbol&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var o=this.map_[t[r]];e.push([o.key,o.value])}return e},jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var o=this.map_[t[r]];e.push([o.key,this.wrapEntry_(o)])}return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var o=0;o<r.length;o++){var n=this.map_[r[o]];e.call(t,this.wrapEntry_(n),n.key,this)}},jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},jspb.Map.prototype.has=function(e){return e.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(e,t,r,o,n){var i=this.stringKeys_();i.sort();for(var s=0;s<i.length;s++){var a=this.map_[i[s]];t.beginSubMessage(e),r.call(t,1,a.key),this.valueCtor_?o.call(t,2,this.wrapEntry_(a),n):o.call(t,2,a.value),t.endSubMessage()}},jspb.Map.deserializeBinary=function(e,t,r,o,n,i,s){for(;t.nextField()&&!t.isEndGroup();){var a=t.getFieldNumber();1==a?i=r.call(t):2==a&&(e.valueCtor_?(goog.asserts.assert(n),s||(s=new e.valueCtor_),o.call(t,s,n)):s=o.call(t))}goog.asserts.assert(null!=i),goog.asserts.assert(null!=s),e.set(i,s)},jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(e,t,r,o,n){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=o,this.isRepeated=n},jspb.ExtensionFieldBinaryInfo=function(e,t,r,o,n,i){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=o,this.binaryMessageDeserializeFn=n,this.isPacked=i},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(e,t){return t-e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,o,n,i){if(e.wrappers_=null,t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,o),e.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(e.repeatedFields=n),n)for(t=0;t<n.length;t++)(r=n[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(i&&i.length)for(t=0;t<i.length;t++)jspb.Message.computeOneofCase(e,i[t])},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)},jspb.Message.isExtensionObject_=function(e){return!(null===e||"object"!=typeof e||jspb.Message.isArray_(e)||jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(e,t){var r=e.array.length,o=-1;if(r&&(o=r-1,r=e.array[o],jspb.Message.isExtensionObject_(r)))return e.pivot_=jspb.Message.getFieldNumber_(e,o),void(e.extensionObject_=r);-1<t?(e.pivot_=Math.max(t,jspb.Message.getFieldNumber_(e,o+1)),e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var o=[],n=0;n<e.length;n++)o[n]=t.call(e[n],r,e[n]);return o},jspb.Message.toObjectExtension=function(e,t,r,o,n){for(var i in r){var s=r[i],a=o.call(e,s);if(null!=a){for(var c in s.fieldName)if(s.fieldName.hasOwnProperty(c))break;t[c]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(a,s.toObjectFn,n):s.toObjectFn(n,a):a}}},jspb.Message.serializeBinaryExtensions=function(e,t,r,o){for(var n in r){var i=r[n],s=i.fieldInfo;if(!i.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var a=o.call(e,s);if(null!=a)if(s.isMessageType()){if(!i.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");i.binaryWriterFn.call(t,s.fieldIndex,a,i.binaryMessageSerializeFn)}else i.binaryWriterFn.call(t,s.fieldIndex,a)}},jspb.Message.readBinaryExtension=function(e,t,r,o,n){var i=r[t.getFieldNumber()];if(i){if(r=i.fieldInfo,!i.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var s=new r.ctor;i.binaryReaderFn.call(t,s,i.binaryMessageDeserializeFn)}else s=i.binaryReaderFn.call(t);r.isRepeated&&!i.isPacked?(t=o.call(e,r))?t.push(s):n.call(e,r,[s]):n.call(e,r,s)}else t.skipField()},jspb.Message.getField=function(e,t){if(t<e.pivot_){t=jspb.Message.getIndex_(e,t);var r=e.array[t];return r===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[t]=[]:r}if(e.extensionObject_)return(r=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:r},jspb.Message.getRepeatedField=function(e,t){return jspb.Message.getField(e,t)},jspb.Message.getOptionalFloatingPointField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:+e},jspb.Message.getBooleanField=function(e,t){return null==(e=jspb.Message.getField(e,t))?e:!!e},jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var o=0;o<r.length;o++)r[o]=+r[o];e.convertedPrimitiveFields_[t]=!0}return r},jspb.Message.getRepeatedBooleanField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedPrimitiveFields_||(e.convertedPrimitiveFields_={}),!e.convertedPrimitiveFields_[t]){for(var o=0;o<r.length;o++)r[o]=!!r[o];e.convertedPrimitiveFields_[t]=!0}return r},jspb.Message.bytesAsB64=function(e){return null==e||"string"==typeof e?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:"string"==typeof e?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),e.length&&"string"!=typeof e[0]?goog.array.map(e,jspb.Message.bytesAsB64):e},jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},jspb.Message.getBooleanFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getBooleanField(e,t))?r:e},jspb.Message.getFloatingPointFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getOptionalFloatingPointField(e,t))?r:e},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(e,t,r,o){if(e.wrappers_||(e.wrappers_={}),t in e.wrappers_)return e.wrappers_[t];var n=jspb.Message.getField(e,t);if(!n){if(r)return;n=[],jspb.Message.setField(e,t,n)}return e.wrappers_[t]=new jspb.Map(n,o)},jspb.Message.setField=function(e,t,r){return goog.asserts.assertInstanceof(e,jspb.Message),t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r),e},jspb.Message.setProto3IntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3FloatField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3BooleanField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},jspb.Message.setProto3StringField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},jspb.Message.setProto3BytesField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},jspb.Message.setProto3EnumField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3StringIntField=function(e,t,r){return jspb.Message.setFieldIgnoringDefault_(e,t,r,"0")},jspb.Message.setFieldIgnoringDefault_=function(e,t,r,o){return goog.asserts.assertInstanceof(e,jspb.Message),r!==o?jspb.Message.setField(e,t,r):t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(e),delete e.extensionObject_[t]),e},jspb.Message.addToRepeatedField=function(e,t,r,o){return goog.asserts.assertInstanceof(e,jspb.Message),t=jspb.Message.getRepeatedField(e,t),null!=o?t.splice(o,0,r):t.push(r),e},jspb.Message.setOneofField=function(e,t,r,o){return goog.asserts.assertInstanceof(e,jspb.Message),(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==o&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,o)},jspb.Message.computeOneofCase=function(e,t){for(var r,o,n=0;n<t.length;n++){var i=t[n],s=jspb.Message.getField(e,i);null!=s&&(r=i,o=s,jspb.Message.setField(e,i,void 0))}return r?(jspb.Message.setField(e,r,o),r):0},jspb.Message.getWrapperField=function(e,t,r,o){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var n=jspb.Message.getField(e,r);(o||n)&&(e.wrappers_[r]=new t(n))}return e.wrappers_[r]},jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var o=jspb.Message.getRepeatedField(e,r),n=[],i=0;i<o.length;i++)n[i]=new t(o[i]);e.wrappers_[r]=n}},jspb.Message.setWrapperField=function(e,t,r){goog.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var o=r?r.toArray():r;return e.wrappers_[t]=r,jspb.Message.setField(e,t,o)},jspb.Message.setOneofWrapperField=function(e,t,r,o){goog.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={});var n=o?o.toArray():o;return e.wrappers_[t]=o,jspb.Message.setOneofField(e,t,r,n)},jspb.Message.setRepeatedWrapperField=function(e,t,r){goog.asserts.assertInstanceof(e,jspb.Message),e.wrappers_||(e.wrappers_={}),r=r||[];for(var o=[],n=0;n<r.length;n++)o[n]=r[n].toArray();return e.wrappers_[t]=r,jspb.Message.setField(e,t,o)},jspb.Message.addToRepeatedWrapperField=function(e,t,r,o,n){jspb.Message.wrapRepeatedField_(e,o,t);var i=e.wrappers_[t];return i||(i=e.wrappers_[t]=[]),r=r||new o,e=jspb.Message.getRepeatedField(e,t),null!=n?(i.splice(n,0,r),e.splice(n,0,r.toArray())):(i.push(r),e.push(r.toArray())),r},jspb.Message.toMap=function(e,t,r,o){for(var n={},i=0;i<e.length;i++)n[t.call(e[i])]=r?r.call(e[i],o,e[i]):e[i];return n},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(goog.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray();t=t.toArray();var o=[],n=0,i=r.length>t.length?r.length:t.length;for(e.getJsPbMessageId()&&(o[0]=e.getJsPbMessageId(),n=1);n<i;n++)jspb.Message.compareFields(r[n],t[n])||(o[n]=t[n]);return new e.constructor(o)},jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,o={};for(r in e)o[r]=0;for(r in t)o[r]=0;for(r in o)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t))return!!("number"==typeof e&&isNaN(e)||"number"==typeof t&&isNaN(t))&&String(e)==String(t);if(e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var o=void 0,n=void 0,i=Math.max(e.length,t.length);for(r=0;r<i;r++){var s=e[r],a=t[r];if(s&&s.constructor==Object&&(goog.asserts.assert(void 0===o),goog.asserts.assert(r===e.length-1),o=s,s=void 0),a&&a.constructor==Object&&(goog.asserts.assert(void 0===n),goog.asserts.assert(r===t.length-1),n=a,a=void 0),!jspb.Message.compareFields(s,a))return!1}return!o&&!n||(o=o||{},n=n||{},jspb.Message.compareExtensions(o,n))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message),goog.asserts.assertInstanceof(t,jspb.Message),goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type."),e=jspb.Message.clone(e);for(var r=t.toArray(),o=e.toArray(),n=r.length=0;n<o.length;n++)r[n]=o[n];t.wrappers_=e.wrappers_,t.extensionObject_=e.extensionObject_},jspb.Message.clone_=function(e){if(goog.isArray(e)){for(var t=Array(e.length),r=0;r<e.length;r++){var o=e[r];null!=o&&(t[r]="object"==typeof o?jspb.Message.clone_(goog.asserts.assert(o)):o)}return t}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(r in t={},e)null!=(o=e[r])&&(t[r]="object"==typeof o?jspb.Message.clone_(goog.asserts.assert(o)):o);return t},jspb.Message.registerMessageType=function(e,t){t.messageId=e},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){var r=65535&e,o=65535&t,n=t>>>16;for(t=r*o+65536*(r*n&65535)+65536*((e>>>=16)*o&65535),r=e*n+(r*n>>>16)+(e*o>>>16);4294967296<=t;)t-=4294967296,r+=1;return new jspb.arith.UInt64(t>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var o=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),o=o.leftShift();for(;!o.zero();)0>=e.cmp(r)&&(t=t.add(o),r=r.sub(e)),e=e.rightShift(),o=o.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var r=(t=t.div(10))[0];e=t[1].lo+e,t=r}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),o=0;o<e.length;o++){if("0">e[o]||"9"<e[o])return null;var n=parseInt(e[o],10);r.lo=n,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(e){var t=this;jspb.utils.splitHash64(e),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(e,r){t.writeSplitVarint64(e>>>0,r>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(1/0===e||-1/0===e||isNaN(e)||e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert("boolean"==typeof e||"number"==typeof e),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)this.buffer_.push(o);else if(2048>o)this.buffer_.push(o>>6|192),this.buffer_.push(63&o|128);else if(65536>o)if(55296<=o&&56319>=o&&r+1<e.length){var n=e.charCodeAt(r+1);56320<=n&&57343>=n&&(o=1024*(o-55296)+n-56320+65536,this.buffer_.push(o>>18|240),this.buffer_.push(o>>12&63|128),this.buffer_.push(o>>6&63|128),this.buffer_.push(63&o|128),r++)}else this.buffer_.push(o>>12|224),this.buffer_.push(o>>6&63|128),this.buffer_.push(63&o|128)}return this.buffer_.length-t},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();for(t=this.totalLength_+this.encoder_.length()-t,goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,o=0,n=0;n<r;n++){var i=t[n];e.set(i,o),o+=i.length}return t=this.encoder_.end(),e.set(t,o),o+=t.length,goog.asserts.assert(o==e.length),this.blocks_=[e],e},jspb.BinaryWriter.prototype.getResultBase64String=function(e){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),e)},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var o=jspb.BinaryConstants.FieldType;switch(e){case o.DOUBLE:this.writeDouble(t,r);break;case o.FLOAT:this.writeFloat(t,r);break;case o.INT64:this.writeInt64(t,r);break;case o.UINT64:this.writeUint64(t,r);break;case o.INT32:this.writeInt32(t,r);break;case o.FIXED64:this.writeFixed64(t,r);break;case o.FIXED32:this.writeFixed32(t,r);break;case o.BOOL:this.writeBool(t,r);break;case o.STRING:this.writeString(t,r);break;case o.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case o.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case o.BYTES:this.writeBytes(t,r);break;case o.UINT32:this.writeUint32(t,r);break;case o.ENUM:this.writeEnum(t,r);break;case o.SFIXED32:this.writeSfixed32(t,r);break;case o.SFIXED64:this.writeSfixed64(t,r);break;case o.SINT32:this.writeSint32(t,r);break;case o.SINT64:this.writeSint64(t,r);break;case o.FHASH64:this.writeFixedHash64(t,r);break;case o.VHASH64:this.writeVarintHash64(t,r);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeInt64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint32String=function(e,t){null!=t&&(t=parseInt(t,10),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeUint64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},jspb.BinaryWriter.prototype.writeSintHash64=function(e,t){null!=t&&this.writeZigzagVarintHash64_(e,t)},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&this.writeZigzagVarint64String_(e,t)},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){null!=t&&(t=jspb.arith.UInt64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){null!=t&&(t=jspb.arith.Int64.fromString(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t.lo,t.hi))},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert("boolean"==typeof t||"number"==typeof t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeString=function(e,t){null!=t&&(e=this.beginDelimited_(e),this.encoder_.writeString(t),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeBytes=function(e,t){null!=t&&(t=jspb.utils.byteSourceToUint8Array(t),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),this.appendUint8Array_(t))},jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeMessageSet=function(e,t,r){null!=t&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e),e=this.beginDelimited_(3),r(t,this),this.endDelimited_(e),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(t,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(t,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(e,t,r){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT);var o=this.encoder_;jspb.utils.toZigzag64(t,r,(function(e,t){o.writeSplitVarint64(e>>>0,t>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(e,t,r,o){if(null!=t)for(var n=0;n<t.length;n++)this.writeSplitFixed64(e,r(t[n]),o(t[n]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(e,t,r,o){if(null!=t)for(var n=0;n<t.length;n++)this.writeSplitVarint64(e,r(t[n]),o(t[n]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(e,t,r,o){if(null!=t)for(var n=0;n<t.length;n++)this.writeSplitZigzagVarint64(e,r(t[n]),o(t[n]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarintHash64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var o=0;o<t.length;o++){var n=this.beginDelimited_(e);r(t[o],this),this.endDelimited_(n)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var o=0;o<t.length;o++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[o],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeSignedVarint64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSplitFixed64(r(t[n]),o(t[n]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var n=0;n<t.length;n++)this.encoder_.writeSplitVarint64(r(t[n]),o(t[n]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(e,t,r,o){if(null!=t){e=this.beginDelimited_(e);for(var n=this.encoder_,i=0;i<t.length;i++)jspb.utils.toZigzag64(r(t[i]),o(t[i]),(function(e,t){n.writeSplitVarint64(e>>>0,t>>>0)}));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var o=jspb.arith.Int64.fromString(t[r]);this.encoder_.writeSplitVarint64(o.lo,o.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(t[r],10));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeUnsignedVarint64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++){var o=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitVarint64(o.lo,o.hi)}this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint32(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarint64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t[r]));this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeZigzagVarintHash64(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeUint32(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeUint64(t[e])},jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++){var r=jspb.arith.UInt64.fromString(t[e]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeInt32(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64(t[e])},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeInt64String(t[e])},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length),e=0;e<t.length;e++)this.encoder_.writeFloat(t[e])},jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeDouble(t[e])},jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length),e=0;e<t.length;e++)this.encoder_.writeBool(t[e])},jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeEnum(t[r]);this.endDelimited_(e)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length)for(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length),e=0;e<t.length;e++)this.encoder_.writeFixedHash64(t[e])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){e=this.beginDelimited_(e);for(var r=0;r<t.length;r++)this.encoder_.writeVarintHash64(t[r]);this.endDelimited_(e)}},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf},function(e,t,r){const o=r(5);function n(e,t,r,o){return e===r?t-o:e-r}t.ZERO_POINT=Object.freeze({row:0,column:0}),t.compare=function(e,t){return n(e.row,e.column,t.row,t.column)},t.traverse=function(e,t){return 0===t.row?{row:e.row,column:e.column+t.column}:{row:e.row+t.row,column:t.column}},t.traversal=function(e,t){return e.row===t.row?{row:0,column:e.column-t.column}:{row:e.row-t.row,column:e.column}},t.extentForText=function(e){let t=0,r=0,o=0;for(;o<e.length;){"\n"===e[o]?(r=0,t++):r++,o++}return{row:t,column:r}},t.characterIndexForPosition=function(e,t){let r=0,i=0,s=0;for(;n(r,i,t.row,t.column)<0&&s<=e.length;)"\n"===e[s]?(r++,i=0):i++,s++;return o(n(r,i,t.row,t.column)<=0,"Target position should not exceed the extent of the given text"),s}},function(e,t){e.exports={DISCONNECTED:0,RETRACTED:1,EXTENDED:2}},function(e,t,r){const o=r(12),{CompositeDisposable:n}=r(3),i=()=>{};e.exports=class e{static deserialize(t,r){return new e(Object.assign({id:t.getId(),bufferProxyId:t.getBufferProxyId(),bufferProxyURI:t.getBufferProxyUri()},r))}constructor({id:e,bufferProxyId:t,bufferProxyURI:r,siteId:o,router:s,didDispose:a}){this.id=e,this.bufferProxyId=t,this.bufferProxyURI=r,this.subscriptions=new n,this.didDispose=a||i,a&&(this.subscriptions.add(s.onNotification("/buffers/"+e,this.receiveBufferUpdate.bind(this))),this.subscriptions.add(s.onNotification(`/editors/${e}/disposal`,this.dispose.bind(this))))}dispose(){this.subscriptions.dispose(),this.didDispose()}serialize(){const e=new o.EditorProxyMetadata;return e.setId(this.id),e.setBufferProxyId(this.bufferProxyId),e.setBufferProxyUri(this.bufferProxyURI),e}receiveBufferUpdate({body:e}){const t=o.BufferProxyUpdate.deserializeBinary(e);t.hasUriUpdate()&&(this.bufferProxyURI=t.getUriUpdate().getUri())}}},function(e,t,r){const o=r(97),{Disposable:n}=r(3),i=r(7);e.exports=class{constructor({key:e,options:t}){this.channelsByName=new Map,this.subscriptionsCount=0,this.pusherClient=function(e,t){const r=Object.assign({encrypted:!0},t),n=new o(e,r);return n.disconnect(),n}(e,t)}async subscribe(e,t,r){0===this.subscriptionsCount&&await this.connect(),e=e.replace(/\//g,".");let o=this.channelsByName.get(e);return o||(o=this.pusherClient.subscribe(e),await new Promise((e,t)=>{o.bind("pusher:subscription_succeeded",e),o.bind("pusher:subscription_error",t)}),this.channelsByName.set(e,o)),o.bind(t,r),this.subscriptionsCount++,new n(()=>{o.unbind(t,r),this.subscriptionsCount--,0===this.subscriptionsCount&&this.disconnect()})}connect(){const e=new i.PubSubConnectionError("Error establishing web socket connection to signaling server");return this.pusherClient.connect(),new Promise((t,r)=>{const o=()=>{this.pusherClient.connection.unbind("connected",o),this.pusherClient.connection.unbind("error",n),t()},n=()=>{this.pusherClient.connection.unbind("connected",o),this.pusherClient.connection.unbind("error",n),r(e)};this.pusherClient.connection.bind("connected",o),this.pusherClient.connection.bind("error",n)})}disconnect(){this.channelsByName.forEach(e=>{this.pusherClient.unsubscribe(e)}),this.channelsByName.clear(),this.pusherClient.disconnect()}}},function(e,t,r){"use strict";var o=function(){this.clear()};o.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],o.prototype.clear=function(){this._sent={},this._lines=[]},o.prototype.set=function(e,t){if(void 0!==t){e=this._strip(e),t=this._strip(t);var r=e.toLowerCase();(!this._sent.hasOwnProperty(r)||this.ALLOWED_DUPLICATES.indexOf(r)>=0)&&(this._sent[r]=!0,this._lines.push(e+": "+t+"\r\n"))}},o.prototype.toString=function(){return this._lines.join("")},o.prototype._strip=function(e){return e.toString().replace(/^ */,"").replace(/ *$/,"")},e.exports=o},function(e,t,r){"use strict";var o=r(102).HTTPParser,n=r(4).Buffer,i={request:o.REQUEST||"request",response:o.RESPONSE||"response"},s=function(e){this._type=e,this._parser=new o(i[e]),this._complete=!1,this.headers={};var t=null,r=this;this._parser.onHeaderField=function(e,r,o){t=e.toString("utf8",r,r+o).toLowerCase()},this._parser.onHeaderValue=function(e,o,n){var i=e.toString("utf8",o,o+n);r.headers.hasOwnProperty(t)?r.headers[t]+=", "+i:r.headers[t]=i},this._parser.onHeadersComplete=this._parser[o.kOnHeadersComplete]=function(e,t,o,n,i,a){var c=arguments[0];if("object"==typeof c&&(n=c.method,i=c.url,a=c.statusCode,o=c.headers),r.method="number"==typeof n?s.METHODS[n]:n,r.statusCode=a,r.url=i,o){for(var p,d,l=0,u=o.length;l<u;l+=2)p=o[l].toLowerCase(),d=o[l+1],r.headers.hasOwnProperty(p)?r.headers[p]+=", "+d:r.headers[p]=d;r._complete=!0}}};s.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var a=process.version?process.version.match(/[0-9]+/g).map((function(e){return parseInt(e,10)})):[];0===a[0]&&12===a[1]&&(s.METHODS[16]="REPORT",s.METHODS[17]="MKACTIVITY",s.METHODS[18]="CHECKOUT",s.METHODS[19]="MERGE",s.METHODS[20]="M-SEARCH",s.METHODS[21]="NOTIFY",s.METHODS[22]="SUBSCRIBE",s.METHODS[23]="UNSUBSCRIBE",s.METHODS[24]="PATCH",s.METHODS[25]="PURGE"),s.prototype.isComplete=function(){return this._complete},s.prototype.parse=function(e){var t=this._parser.execute(e,0,e.length);if("number"!=typeof t)return this.error=t,void(this._complete=!0);this._complete&&(this.body=t<e.length?e.slice(t):n.alloc(0))},e.exports=s},function(e,t,r){var o=r(1).Stream,n=r(0),i=r(20),s=r(58),a=r(21),c=function(e){e=e||{},i.validateOptions(e,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var t=e.headers;if(t)for(var r in t)this._driver.setHeader(r,t[r]);var o=e.extensions;o&&[].concat(o).forEach(this._driver.addExtension,this._driver),this._ping=e.ping,this._pingId=0,this.readyState=c.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var n=this;this._driver.on("open",(function(e){n._open()})),this._driver.on("message",(function(e){n._receiveMessage(e.data)})),this._driver.on("close",(function(e){n._beginClose(e.reason,e.code)})),this._driver.on("error",(function(e){n._emitError(e.message)})),this.on("error",(function(){})),this._driver.messages.on("drain",(function(){n.emit("drain")})),this._ping&&(this._pingTimer=setInterval((function(){n._pingId+=1,n.ping(n._pingId.toString())}),1e3*this._ping)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};n.inherits(c,o),c.CONNECTING=0,c.OPEN=1,c.CLOSING=2,c.CLOSED=3;var p={write:function(e){return this.send(e)},end:function(e){void 0!==e&&this.send(e),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(e){return!(this.readyState>c.OPEN)&&(e instanceof Buffer||(e=String(e)),this._driver.messages.write(e))},ping:function(e,t){return!(this.readyState>c.OPEN)&&this._driver.ping(e,t)},close:function(){this.readyState!==c.CLOSED&&(this.readyState=c.CLOSING),this._driver.close()},_configureStream:function(){var e=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach((function(t){this._stream.on(t,(function(){e._finalizeClose()}))}),this),this._stream.on("error",(function(t){e._emitError("Network error: "+e.url+": "+t.message),e._finalizeClose()}))},_open:function(){if(this.readyState===c.CONNECTING){this.readyState=c.OPEN,this.protocol=this._driver.protocol||"";var e=new a("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},_receiveMessage:function(e){if(this.readyState>c.OPEN)return!1;this.readable&&this.emit("data",e);var t=new a("message",{data:e});t.initEvent("message",!1,!1),this.dispatchEvent(t)},_emitError:function(e){if(!(this.readyState>=c.CLOSING)){var t=new a("error",{message:e});t.initEvent("error",!1,!1),this.dispatchEvent(t)}},_beginClose:function(e,t){this.readyState!==c.CLOSED&&(this.readyState=c.CLOSING,this._stream&&(this._stream.end(),this._stream.readable||this._finalizeClose()),this._closeParams=[e,t])},_finalizeClose:function(){if(this.readyState!==c.CLOSED){this.readyState=c.CLOSED,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var e=this._closeParams?this._closeParams[0]:"",t=this._closeParams?this._closeParams[1]:1006,r=new a("close",{code:t,reason:e});r.initEvent("close",!1,!1),this.dispatchEvent(r)}}};for(var d in p)c.prototype[d]=p[d];for(var l in s)c.prototype[l]=s[l];e.exports=c},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("https")},function(e,t,r){const o=r(75),n=r(29),i=r(7),s=r(60),a=r(44),c=r(31),p=r(46),d=r(49),l=r(30),u=r(42),g=r(40),h=r(45),f=r(51),y=r(31),m=r(52),S=r(50),b=r(19);e.exports={TeletypeClient:o,FollowState:n,Errors:i,RestGateway:s,NullEditorProxyDelegate:S,convertToProtobufCompatibleBuffer:b,NullPortalDelegate:m,PubSubSignalingProvider:y,PusherPubSubGateway:c,Portal:a,BufferProxy:p,EditorProxy:d,EditorProxyMetadata:l,PeerConnection:u,PeerPool:g,Router:h,StarOverlayNetwork:f}},function(e,t,r){var o=r(11);e.exports=function(){return o.randomBytes(16)}},function(e,t){for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var o=t||0,n=r;return[n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],"-",n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]],n[e[o++]]].join("")}},function(e,t,r){const o=r(5),{CompositeDisposable:n,Disposable:i,Emitter:s}=r(3),a=r(42),c=r(90),p=r(7);e.exports=class{constructor({peerId:e,peerIdentity:t,restGateway:r,pubSubGateway:o,fragmentSize:i,connectionTimeout:a,testEpoch:c}){this.peerId=e,this.restGateway=r,this.pubSubGateway=o,this.fragmentSize=i,this.connectionTimeout=a||5e3,this.testEpoch=c,this.emitter=new s,this.subscriptions=new n,this.peerConnectionsById=new Map,this.peerIdentitiesById=new Map([[e,t]]),this.disposed=!1,this.listenersCount=0}async initialize(){await this.fetchICEServers()}async listen(){if(!this.listenPromise){const e=new p.PubSubConnectionError("Timed out while subscribing to incoming signals");this.listenPromise=new Promise(async(t,r)=>{let o=!1;const n=window.setTimeout(()=>{this.listenPromise=null,r(e),o=!0},this.connectionTimeout),i=await this.pubSubGateway.subscribe("/peers/"+this.peerId,"signal",this.didReceiveSignal.bind(this));o?i.dispose():(window.clearTimeout(n),this.subscriptions.add(i),t(i))})}this.listenersCount++;const e=await this.listenPromise;return new i(()=>{this.listenersCount--,0===this.listenersCount&&(this.listenPromise=null,e.dispose())})}dispose(){this.disposed=!0,this.subscriptions.dispose(),this.peerIdentitiesById.clear(),this.disconnect()}async fetchICEServers(){const{body:e,ok:t}=await this.restGateway.get("/ice-servers");o(Array.isArray(e),"ICE servers must be an Array"),this.iceServers=e}getLocalPeerIdentity(){return this.peerIdentitiesById.get(this.peerId)}async connectTo(e){if(this.peerId===e)throw new p.PeerConnectionError("Sorry. You can't connect to yourself this way. Maybe try meditation or a walk in the woods instead?");const t=this.getPeerConnection(e);try{await t.connect()}catch(t){throw this.peerConnectionsById.delete(e),t}}getConnectedPromise(e){return this.getPeerConnection(e).getConnectedPromise()}getDisconnectedPromise(e){return this.peerConnectionsById.has(e)?this.peerConnectionsById.get(e).getDisconnectedPromise():Promise.resolve()}disconnect(){this.peerConnectionsById.forEach(e=>{e.disconnect()}),this.peerConnectionsById.clear()}send(e,t){const r=this.peerConnectionsById.get(e);if(!r)throw new Error("No connection to peer");r.send(t)}onDisconnection(e){return this.emitter.on("disconnection",e)}onReceive(e){return this.emitter.on("receive",e)}onError(e){return this.emitter.on("error",e)}isConnectedToPeer(e){const t=this.peerConnectionsById.get(e);return!!t&&"connected"===t.state}getPeerIdentity(e){return this.peerIdentitiesById.get(e)}didReceiveSignal(e){const{senderId:t,senderIdentity:r}=e;r&&this.peerIdentitiesById.set(t,r);this.getPeerConnection(t).signalingProvider.receiveMessage(e)}didDisconnect(e){this.peerConnectionsById.delete(e),this.emitter.emit("disconnection",{peerId:e})}didReceiveMessage(e){this.emitter.emit("receive",e)}peerConnectionDidError({peerId:e,event:t}){this.didDisconnect(e),this.emitter.emit("error",t)}getPeerConnection(e){let t=this.peerConnectionsById.get(e);return t||(t=new a({localPeerId:this.peerId,remotePeerId:e,fragmentSize:this.fragmentSize,iceServers:this.iceServers,connectionTimeout:this.connectionTimeout,didReceiveMessage:this.didReceiveMessage.bind(this),didDisconnect:this.didDisconnect.bind(this),didError:this.peerConnectionDidError.bind(this),signalingProvider:new c({localPeerId:this.peerId,remotePeerId:e,restGateway:this.restGateway,testEpoch:this.testEpoch})}),this.peerConnectionsById.set(e,t)),t}}},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i;function s(e){if(null==i&&(i=r(26)),!i.isDisposable(e))throw new TypeError("Arguments to CompositeDisposable.add must have a .dispose() method")}e.exports=function(){function e(){o(this,e),this.disposed=!1,this.disposables=new Set;var t=!0,r=!1,n=void 0;try{for(var i,s=arguments[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var a=i.value;this.add(a)}}catch(e){r=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}}var t,r,i;return t=e,(r=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposables.forEach((function(e){return e.dispose()})),this.disposables=null)}},{key:"add",value:function(){if(!this.disposed){var e=!0,t=!1,r=void 0;try{for(var o,n=arguments[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var i=o.value;s(i),this.disposables.add(i)}}catch(e){t=!0,r=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}}}},{key:"remove",value:function(e){this.disposed||this.disposables.delete(e)}},{key:"delete",value:function(e){this.remove(e)}},{key:"clear",value:function(){this.disposed||this.disposables.clear()}}])&&n(t.prototype,r),i&&n(t,i),e}()},function(e,t,r){r(79);const o=r(19),n=r(7);e.exports=class{constructor(e){const{localPeerId:t,remotePeerId:r,fragmentSize:o,iceServers:n,connectionTimeout:i,signalingProvider:s,didReceiveMessage:a,didDisconnect:c,didError:p}=e;this.localPeerId=t,this.remotePeerId=r,this.fragmentSize=o,this.iceServers=n,this.connectionTimeout=i,this.signalingProvider=s,this.didReceiveMessage=a,this.didDisconnect=c,this.didError=p,this.receivedSignals={},this.incomingSignalSequenceNumber=0,this.outgoingSignalSequenceNumber=0,this.state="initial",this.initiator=!1,this.signalingProvider.receive=this.receiveSignal.bind(this),this.rtcPeerConnection=new RTCPeerConnection({iceServers:n}),this.rtcPeerConnection.oniceconnectionstatechange=this.handleConnectionStateChange.bind(this),this.rtcPeerConnection.onicecandidate=this.handleICECandidate.bind(this),this.rtcPeerConnection.ondatachannel=this.handleDataChannel.bind(this),this.rtcPeerConnection.onerror=this.handleError.bind(this),this.connectedPromise=new Promise((e,t)=>{this.resolveConnectedPromise=e,this.rejectConnectedPromise=t}),this.disconnectedPromise=new Promise(e=>this.resolveDisconnectedPromise=e)}connect(){if("initial"===this.state){this.state="connecting",this.initiator=!0,this.rtcPeerConnection.onnegotiationneeded=this.handleNegotiationNeeded.bind(this),this.negotiationNeeded=!0;const e=this.rtcPeerConnection.createDataChannel(null,{ordered:!0});this.handleDataChannel({channel:e});const t=new n.PeerConnectionError("Connecting to peer timed out");setTimeout(()=>{"connecting"===this.state&&(this.disconnect(),this.rejectConnectedPromise(t))},this.connectionTimeout)}return this.getConnectedPromise()}getConnectedPromise(){return this.connectedPromise}getDisconnectedPromise(){return this.disconnectedPromise}disconnect(){"disconnected"!==this.state&&(this.state="disconnected",this.didDisconnect(this.remotePeerId),this.resolveDisconnectedPromise(),process.nextTick(()=>{if(this.channel)try{this.channel.send(Buffer.alloc(1,2))}catch(e){}finally{this.channel.close()}"closed"!==this.rtcPeerConnection.signalingState&&this.rtcPeerConnection.close()}))}async handleNegotiationNeeded(){if(!this.negotiationNeeded||"disconnected"===this.state)return;this.negotiationNeeded=!1;const e=await this.rtcPeerConnection.createOffer();await this.rtcPeerConnection.setLocalDescription(e);try{await this.sendSignal({offer:e,senderId:this.localPeerId})}catch(e){this.disconnect(),this.rejectConnectedPromise(e)}}async handleICECandidate({candidate:e}){try{await this.sendSignal({candidate:e})}catch(e){this.disconnect(),this.initiator?this.rejectConnectedPromise(e):this.handleError(e)}}handleDataChannel({channel:e}){this.channel=e,this.channel.binaryType="arraybuffer",this.channel.onerror=this.handleError.bind(this),this.channel.onmessage=({data:e})=>this.receive(Buffer.from(e)),this.channel.onclose=()=>this.disconnect(),"open"===this.channel.readyState?this.handleConnectionStateChange():this.channel.onopen=this.handleConnectionStateChange.bind(this)}handleConnectionStateChange(){this.isConnectionOpen()&&"connected"!==this.state?(this.state="connected",this.resolveConnectedPromise()):this.isConnectionClosed()&&"disconnected"!==this.state&&this.disconnect()}isConnectionOpen(){const{iceConnectionState:e}=this.rtcPeerConnection;return("connected"===e||"completed"===e)&&this.channel&&"open"===this.channel.readyState}isConnectionClosed(){const{iceConnectionState:e,signalingState:t}=this.rtcPeerConnection;return"closed"===e||"failed"===e||"disconnected"===e&&"stable"===t}handleError(e){this.didError({peerId:this.remotePeerId,event:e})}sendSignal(e){if("disconnected"!==this.state)return this.signalingProvider.send(e)}async receiveSignal(e){if("disconnected"!==this.state)if(e.offer){await this.rtcPeerConnection.setRemoteDescription(e.offer);const t=await this.rtcPeerConnection.createAnswer();await this.rtcPeerConnection.setLocalDescription(t);try{await this.sendSignal({answer:t})}catch(e){this.disconnect(),this.handleError(e)}}else e.answer?await this.rtcPeerConnection.setRemoteDescription(e.answer):e.candidate&&this.rtcPeerConnection.addIceCandidate(e.candidate)}send(e){if("connected"!==this.state)throw new Error("Must be connected to send");let t=0,r=(e=o(e)).length+1;r>this.fragmentSize&&(t=1,r+=4);const n=Buffer.alloc(r);let i=0;if(n.writeUInt8(t,i),i++,r>this.fragmentSize&&(n.writeUInt32BE(r,i),i+=4),e.copy(n,i),r>this.fragmentSize){let e=0;for(;e<r;)this.channel.send(n.slice(e,e+this.fragmentSize)),e+=this.fragmentSize}else{let e=0;for(;;)try{this.channel.send(n);break}catch(t){if(5==e++)throw t}}}receive(e){if("connected"===this.state)if(this.incomingMultipartEnvelope)e.copy(this.incomingMultipartEnvelope,this.incomingMultipartEnvelopeOffset),this.incomingMultipartEnvelopeOffset+=e.length,this.incomingMultipartEnvelopeOffset===this.incomingMultipartEnvelope.length&&(this.finishReceiving(this.incomingMultipartEnvelope),this.incomingMultipartEnvelope=null,this.incomingMultipartEnvelopeOffset=0);else{const t=e.readUInt8(0);if(1&t){const t=e.readUInt32BE(1);this.incomingMultipartEnvelope=Buffer.alloc(t),e.copy(this.incomingMultipartEnvelope,0),this.incomingMultipartEnvelopeOffset=e.length}else 2&t?this.disconnect():this.finishReceiving(e)}}finishReceiving(e){const t=1&e.readUInt8(0)?5:1,r=o(e.slice(t));this.didReceiveMessage({senderId:this.remotePeerId,message:r})}}},function(e,t,r){"use strict";var o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},o.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},o.getDescription=function(e){var t=o.splitSections(e);return t&&t[0]},o.getMediaSections=function(e){var t=o.splitSections(e);return t.shift(),t},o.matchPrefix=function(e,t){return o.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},o.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},o=8;o<t.length;o+=2)switch(t[o]){case"raddr":r.relatedAddress=t[o+1];break;case"rport":r.relatedPort=parseInt(t[o+1],10);break;case"tcptype":r.tcpType=t[o+1];break;case"ufrag":r.ufrag=t[o+1],r.usernameFragment=t[o+1];break;default:r[t[o]]=t[o+1]}return r},o.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},o.parseIceOptions=function(e){return e.substr(14).split(" ")},o.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},o.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},o.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},o.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},o.parseFmtp=function(e){for(var t,r={},o=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<o.length;n++)r[(t=o[n].trim().split("="))[0].trim()]=t[1];return r},o.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var o=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?o.push(t+"="+e.parameters[t]):o.push(t)})),t+="a=fmtp:"+r+" "+o.join(";")+"\r\n"}return t},o.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},o.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},o.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},o=e.indexOf(":",t);return o>-1?(r.attribute=e.substr(t+1,o-t-1),r.value=e.substr(o+1)):r.attribute=e.substr(t+1),r},o.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},o.getMid=function(e){var t=o.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},o.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},o.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:o.matchPrefix(e+t,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},o.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},o.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?o.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},o.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},o.getCryptoParameters=function(e,t){return o.matchPrefix(e+t,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(e,t){var r=o.matchPrefix(e+t,"a=ice-ufrag:")[0],n=o.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&n?{usernameFragment:r.substr(12),password:n.substr(10)}:null},o.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},o.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=o.splitLines(e)[0].split(" "),n=3;n<r.length;n++){var i=r[n],s=o.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){var a=o.parseRtpMap(s),c=o.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=c.length?o.parseFmtp(c[0]):{},a.rtcpFeedback=o.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(o.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return o.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(o.parseExtmap(e))})),t},o.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=o.writeRtpMap(e),r+=o.writeFmtp(e),r+=o.writeRtcpFb(e)}));var n=0;return t.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=o.writeExtmap(e)})),r},o.parseRtpEncodingParameters=function(e){var t,r=[],n=o.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),s=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,p=o.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));p.length>0&&p[0].length>1&&p[0][0]===c&&(t=p[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var o={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(o.rtx={ssrc:t}),r.push(o),i&&((o=JSON.parse(JSON.stringify(o))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(o))}})),0===r.length&&c&&r.push({ssrc:c});var d=o.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=d}))),r},o.parseRtcpParameters=function(e){var t={},r=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var n=o.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=n.length>0,t.compound=0===n.length;var i=o.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},o.parseMsid=function(e){var t,r=o.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var n=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},o.parseSctpDescription=function(e){var t,r=o.parseMLine(e),n=o.matchPrefix(e,"a=max-message-size:");n.length>0&&(t=parseInt(n[0].substr(19),10)),isNaN(t)&&(t=65536);var i=o.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};if(o.matchPrefix(e,"a=sctpmap:").length>0){var s=o.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},o.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(e,t,r){var n=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||o.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.writeMediaSection=function(e,t,r,n){var i=o.writeRtpDescription(e.kind,t);if(i+=o.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=o.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var s="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+s,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),i},o.getDirection=function(e,t){for(var r=o.splitLines(e),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2)}return t?o.getDirection(t):"sendrecv"},o.getKind=function(e){return o.splitLines(e)[0].split(" ")[0].substr(2)},o.isRejected=function(e){return"0"===e.split(" ",2)[1]},o.parseMLine=function(e){var t=o.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},o.parseOLine=function(e){var t=o.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},o.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=o.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},e.exports=o},function(e,t,r){r(5);const{CompositeDisposable:o}=r(3),n=r(45),i=r(46),s=r(49),a=r(30),c=r(51),p=r(12),d=r(52),l=r(29);function u(e){return 1===e}e.exports=class{constructor({id:e,hostPeerId:t,siteId:r,peerPool:i,connectionTimeout:s,tetherDisconnectWindow:a}){this.id=e,this.hostPeerId=t,this.siteId=r,this.tetherDisconnectWindow=a,this.isHost=u(this.siteId),this.siteIdsByPeerId=new Map,this.peerIdsBySiteId=new Map,this.editorProxiesById=new Map,this.bufferProxiesById=new Map,this.activeEditorProxiesBySiteId=new Map,this.activeEditorProxySubscriptions=new o,this.tethersByFollowerId=new Map,this.disposables=new o,this.disposed=!1,this.delegate=new d,this.peerPool=i,this.network=new c({id:e,isHub:this.isHost,peerPool:i,connectionTimeout:s}),this.router=new n(this.network),this.isHost?(this.bindPeerIdToSiteId(this.network.getPeerId(),this.siteId),this.nextSiteId=2,this.nextBufferId=1,this.nextEditorId=1,this.disposables.add(this.router.onRequest("/portals/"+e,this.receiveSubscription.bind(this)))):this.editorProxiesMetadataById=new Map,this.disposables.add(this.router.onNotification("/portals/"+e,this.receiveUpdate.bind(this)),this.network.onMemberLeave(this.siteDidLeave.bind(this)))}getLocalSiteId(){return this.siteId}dispose(){this.editorProxiesById.forEach(e=>{e.dispose()}),this.bufferProxiesById.forEach(e=>{e.dispose()}),this.disposables.dispose(),this.router.dispose(),this.network.dispose(),this.delegate.dispose(),this.disposed=!0}async setDelegate(e){this.delegate=e||new d,await this.delegate.updateTether(this.resolveFollowState(),this.getLocalActiveEditorProxy(),this.resolveLeaderPosition())}async initialize(){try{this.disposables.add(await this.peerPool.listen())}catch(e){throw this.dispose(),e}}async join(){try{this.networkConnectionPromise=this.network.connectTo(this.hostPeerId),await this.networkConnectionPromise}catch(e){throw this.dispose(),e}const e=await this.router.request({recipientId:this.hostPeerId,channelId:"/portals/"+this.id}),t=p.PortalSubscriptionResponse.deserializeBinary(e.body);t.getSiteIdsByPeerIdMap().forEach((e,t)=>{this.bindPeerIdToSiteId(t,e)}),this.siteId=this.siteIdsByPeerId.get(this.network.getPeerId()),t.getEditorProxiesMetadataList().forEach(e=>{this.deserializeEditorProxyMetadata(e)});const r=t.getTethersList();for(let e=0;e<r.length;e++){const t=r[e];this.tethersByFollowerId.set(t.getFollowerSiteId(),{leaderId:t.getLeaderSiteId(),state:t.getState()})}const o=t.getActiveBufferProxiesList();for(let e=0;e<o.length;e++){const t=o[e];this.deserializeBufferProxy(t)}const n=t.getActiveEditorProxiesList();for(let e=0;e<n.length;e++){const t=n[e];this.deserializeEditorProxy(t)}t.getActiveEditorProxyIdsBySiteIdMap().forEach((e,t)=>{const r=this.editorProxiesById.get(e);this.activeEditorProxiesBySiteId.set(t,r)}),this.follow(1)}createBufferProxy(e){const t=this.nextBufferId++,r=new i(Object.assign({id:t,hostPeerId:this.hostPeerId,siteId:this.siteId,router:this.router,didDispose:()=>this.bufferProxiesById.delete(t)},e));return this.bufferProxiesById.set(t,r),r}async findOrFetchBufferProxy(e){if(null==e)return;let t=this.bufferProxiesById.get(e);return t||this.isHost||(t=await this.fetchBufferProxy(e)),t}async fetchBufferProxy(e){const t=await this.router.request({recipientId:this.hostPeerId,channelId:"/buffers/"+e});if(t.ok){const e=p.BufferProxy.deserializeBinary(t.body);return this.deserializeBufferProxy(e)}}deserializeBufferProxy(e){const t=i.deserialize(e,{router:this.router,hostPeerId:this.hostPeerId,siteId:this.siteId,didDispose:()=>this.bufferProxiesById.delete(t.id)});return this.bufferProxiesById.set(t.id,t),t}createEditorProxy(e){const t=this.nextEditorId++,r=new s(Object.assign({id:t,siteId:this.siteId,router:this.router,tetherDisconnectWindow:this.tetherDisconnectWindow,didDispose:()=>this.editorProxiesById.delete(t),portal:this},e));return this.editorProxiesById.set(t,r),this.broadcastEditorProxyCreation(r),r}async findOrFetchEditorProxy(e){let t=this.editorProxiesById.get(e);return t||this.isHost||(t=await this.fetchEditorProxy(e)),t}async fetchEditorProxy(e){if(null==e)return;const t=await this.router.request({recipientId:this.hostPeerId,channelId:"/editors/"+e});if(!t.ok)return;const r=p.EditorProxy.deserializeBinary(t.body);if(await this.findOrFetchBufferProxy(r.getBufferProxyId())){const e=this.deserializeEditorProxy(r);return e.hideSelections(),e}}deserializeEditorProxy(e){const t=s.deserialize(e,{router:this.router,siteId:this.siteId,bufferProxiesById:this.bufferProxiesById,didDispose:()=>{this.delegate.didChangeEditorProxies(),this.editorProxiesById.delete(t.id)},portal:this});this.editorProxiesById.set(t.id,t);const r=this.editorProxiesMetadataById.get(t.id);return r&&r.dispose(),t}deserializeEditorProxyMetadata(e){const t=a.deserialize(e,{siteId:this.siteId,router:this.router,didDispose:()=>{this.editorProxiesById.has(t.id)||this.delegate.didChangeEditorProxies(),this.editorProxiesMetadataById.delete(t.id)}});return this.editorProxiesMetadataById.set(t.id,t),t}activateEditorProxy(e){const t=this.getLocalActiveEditorProxy();e!=t&&(this.unfollow(),t&&t.hideSelections(),e&&e.showSelections(),this.activeEditorProxiesBySiteId.set(this.siteId,e),this.subscribeToEditorProxyChanges(e),this.broadcastEditorProxySwitch(e),this.updateActivePositions())}getLocalActiveEditorProxy(){return this.activeEditorProxyForSiteId(this.siteId)}activeEditorProxyForSiteId(e){const t=this.resolveLeaderSiteId(e);return this.resolveFollowState(e)===l.RETRACTED?this.activeEditorProxiesBySiteId.get(t):this.activeEditorProxiesBySiteId.get(e)}getEditorProxiesMetadata(){const e=[];return this.editorProxiesMetadataById.forEach(t=>{e.push(t)}),this.editorProxiesById.forEach(t=>{e.push(t.getMetadata())}),e}getEditorProxyMetadata(e){const t=this.editorProxiesById.get(e);return t?t.getMetadata():this.editorProxiesMetadataById.get(e)}getActiveSiteIds(){const e=this.network.getMemberIds(),t=[];for(let r=0;r<e.length;r++){const o=e[r],n=this.siteIdsByPeerId.get(o);null!=n&&t.push(n)}return t}getSiteIdentity(e){const t=this.peerIdsBySiteId.get(e);return this.network.getMemberIdentity(t)}siteDidLeave({peerId:e,connectionLost:t}){const r=this.siteIdsByPeerId.get(e);this.editorProxiesById.forEach(e=>{u(r)?e.hostDidDisconnect():e.siteDidDisconnect(r)}),u(r)?(t?this.delegate.hostDidLoseConnection():this.delegate.hostDidClosePortal(),this.dispose()):this.delegate.siteDidLeave(r);const o=this.tethersByFollowerId.get(this.siteId);o&&r===o.leaderId&&this.unfollow(),this.tethersByFollowerId.delete(r),this.activeEditorProxiesBySiteId.delete(r),this.updateActivePositions()}receiveSubscription({senderId:e,requestId:t}){this.assignNewSiteId(e),this.sendSubscriptionResponse(t),this.delegate.siteDidJoin(this.siteIdsByPeerId.get(e)),this.updateActivePositions()}assignNewSiteId(e){const t=this.nextSiteId++;this.bindPeerIdToSiteId(e,t);const r=new p.PortalUpdate.SiteAssignment;r.setPeerId(e),r.setSiteId(t);const o=new p.PortalUpdate;o.setSiteAssignment(r),this.router.notify({channelId:"/portals/"+this.id,body:o.serializeBinary()})}sendSubscriptionResponse(e){const t=new p.PortalSubscriptionResponse;this.siteIdsByPeerId.forEach((e,r)=>{t.getSiteIdsByPeerIdMap().set(r,e)});const r=[];this.editorProxiesById.forEach(e=>{r.push(e.getMetadata().serialize())}),t.setEditorProxiesMetadataList(r);const o=new Map,n=new Map;this.activeEditorProxiesBySiteId.forEach((e,r)=>{if(e){const{bufferProxy:i}=e;o.has(i.id)||o.set(i.id,i.serialize()),n.has(e.id)||n.set(e.id,e.serialize()),t.getActiveEditorProxyIdsBySiteIdMap().set(r,e.id)}}),t.setActiveBufferProxiesList(Array.from(o.values())),t.setActiveEditorProxiesList(Array.from(n.values()));const i=[];this.tethersByFollowerId.forEach((e,t)=>{const r=new p.Tether;r.setFollowerSiteId(t),r.setLeaderSiteId(e.leaderId),r.setState(e.state),i.push(r)}),t.setTethersList(i),this.router.respond({requestId:e,body:t.serializeBinary()})}async receiveUpdate({senderId:e,body:t}){const r=p.PortalUpdate.deserializeBinary(t);if(r.hasEditorProxyCreation())this.receiveEditorProxyCreation(r.getEditorProxyCreation());else if(r.hasEditorProxySwitch()){const t=this.siteIdsByPeerId.get(e);await this.receiveEditorProxySwitch(t,r.getEditorProxySwitch())}else if(r.hasSiteAssignment())this.receiveSiteAssignment(r.getSiteAssignment());else{if(!r.hasTetherUpdate())throw new Error("Received unknown update message");this.receiveTetherUpdate(r.getTetherUpdate())}}receiveEditorProxyCreation(e){this.deserializeEditorProxyMetadata(e.getEditorProxyMetadata()),this.delegate.didChangeEditorProxies()}async receiveEditorProxySwitch(e,t){const r=t.getEditorProxyId(),o=await this.findOrFetchEditorProxy(r);this.activeEditorProxiesBySiteId.set(e,o),e===this.resolveLeaderSiteId()&&this.leaderDidUpdate(),this.updateActivePositions()}receiveSiteAssignment(e){const t=e.getSiteId(),r=e.getPeerId();this.bindPeerIdToSiteId(r,t),this.network.getPeerId()!==r&&this.delegate.siteDidJoin(t)}receiveTetherUpdate(e){const t=this.resolveLeaderSiteId(),r=this.resolveFollowState(),o=e.getFollowerSiteId(),n=e.getLeaderSiteId(),i=e.getState();this.tethersByFollowerId.set(o,{leaderId:n,state:i});const s=this.resolveLeaderSiteId(),a=this.resolveFollowState();this.didChangeTetherState({oldResolvedState:r,oldResolvedLeaderId:t,newResolvedState:a,newResolvedLeaderId:s})}bindPeerIdToSiteId(e,t){this.siteIdsByPeerId.set(e,t),this.peerIdsBySiteId.set(t,e)}subscribeToEditorProxyChanges(e){this.activeEditorProxySubscriptions.dispose(),this.activeEditorProxySubscriptions=new o,e&&(this.activeEditorProxySubscriptions.add(e.onDidScroll(this.activeEditorDidScroll.bind(this))),this.activeEditorProxySubscriptions.add(e.onDidUpdateLocalSelections(this.activeEditorDidUpdateLocalSelections.bind(this))),this.activeEditorProxySubscriptions.add(e.onDidUpdateRemoteSelections(this.activeEditorDidUpdateRemoteSelections.bind(this))),this.activeEditorProxySubscriptions.add(e.bufferProxy.onDidUpdateText(this.activeEditorDidUpdateText.bind(this))))}activeEditorDidUpdateLocalSelections({initialUpdate:e}){if(this.lastLocalUpdateAt=Date.now(),!e&&this.resolveFollowState()===l.RETRACTED){const e=this.getLocalActiveEditorProxy().cursorPositionForSiteId(this.siteId),o=this.resolveLeaderPosition();e&&o&&(r=o,(t=e).row!==r.row||t.column!==r.column)&&this.extendTether()}var t,r;this.updateActivePositions()}activeEditorDidUpdateRemoteSelections({selectionLayerIdsBySiteId:e,initialUpdate:t}){const r=e.has(this.resolveLeaderSiteId());!t&&r&&this.leaderDidUpdate(),this.updateActivePositions()}activeEditorDidUpdateText({remote:e}){this.resolveFollowState()===l.RETRACTED&&(e?this.delegate.updateTether(l.RETRACTED,this.getLocalActiveEditorProxy(),this.resolveLeaderPosition()):(this.lastLocalUpdateAt=Date.now(),this.extendTether())),this.updateActivePositions()}activeEditorDidScroll(){const e=this.resolveLeaderPosition();e&&this.getLocalActiveEditorProxy().isScrollNeededToViewPosition(e)&&this.unfollow()}follow(e){this.setFollowState(l.RETRACTED,e)}unfollow(){this.setFollowState(l.DISCONNECTED)}extendTether(){this.setFollowState(l.EXTENDED)}retractTether(){this.setFollowState(l.RETRACTED)}getFollowedSiteId(){return this.resolveFollowState()===l.DISCONNECTED?null:this.tethersByFollowerId.get(this.siteId).leaderId}leaderDidUpdate(){switch(this.resolveFollowState()){case l.RETRACTED:const e=this.getLocalActiveEditorProxy();this.subscribeToEditorProxyChanges(e),this.delegate.updateTether(l.RETRACTED,e,this.resolveLeaderPosition());break;case l.EXTENDED:this.retractOrDisconnectTether()}}retractOrDisconnectTether(){const e=this.resolveLeaderPosition(),t=this.resolveLeaderSiteId(),r=this.getLocalActiveEditorProxy(),o=r!==this.activeEditorProxyForSiteId(t)||e&&r.isScrollNeededToViewPosition(e),n=Date.now()-this.lastLocalUpdateAt<=this.tetherDisconnectWindow;o&&(n?this.unfollow():this.retractTether())}setFollowState(e,t){const r=this.tethersByFollowerId.get(this.siteId),o=r?r.state:null,n=this.resolveFollowState(),i=this.resolveLeaderSiteId(),s=r?r.leaderId:null;if(null==(t=null==t?s:t))return;this.tethersByFollowerId.set(this.siteId,{leaderId:t,state:e});const a=this.resolveFollowState(),c=this.resolveLeaderSiteId();if(this.didChangeTetherState({oldResolvedState:n,oldResolvedLeaderId:i,newResolvedState:a,newResolvedLeaderId:c}),o!==e||s!==t){const r=new p.Tether;r.setFollowerSiteId(this.siteId),r.setLeaderSiteId(t),r.setState(e);const o=new p.PortalUpdate;o.setTetherUpdate(r),this.router.notify({channelId:"/portals/"+this.id,body:o.serializeBinary()})}}didChangeTetherState({oldResolvedState:e,oldResolvedLeaderId:t,newResolvedState:r,newResolvedLeaderId:o}){const n=this.activeEditorProxiesBySiteId.get(t),i=this.activeEditorProxiesBySiteId.get(o);r===l.RETRACTED?(this.editorProxiesById.forEach(e=>{e.hideSelections()}),this.subscribeToEditorProxyChanges(i)):e===l.RETRACTED&&(this.activeEditorProxiesBySiteId.set(this.siteId,n),this.broadcastEditorProxySwitch(n),n&&n.showSelections()),this.delegate.updateTether(r,this.getLocalActiveEditorProxy(),this.resolveLeaderPosition()),this.updateActivePositions()}updateActivePositions(){const e={},t=this.getActiveSiteIds();for(let r=0;r<t.length;r++){const o=t[r],n=this.activeEditorProxyForSiteId(o);if(n){let t;const r=this.resolveFollowState(o);if(r===l.RETRACTED){const e=this.resolveLeaderSiteId(o);t=n.cursorPositionForSiteId(e)}else t=n.cursorPositionForSiteId(o);e[o]={editorProxy:n,position:t,followState:r}}else e[o]={editorProxy:null,position:null,followState:null}}this.delegate.updateActivePositions(e)}broadcastEditorProxyCreation(e){const t=new p.PortalUpdate.EditorProxyCreation;t.setEditorProxyMetadata(e.getMetadata().serialize());const r=new p.PortalUpdate;r.setEditorProxyCreation(t),this.router.notify({channelId:"/portals/"+this.id,body:r.serializeBinary()})}broadcastEditorProxySwitch(e){const t=new p.PortalUpdate.EditorProxySwitch;e&&t.setEditorProxyId(e.id);const r=new p.PortalUpdate;r.setEditorProxySwitch(t),this.router.notify({channelId:"/portals/"+this.id,body:r.serializeBinary()})}resolveLeaderPosition(e=this.siteId){const t=this.resolveLeaderSiteId(e),r=this.getLocalActiveEditorProxy();return r?r.cursorPositionForSiteId(t):null}resolveFollowState(e=this.siteId){return e===this.resolveLeaderSiteId(e)?l.DISCONNECTED:this.tethersByFollowerId.get(e).state}resolveLeaderSiteId(e=this.siteId){const t=this.tethersByFollowerId.get(e);if(!t)return e;const r=new Set([e]);let o=t.leaderId,n=this.tethersByFollowerId.get(o);for(;n&&n.state===l.RETRACTED;){if(r.has(o)){o=Math.min(...Array.from(r));break}r.add(o),o=n.leaderId,n=this.tethersByFollowerId.get(o)}return o}}},function(e,t,r){const{CompositeDisposable:o,Emitter:n}=r(3),{RouterMessage:i}=r(12),s=r(19);e.exports=class{constructor(e){this.network=e,this.emitter=new n,this.subscriptions=new o,this.subscriptions.add(e.onReceive(this.receive.bind(this))),this.nextRequestId=0,this.requestPromiseResolveCallbacks=new Map,this.peerIdsByRequestId=new Map,this.lastReceivePromise=Promise.resolve()}dispose(){this.subscriptions.dispose()}notify({recipientId:e,channelId:t,body:r}){r=s(r);const o=new i.Notification;o.setChannelId(t),null!=r&&o.setBody(r);const n=new i;n.setNotification(o),e?this.network.unicast(e,n.serializeBinary()):this.network.broadcast(n.serializeBinary())}request({recipientId:e,channelId:t,body:r}){r&&(r=s(r));const o=this.nextRequestId++,n=new i.Request;n.setChannelId(t),n.setRequestId(o),r&&n.setBody(r);const a=new i;return a.setRequest(n),this.network.unicast(e,a.serializeBinary()),new Promise(e=>{this.requestPromiseResolveCallbacks.set(o,e)})}respond({requestId:e,ok:t,body:r}){const o=this.peerIdsByRequestId.get(e);if(!o)throw new Error("Multiple responses to the same request are not allowed");null==t&&(t=!0),r&&(r=s(r));const n=new i.Response;n.setRequestId(e),n.setOk(t),n.setBody(r);const a=new i;a.setResponse(n),this.peerIdsByRequestId.delete(e),this.network.unicast(o,a.serializeBinary())}onNotification(e,t){return this.emitter.on("notification:"+e,t)}onRequest(e,t){return this.emitter.on("request:"+e,t)}receive({senderId:e,message:t}){const r=i.deserializeBinary(t);if(r.hasNotification())this.receiveNotification(e,r.getNotification());else if(r.hasRequest())this.receiveRequest(e,r.getRequest());else{if(!r.hasResponse())throw new Error("Unsupported router message variant");this.receiveResponse(r.getResponse())}}receiveNotification(e,t){this.lastReceivePromise=this.lastReceivePromise.then(async()=>{const r=t.getChannelId(),o=s(t.getBody());await this.emitter.emitAsync("notification:"+r,{senderId:e,body:o})})}receiveRequest(e,t){this.lastReceivePromise=this.lastReceivePromise.then(async()=>{const r=t.getChannelId(),o=t.getRequestId(),n="request:"+r,i=s(t.getBody());this.peerIdsByRequestId.set(o,e),0===this.emitter.listenerCountForEventName(n)?this.respond({requestId:o,ok:!1}):await this.emitter.emitAsync(n,{senderId:e,requestId:o,body:i})})}receiveResponse(e){const t=e.getRequestId();this.requestPromiseResolveCallbacks.get(t)({body:s(e.getBody()),ok:e.getOk()})}}},function(e,t,r){const o=r(5),{CompositeDisposable:n,Emitter:i}=r(3),{Document:s,serializeOperation:a,deserializeOperation:c}=r(47),p=r(12);function d(){}e.exports=class e{static deserialize(t,r){const o=t.getId(),n=t.getUri(),i=t.getOperationsList().map(c);return new e(Object.assign({id:o,uri:n,operations:i},r))}constructor({id:e,uri:t,text:r,history:o,operations:a,router:c,hostPeerId:p,siteId:l,didDispose:u}){this.id=e,this.hostPeerId=p,this.siteId=l,this.isHost=1===this.siteId,this.uri=t,this.router=c,this.emitDidDispose=u||d,this.document=new s({siteId:l,text:r,history:o}),this.nextMarkerLayerId=1,this.emitter=new i,this.subscriptions=new n,this.subscriptions.add(this.router.onNotification("/buffers/"+e,this.receiveUpdate.bind(this))),this.isHost?this.subscriptions.add(this.router.onRequest("/buffers/"+e,this.receiveFetch.bind(this)),this.router.onNotification(`/buffers/${e}/save`,this.receiveSave.bind(this))):this.subscriptions.add(this.router.onNotification(`/buffers/${e}/disposal`,this.dispose.bind(this))),a&&this.integrateOperations(a)}dispose(){this.subscriptions.dispose(),this.delegate&&this.delegate.dispose(),this.isHost&&this.router.notify({channelId:`/buffers/${this.id}/disposal`}),this.emitDidDispose()}serialize(){const e=new p.BufferProxy;return e.setId(this.id),e.setUri(this.uri),e.setOperationsList(this.document.getOperations().map(a)),e}setDelegate(e){this.delegate=e,1!==this.siteId&&this.delegate&&this.delegate.setText(this.document.getText())}getNextMarkerLayerId(){return this.nextMarkerLayerId++}setTextInRange(e,t,r){const o=this.document.setTextInRange(e,t,r);this.broadcastOperations(o),this.emitter.emit("did-update-text",{remote:!1})}setURI(e){o(this.isHost,"Only hosts can change the URI"),this.uri=e,this.broadcastURIChange(e)}getMarkers(){return this.document.getMarkers()}updateMarkers(e,t=!0){const r=this.document.updateMarkers(e);return t&&this.broadcastOperations(r),r}onDidUpdateMarkers(e){return this.emitter.on("did-update-markers",e)}onDidUpdateText(e){return this.emitter.on("did-update-text",e)}undo(){const e=this.document.undo();if(e){const{operations:t,textUpdates:r,markers:o}=e;return this.broadcastOperations(t),r.length>0&&this.emitter.emit("did-update-text",{remote:!1}),{textUpdates:r,markers:o}}return null}redo(){const e=this.document.redo();if(e){const{operations:t,textUpdates:r,markers:o}=e;return this.broadcastOperations(t),r.length>0&&this.emitter.emit("did-update-text",{remote:!1}),{textUpdates:r,markers:o}}return null}createCheckpoint(e){return this.document.createCheckpoint(e)}getChangesSinceCheckpoint(e){return this.document.getChangesSinceCheckpoint(e)}groupChangesSinceCheckpoint(e,t){return this.document.groupChangesSinceCheckpoint(e,t)}groupLastChanges(){return this.document.groupLastChanges()}revertToCheckpoint(e,t){const r=this.document.revertToCheckpoint(e,t);if(r){const{operations:e,textUpdates:t,markers:o}=r;return this.broadcastOperations(e),t.length>0&&this.emitter.emit("did-update-text",{remote:!1}),{textUpdates:t,markers:o}}return!1}applyGroupingInterval(e){this.document.applyGroupingInterval(e)}getHistory(e){return this.document.getHistory(e)}requestSave(){o(!this.isHost,"Only guests can request a save"),this.router.notify({recipientId:this.hostPeerId,channelId:`/buffers/${this.id}/save`})}receiveFetch({requestId:e}){this.router.respond({requestId:e,body:this.serialize().serializeBinary()})}receiveUpdate({body:e}){const t=p.BufferProxyUpdate.deserializeBinary(e);if(t.hasOperationsUpdate())this.receiveOperationsUpdate(t.getOperationsUpdate());else{if(!t.hasUriUpdate())throw new Error("Received unknown update message");this.receiveURIUpdate(t.getUriUpdate())}}receiveOperationsUpdate(e){const t=e.getOperationsList().map(c);this.integrateOperations(t)}receiveURIUpdate(e){this.uri=e.getUri(),this.delegate.didChangeURI(this.uri)}receiveSave(){this.delegate.save()}broadcastOperations(e){const t=new p.BufferProxyUpdate.OperationsUpdate;t.setOperationsList(e.map(a));const r=new p.BufferProxyUpdate;r.setOperationsUpdate(t),this.broadcastUpdate(r)}integrateOperations(e){const{textUpdates:t,markerUpdates:r}=this.document.integrateOperations(e);this.delegate&&this.delegate.updateText(t),this.emitter.emit("did-update-markers",r),t.length>0&&this.emitter.emit("did-update-text",{remote:!0})}broadcastURIChange(e){const t=new p.BufferProxyUpdate.URIUpdate;t.setUri(e);const r=new p.BufferProxyUpdate;r.setUriUpdate(t),this.broadcastUpdate(r)}broadcastUpdate(e){this.router.notify({channelId:"/buffers/"+this.id,body:e.serializeBinary()})}}},function(e,t,r){const o=r(92),{serializeOperation:n,deserializeOperation:i,serializeRemotePosition:s,deserializeRemotePosition:a}=r(95);e.exports={Document:o,serializeOperation:n,deserializeOperation:i,serializeRemotePosition:s,deserializeRemotePosition:a}},function(e,t){e.exports=class{splayNode(e){if(e)for(;;)if(this.isNodeLeftChild(this.getParent(e))&&this.isNodeRightChild(e))this.rotateNodeLeft(e),this.rotateNodeRight(e);else if(this.isNodeRightChild(this.getParent(e))&&this.isNodeLeftChild(e))this.rotateNodeRight(e),this.rotateNodeLeft(e);else if(this.isNodeLeftChild(this.getParent(e))&&this.isNodeLeftChild(e))this.rotateNodeRight(this.getParent(e)),this.rotateNodeRight(e);else{if(!this.isNodeRightChild(this.getParent(e))||!this.isNodeRightChild(e))return void(this.isNodeLeftChild(e)?this.rotateNodeRight(e):this.isNodeRightChild(e)&&this.rotateNodeLeft(e));this.rotateNodeLeft(this.getParent(e)),this.rotateNodeLeft(e)}}rotateNodeLeft(e){const t=this.getParent(e);this.getParent(t)?t===this.getLeft(this.getParent(t))?this.setLeft(this.getParent(t),e):this.setRight(this.getParent(t),e):this.root=e,this.setParent(e,this.getParent(t)),this.setRight(t,this.getLeft(e)),this.getRight(t)&&this.setParent(this.getRight(t),t),this.setLeft(e,t),this.setParent(this.getLeft(e),e),this.updateSubtreeExtent(t),this.updateSubtreeExtent(e)}rotateNodeRight(e){const t=this.getParent(e);this.getParent(t)?t===this.getLeft(this.getParent(t))?this.setLeft(this.getParent(t),e):this.setRight(this.getParent(t),e):this.root=e,this.setParent(e,this.getParent(t)),this.setLeft(t,this.getRight(e)),this.getLeft(t)&&this.setParent(this.getLeft(t),t),this.setRight(e,t),this.setParent(this.getRight(e),e),this.updateSubtreeExtent(t),this.updateSubtreeExtent(e)}isNodeLeftChild(e){return null!=e&&null!=this.getParent(e)&&this.getLeft(this.getParent(e))===e}isNodeRightChild(e){return null!=e&&null!=this.getParent(e)&&this.getRight(this.getParent(e))===e}getSuccessor(e){if(this.getRight(e))for(e=this.getRight(e);this.getLeft(e);)e=this.getLeft(e);else{for(;this.getParent(e)&&this.getRight(this.getParent(e))===e;)e=this.getParent(e);e=this.getParent(e)}return e}}},function(e,t,r){const{CompositeDisposable:o,Emitter:n}=r(3),{serializeRemotePosition:i,deserializeRemotePosition:s}=r(47),a=r(12),c=(r(29),r(50)),p=r(30);function d(){}e.exports=class e{static deserialize(t,r){const o=t.getId(),n=t.getBufferProxyId(),i=r.bufferProxiesById.get(n),s=new Map;return t.getSelectionLayerIdsBySiteIdMap().forEach((e,t)=>{s.set(t,e)}),new e(Object.assign({id:o,bufferProxy:i,selectionLayerIdsBySiteId:s},r))}constructor({id:e,bufferProxy:t,selectionLayerIdsBySiteId:r,selections:i,router:s,siteId:a,didDispose:p,portal:l}){this.id=e,this.siteId=a,this.isHost=1===this.siteId,this.bufferProxy=t,this.router=s,this.emitDidDispose=p||d,this.selectionLayerIdsBySiteId=r||new Map,this.localHiddenSelectionsLayerId=t.getNextMarkerLayerId(),this.delegate=new c,this.emitter=new n,this.selectionsVisible=!0,this.portal=l,this.createLocalSelectionsLayer(i),this.subscriptions=new o,this.subscriptions.add(this.bufferProxy.onDidUpdateMarkers(this.bufferProxyDidUpdateMarkers.bind(this))),this.subscriptions.add(this.router.onNotification(`/editors/${e}/updates`,this.receiveUpdate.bind(this))),this.isHost?this.subscriptions.add(this.router.onRequest("/editors/"+e,this.receiveFetch.bind(this))):this.subscriptions.add(this.router.onNotification(`/editors/${e}/disposal`,this.dispose.bind(this)))}dispose(){this.subscriptions.dispose(),this.delegate.dispose(),this.isHost&&this.router.notify({channelId:`/editors/${this.id}/disposal`}),this.emitDidDispose()}serialize(){const e=new a.EditorProxy;e.setId(this.id),e.setBufferProxyId(this.bufferProxy.id);const t=e.getSelectionLayerIdsBySiteIdMap();return this.selectionLayerIdsBySiteId.forEach((e,r)=>{t.set(r,e)}),e}getMetadata(){return new p({id:this.id,bufferProxyId:this.bufferProxy.id,bufferProxyURI:this.bufferProxy.uri})}setDelegate(e){this.delegate=e||new c,this.bufferProxyDidUpdateMarkers(this.bufferProxy.getMarkers(),{initialUpdate:!0})}createLocalSelectionsLayer(e){const t=this.bufferProxy.getNextMarkerLayerId();this.selectionLayerIdsBySiteId.set(this.siteId,t);const r=new a.EditorProxyUpdate.SelectionsUpdate;r.getSelectionLayerIdsBySiteIdMap().set(this.siteId,t);const o=new a.EditorProxyUpdate;o.setSelectionsUpdate(r),this.router.notify({channelId:`/editors/${this.id}/updates`,body:o.serializeBinary()}),e&&this.updateSelections(e,{initialUpdate:!0})}updateSelections(e={},t={}){if(this.bufferProxy.updateMarkers({[this.localHiddenSelectionsLayerId]:e},!1),this.selectionsVisible){const t=this.selectionLayerIdsBySiteId.get(this.siteId);this.bufferProxy.updateMarkers({[t]:e})}this.emitter.emit("did-update-local-selections",t)}bufferProxyDidUpdateMarkers(e,t={}){const r=new Map;for(let t in e)if(t=parseInt(t),t!==this.siteId){const o=e[t];for(let e in o)if(e=parseInt(e),this.selectionLayerIdsBySiteId.get(t)===e){const n=o[e];this.delegate.updateSelectionsForSiteId(t,n),r.set(t,e)}}this.emitter.emit("did-update-remote-selections",{selectionLayerIdsBySiteId:r,initialUpdate:t.initialUpdate})}didScroll(e){this.emitter.emit("did-scroll")}onDidScroll(e){return this.emitter.on("did-scroll",e)}onDidUpdateLocalSelections(e){return this.emitter.on("did-update-local-selections",e)}onDidUpdateRemoteSelections(e){return this.emitter.on("did-update-remote-selections",e)}cursorPositionForSiteId(e){let t;if(e===this.siteId)t=this.getLocalHiddenSelections();else if(this.selectionLayerIdsBySiteId.has(e)){const r=this.bufferProxy.getMarkers()[e],o=this.selectionLayerIdsBySiteId.get(e);t=r?r[o]:{}}else t={};const r=Object.keys(t).map(e=>parseInt(e));if(r.length>0){const e=t[Math.max(...r)];return e.reversed?e.range.start:e.range.end}}isScrollNeededToViewPosition(e){return this.delegate.isScrollNeededToViewPosition(e)}hideSelections(){const e=this.selectionLayerIdsBySiteId.get(this.siteId);if(this.selectionsVisible&&e){const t={};for(const e in this.getLocalHiddenSelections())t[e]=null;this.bufferProxy.updateMarkers({[e]:t})}this.selectionsVisible=!1}showSelections(){const e=this.selectionLayerIdsBySiteId.get(this.siteId);!this.selectionsVisible&&e&&this.bufferProxy.updateMarkers({[e]:this.getLocalHiddenSelections()}),this.selectionsVisible=!0}getLocalHiddenSelections(){const e=this.bufferProxy.getMarkers()[this.siteId];return(e?e[this.localHiddenSelectionsLayerId]:null)||{}}hostDidDisconnect(){this.selectionLayerIdsBySiteId.forEach((e,t)=>{this.siteDidDisconnect(t)})}siteDidDisconnect(e){this.selectionLayerIdsBySiteId.delete(e),this.delegate.clearSelectionsForSiteId(e)}receiveFetch({requestId:e}){this.router.respond({requestId:e,body:this.serialize().serializeBinary()})}receiveUpdate({body:e}){const t=a.EditorProxyUpdate.deserializeBinary(e);t.hasSelectionsUpdate()&&this.receiveSelectionsUpdate(t.getSelectionsUpdate())}receiveSelectionsUpdate(e){e.getSelectionLayerIdsBySiteIdMap().forEach((e,t)=>{this.selectionLayerIdsBySiteId.set(t,e)})}}},function(e,t){e.exports=class{constructor(){}dispose(){}isScrollNeededToViewPosition(){}updateActivePositions(){}updateSelectionsForSiteId(){}clearSelectionsForSiteId(){}updateTether(){}}},function(e,t,r){const o=r(5),{CompositeDisposable:n,Emitter:i}=r(3),{NetworkMessage:s,PeerIdentity:a}=r(12),c=r(7),p=r(19);function d(e){const t=new a;return t.setLogin(e.login),t}function l(e){return{login:e.getLogin()}}e.exports=class{constructor({id:e,peerPool:t,isHub:r,connectionTimeout:o}){this.id=e,this.peerPool=t,this.isHub=r,this.connectionTimeout=o||5e3,this.emitter=new i,this.memberIdentitiesById=new Map([[this.getPeerId(),this.peerPool.getPeerIdentity(this.getPeerId())]]),this.connectedMemberIds=new Set,this.resetConnectedMembers(),this.isHub?(this.spokes=new Set,this.state="connected"):this.state="disconnected",this.subscriptions=new n(t.onDisconnection(this.didLoseConnectionToPeer.bind(this)),t.onReceive(this.receive.bind(this)))}dispose(){this.subscriptions.dispose(),this.disconnect()}async connectTo(e){o(!this.isHub,"The hub should only receive connections"),o(!this.hubId,"Can connect to hub only once"),this.state="connecting",this.hubId=e,await this.peerPool.connectTo(this.hubId);try{const e=new s.StarJoinRequest;e.setSenderId(this.getPeerId());const t=new s;t.setStarJoinRequest(e),t.setNetworkId(this.id),this.send(this.hubId,t.serializeBinary())}catch(e){throw this.state="disconnected",this.hubId=null,e}const t=new c.NetworkConnectionError("Connecting to the portal network timed out");return new Promise((e,r)=>{this.resolveConnectionPromise=e,setTimeout(()=>{"connecting"===this.state&&(this.state="timeout",this.disconnect(),r(t))},this.connectionTimeout)})}disconnect(){if("disconnected"===this.state)return;const e=new s.StarLeaveNotification;e.setMemberId(this.getPeerId()),e.setConnectionLost(!1);const t=new s;t.setStarLeaveNotification(e),t.setNetworkId(this.id),this.isHub?(this.forwardBroadcast(this.getPeerId(),t.serializeBinary()),this.spokes.clear()):(this.send(this.hubId,t.serializeBinary()),this.hubId=null),this.resetConnectedMembers(),this.state="disconnected"}unicast(e,t){t=p(t);const r=new s.StarUnicast;r.setSenderId(this.peerPool.peerId),r.setRecipientId(e),r.setBody(t);const o=new s;o.setStarUnicast(r),o.setNetworkId(this.id);const n=o.serializeBinary();this.isHub?this.forwardUnicast(e,n):this.send(this.hubId,n)}broadcast(e){e=p(e);const t=new s.StarBroadcast;t.setSenderId(this.peerPool.peerId),t.setBody(e);const r=new s;r.setStarBroadcast(t),r.setNetworkId(this.id);const o=r.serializeBinary();this.isHub?this.forwardBroadcast(this.peerPool.peerId,o):this.send(this.hubId,o)}onMemberJoin(e){return this.emitter.on("join",e)}onMemberLeave(e){return this.emitter.on("leave",e)}onReceive(e){return this.emitter.on("receive",e)}getMemberIds(){return Array.from(this.connectedMemberIds)}getMemberIdentity(e){if(!this.memberIdentitiesById.has(e)){const t=(new Error).stack,r={localPeerId:this.getPeerId(),requestedPeerId:e,isHub:this.isHub,networkState:this.state,connectedMemberIds:Array.from(this.connectedMemberIds),memberIdsWithIdentity:Array.from(this.memberIdentitiesById.keys())};process.nextTick(()=>{const e=new Error("Attempted to get identity for non-connected member");throw e.metadata=r,e.privateMetadata={originalStackTrace:t},e.privateMetadataDescription=t,e})}return this.memberIdentitiesById.get(e)}getPeerId(){return this.peerPool.peerId}didLoseConnectionToPeer({peerId:e}){if(this.connectedMemberIds.has(e)){if(this.isHub){this.spokes.delete(e);const t=new s.StarLeaveNotification;t.setMemberId(e),t.setConnectionLost(!0);const r=new s;r.setStarLeaveNotification(t),r.setNetworkId(this.id),this.forwardBroadcast(e,r.serializeBinary())}this.memberDidLeave(e,!0)}}receive({senderId:e,message:t}){if("disconnected"===this.state)return;const r=s.deserializeBinary(t);r.getNetworkId()===this.id&&(r.hasStarJoinRequest()?this.receiveJoinRequest(t,r.getStarJoinRequest()):r.hasStarJoinResponse()?this.receiveJoinResponse(r.getStarJoinResponse()):r.hasStarJoinNotification()?this.receiveJoinNotification(r.getStarJoinNotification()):r.hasStarLeaveNotification()?this.receiveLeaveNotification(t,r.getStarLeaveNotification()):r.hasStarUnicast()?this.receiveUnicast(t,r.getStarUnicast()):r.hasStarBroadcast()&&this.receiveBroadcast(t,r.getStarBroadcast()))}receiveJoinRequest(e,t){o(this.isHub,"Join requests should only be sent to the hub");const r=t.getSenderId(),n=this.peerPool.getPeerIdentity(r);this.state="connected",this.spokes.add(r),this.memberIdentitiesById.set(r,n),this.connectedMemberIds.add(r);const i=new s.StarJoinResponse,a=i.getMemberIdentitiesByIdMap();this.connectedMemberIds.forEach(e=>{const t=this.getMemberIdentity(e);a.set(e,d(t))});const c=new s;c.setNetworkId(this.id),c.setStarJoinResponse(i),this.send(r,c.serializeBinary());const p=new s.StarJoinNotification;p.setMemberId(r),p.setMemberIdentity(d(n));const l=new s;l.setNetworkId(this.id),l.setStarJoinNotification(p),this.forwardBroadcast(r,l.serializeBinary()),this.emitter.emit("join",{peerId:r})}receiveJoinResponse(e){o(!this.isHub,"Connection responses cannot be sent to the hub"),e.getMemberIdentitiesByIdMap().forEach((e,t)=>{this.memberIdentitiesById.set(t,l(e)),this.connectedMemberIds.add(t)}),this.state="connected",this.resolveConnectionPromise(),this.resolveConnectionPromise=null}receiveJoinNotification(e){const t=e.getMemberId(),r=l(e.getMemberIdentity());this.memberIdentitiesById.set(t,r),this.connectedMemberIds.add(t),this.emitter.emit("join",{peerId:t})}receiveLeaveNotification(e,t){const r=t.getMemberId();this.connectedMemberIds.has(r)&&(this.isHub&&(this.spokes.delete(r),this.forwardBroadcast(r,e)),this.memberDidLeave(r,t.getConnectionLost()))}memberDidLeave(e,t){e===this.hubId?(this.hubId=null,this.state="disconnected",this.resetConnectedMembers()):this.connectedMemberIds.delete(e),this.emitter.emit("leave",{peerId:e,connectionLost:t})}receiveUnicast(e,t){const r=t.getRecipientId();if(r===this.peerPool.peerId)this.emitter.emit("receive",{senderId:t.getSenderId(),message:p(t.getBody())});else{if(!this.isHub)throw new Error("Received a unicast not intended for this peer");this.forwardUnicast(r,e)}}receiveBroadcast(e,t){const r=t.getSenderId();this.isHub&&this.forwardBroadcast(r,e),this.emitter.emit("receive",{senderId:r,message:p(t.getBody())})}forwardUnicast(e,t){this.spokes.has(e)&&this.send(e,t)}forwardBroadcast(e,t){this.spokes.forEach(r=>{r!==e&&this.send(r,t)})}send(e,t){this.peerPool.isConnectedToPeer(e)&&this.peerPool.send(e,t)}resetConnectedMembers(){this.connectedMemberIds.clear(),this.connectedMemberIds.add(this.getPeerId())}}},function(e,t){e.exports=class{dispose(){}updateTether(){}updateActivePositions(){}hostDidLoseConnection(){}hostDidClosePortal(){}siteDidLeave(){}siteDidJoin(){}didChangeEditorProxies(){}}},function(e,t){e.exports=require("buffer")},function(e,t,r){"use strict";var o=r(4).Buffer,n=r(11),i=r(0),s=r(103),a=r(10),c=r(108),p=r(109),d=function(e,t,r){if(a.apply(this,arguments),this._extensions=new s,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},"string"==typeof this._protocols&&(this._protocols=this._protocols.split(/ *, */)),this._request){var o=this._request.headers["sec-websocket-protocol"],n=this._protocols;void 0!==o&&("string"==typeof o&&(o=o.split(/ *, */)),this.protocol=o.filter((function(e){return n.indexOf(e)>=0}))[0]),this.version="hybi-"+d.VERSION}};i.inherits(d,a),d.VERSION="13",d.mask=function(e,t,r){if(!t||0===t.length)return e;r=r||0;for(var o=0,n=e.length-r;o<n;o++)e[r+o]=e[r+o]^t[o%4];return e},d.generateAccept=function(e){var t=n.createHash("sha1");return t.update(e+d.GUID),t.digest("base64")},d.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var l={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(e){return this._extensions.add(e),!0},parse:function(e){this._reader.put(e);for(var t=!0;t;)switch(this._stage){case 0:(t=this._reader.read(1))&&this._parseOpcode(t[0]);break;case 1:(t=this._reader.read(1))&&this._parseLength(t[0]);break;case 2:(t=this._reader.read(this._frame.lengthBytes))&&this._parseExtendedLength(t);break;case 3:(t=this._reader.read(4))&&(this._stage=4,this._frame.maskingKey=t);break;case 4:(t=this._reader.read(this._frame.length))&&(this._stage=0,this._emitFrame(t));break;default:t=null}},text:function(e){return!(this.readyState>1)&&this.frame(e,"text")},binary:function(e){return!(this.readyState>1)&&this.frame(e,"binary")},ping:function(e,t){return!(this.readyState>1)&&(e=e||"",t&&(this._pingCallbacks[e]=t),this.frame(e,"ping"))},pong:function(e){return!(this.readyState>1)&&(e=e||"",this.frame(e,"pong"))},close:function(e,t){return e=e||"",t=t||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new a.CloseEvent(t,e)),!0):1===this.readyState&&(this.readyState=2,this._extensions.close((function(){this.frame(e,"close",t)}),this),!0)},frame:function(e,t,r){if(this.readyState<=0)return this._queue([e,t,r]);if(this.readyState>2)return!1;e instanceof Array&&(e=o.from(e)),"number"==typeof e&&(e=e.toString());var i,s,a=new p,d="string"==typeof e;a.rsv1=a.rsv2=a.rsv3=!1,a.opcode=this.OPCODES[t||(d?"text":"binary")],i=d?o.from(e,"utf8"):e,r&&(s=i,(i=o.allocUnsafe(2+s.length)).writeUInt16BE(r,0),s.copy(i,2)),a.data=i;var l=function(e){var t=new c;t.final=!0,t.rsv1=e.rsv1,t.rsv2=e.rsv2,t.rsv3=e.rsv3,t.opcode=e.opcode,t.masked=!!this._masking,t.length=e.data.length,t.payload=e.data,t.masked&&(t.maskingKey=n.randomBytes(4)),this._sendFrame(t)};return this.MESSAGE_OPCODES.indexOf(a.opcode)>=0?this._extensions.processOutgoingMessage(a,(function(e,t){if(e)return this._fail("extension_error",e.message);l.call(this,t)}),this):l.call(this,a),!0},_sendFrame:function(e){var t=e.length,r=t<=125?2:t<=65535?4:10,n=r+(e.masked?4:0),i=o.allocUnsafe(n+t),s=e.masked?this.MASK:0;i[0]=(e.final?this.FIN:0)|(e.rsv1?this.RSV1:0)|(e.rsv2?this.RSV2:0)|(e.rsv3?this.RSV3:0)|e.opcode,t<=125?i[1]=s|t:t<=65535?(i[1]=126|s,i.writeUInt16BE(t,2)):(i[1]=127|s,i.writeUInt32BE(Math.floor(t/4294967296),2),i.writeUInt32BE(t%4294967296,6)),e.payload.copy(i,n),e.masked&&(e.maskingKey.copy(i,r),d.mask(i,e.maskingKey,n)),this._write(i)},_handshakeResponse:function(){var e=this._request.headers["sec-websocket-key"],t=this._request.headers["sec-websocket-version"];if(t!==d.VERSION)throw new Error("Unsupported WebSocket version: "+t);if("string"!=typeof e)throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",d.generateAccept(e)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var r=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);r&&this._headers.set("Sec-WebSocket-Extensions",r);var n=["HTTP/1.1 101 Switching Protocols",this._headers.toString(),""];return o.from(n.join("\r\n"),"utf8")},_shutdown:function(e,t,r){delete this._frame,delete this._message,this._stage=5;var o=1===this.readyState;this.readyState=2,this._extensions.close((function(){o&&this.frame(t,"close",e),this.readyState=3,r&&this.emit("error",new Error(t)),this.emit("close",new a.CloseEvent(e,t))}),this)},_fail:function(e,t){this.readyState>1||this._shutdown(this.ERRORS[e],t,!0)},_parseOpcode:function(e){var t=[this.RSV1,this.RSV2,this.RSV3].map((function(t){return(e&t)===t})),r=this._frame=new c;return r.final=(e&this.FIN)===this.FIN,r.rsv1=t[0],r.rsv2=t[1],r.rsv3=t[2],r.opcode=e&this.OPCODE,this._stage=1,this._extensions.validFrameRsv(r)?this.OPCODE_CODES.indexOf(r.opcode)<0?this._fail("protocol_error","Unrecognized frame opcode: "+r.opcode):this.MESSAGE_OPCODES.indexOf(r.opcode)<0&&!r.final?this._fail("protocol_error","Received fragmented control frame: opcode = "+r.opcode):this._message&&this.OPENING_OPCODES.indexOf(r.opcode)>=0?this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished"):void 0:this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(r.rsv1?1:0)+", reserved2 = "+(r.rsv2?1:0)+", reserved3 = "+(r.rsv3?1:0))},_parseLength:function(e){var t=this._frame;if(t.masked=(e&this.MASK)===this.MASK,t.length=e&this.LENGTH,t.length>=0&&t.length<=125){if(this._stage=t.masked?3:4,!this._checkFrameLength())return}else this._stage=2,t.lengthBytes=126===t.length?2:8;if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(e){var t=this._frame;if(t.length=this._readUInt(e),this._stage=t.masked?3:4,this.MESSAGE_OPCODES.indexOf(t.opcode)<0&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);this._checkFrameLength()},_checkFrameLength:function(){return!((this._message?this._message.length:0)+this._frame.length>this._maxLength)||(this._fail("too_large","WebSocket frame length too large"),!1)},_emitFrame:function(e){var t,r,o,n,i,s=this._frame,c=s.payload=d.mask(e,s.maskingKey),l=s.opcode;if(delete this._frame,l===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(s)}if(l!==this.OPCODES.text&&l!==this.OPCODES.binary||(this._message=new p,this._message.pushFrame(s)),s.final&&this.MESSAGE_OPCODES.indexOf(l)>=0)return this._emitMessage(this._message);l===this.OPCODES.close&&(r=c.length>=2?c.readUInt16BE(0):null,o=c.length>2?this._encode(c.slice(2)):null,0!==c.length&&!(null!==r&&r>=this.MIN_RESERVED_ERROR&&r<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(r)<0&&(r=this.ERRORS.protocol_error),(c.length>125||c.length>2&&!o)&&(r=this.ERRORS.protocol_error),this._shutdown(r||this.DEFAULT_ERROR_CODE,o||"")),l===this.OPCODES.ping&&(this.frame(c,"pong"),this.emit("ping",new a.PingEvent(c.toString()))),l===this.OPCODES.pong&&(i=(n=this._pingCallbacks)[t=this._encode(c)],delete n[t],i&&i(),this.emit("pong",new a.PongEvent(c.toString())))},_emitMessage:function(e){(e=this._message).read(),delete this._message,this._extensions.processIncomingMessage(e,(function(e,t){if(e)return this._fail("extension_error",e.message);var r=t.data;if(t.opcode===this.OPCODES.text&&(r=this._encode(r)),null===r)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new a.MessageEvent(r))}),this)},_encode:function(e){try{var t=e.toString("binary",0,e.length);if(!this.UTF8_MATCH.test(t))return null}catch(e){}return e.toString("utf8",0,e.length)},_readUInt:function(e){return 2===e.length?e.readUInt16BE(0):4294967296*e.readUInt32BE(0)+e.readUInt32BE(4)}};for(var u in l)d.prototype[u]=l[u];e.exports=d},function(e,t,r){"use strict";var o=function(e){this._bufferSize=e,this.clear()};o.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},o.prototype.push=function(e){var t=!1,r=!1;this._ringSize<this._bufferSize?t=0===this._tail:this._ringOffset===this._ringSize&&(t=!0,r=0===this._tail),t&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,r&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=e,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},o.prototype.peek=function(){if(0!==this.length)return this._buffer[this._head]},o.prototype.shift=function(){if(0!==this.length){var e=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,0===this._ringOffset&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,e}},e.exports=o},function(e,t,r){"use strict";var o=r(55),n=function(){this._complete=!1,this._callbacks=new o(n.QUEUE_SIZE)};n.QUEUE_SIZE=4,n.all=function(e){var t=new n,r=e.length,o=r;for(0===r&&t.done();o--;)e[o].then((function(){0===(r-=1)&&t.done()}));return t},n.prototype.then=function(e){this._complete?e():this._callbacks.push(e)},n.prototype.done=function(){this._complete=!0;for(var e,t=this._callbacks;e=t.shift();)e()},e.exports=n},function(e,t,r){"use strict";var o=r(4).Buffer,n=r(10),i=function(e,t,r){n.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};r(0).inherits(i,n);var s={close:function(){return 3!==this.readyState&&(this.readyState=3,this.emit("close",new n.CloseEvent(null,null)),!0)},parse:function(e){this.readyState>1||(this._reader.put(e),this._reader.eachByte((function(e){var t;switch(this._stage){case-1:this._body.push(e),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(e);break;case 1:if(this._length=(127&e)+128*this._length,this._closing&&0===this._length)return this.close();128!=(128&e)&&(0===this._length?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(255===e)this._stage=0,t=o.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new n.MessageEvent(t));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(e),this._buffer.length>this._maxLength)return this.close()}}),this))},frame:function(e){if(0===this.readyState)return this._queue([e]);if(this.readyState>1)return!1;"string"!=typeof e&&(e=e.toString());var t=o.byteLength(e),r=o.allocUnsafe(t+2);return r[0]=0,r.write(e,1),r[r.length-1]=255,this._write(r),!0},_handshakeResponse:function(){var e=["HTTP/1.1 101 Web Socket Protocol Handshake",this._headers.toString(),""];return o.from(e.join("\r\n"),"utf8")},_parseLeadingByte:function(e){128==(128&e)?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var a in s)i.prototype[a]=s[a];e.exports=i},function(e,t,r){var o=r(21),n={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(e,t,r){this.on(e,t)},removeEventListener:function(e,t,r){this.removeListener(e,t)},dispatchEvent:function(e){e.target=e.currentTarget=this,e.eventPhase=o.AT_TARGET,this["on"+e.type]&&this["on"+e.type](e),this.emit(e.type,e)}};e.exports=n},function(e,t){e.exports=require("net")},function(e,t,r){const{HTTPRequestError:o}=r(7);e.exports=class{constructor({baseURL:e,oauthToken:t}){this.baseURL=e,this.oauthToken=t}setOauthToken(e){this.oauthToken=e}get(e,t){return this.fetch(e,{method:"GET",headers:this.getDefaultHeaders()})}post(e,t){return this.fetch(e,{method:"POST",headers:Object.assign(this.getDefaultHeaders(),{"Content-Type":"application/json"}),body:JSON.stringify(t)})}async fetch(e,{method:t,headers:r,body:n}){const s=this.getAbsoluteURL(e);let a;try{a=await window.fetch(s,{method:t,headers:r,body:n})}catch(e){const r=new o("Connection failure");throw r.diagnosticMessage=i({method:t,url:s}),r}const{ok:c,status:p}=a,d=await a.text();try{return{ok:c,body:JSON.parse(d),status:p}}catch(e){const r=new o("Unexpected response");throw r.diagnosticMessage=i({method:t,url:s,status:p,rawBody:d}),r}}getDefaultHeaders(){const e={Accept:"application/json"};return this.oauthToken&&(e["GitHub-OAuth-token"]=this.oauthToken),e}getAbsoluteURL(e){return this.baseURL+e}};const n=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/g;function i({method:e,url:t,status:r,rawBody:o}){let i=`Request: ${e} ${t}`;return r&&(i+="\nStatus Code: "+r),o&&(i+="\nBody: "+o),i.replace(n,"REDACTED")}},function(e,t,r){"use strict";var o=r(14),n=r(132),i=new(r(62))({max:50,maxAge:3e4});e.exports=function(e,t){var r;if(t=!!t,r=i.get(e+"!"+t),i.has(e))return i.get(e);try{r=t?n.sync(e,{pathExt:o.delimiter+(process.env.PATHEXT||"")}):n.sync(e)}catch(e){}return i.set(e+"!"+t,r),r}},function(e,t,r){"use strict";e.exports=m;var o,n=r(136),i=r(0),s=r(138),a=(o="function"==typeof Symbol&&"1"!==process.env._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),c=o("length"),p=o("lengthCalculator"),d=o("allowStale"),l=o("maxAge"),u=o("dispose"),g=o("noDisposeOnSet"),h=o("lruList"),f=o("cache");function y(){return 1}function m(e){if(!(this instanceof m))return new m(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[a]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[a]=1/0);var r=e.length||y;"function"!=typeof r&&(r=y),this[p]=r,this[d]=e.stale||!1,this[l]=e.maxAge||0,this[u]=e.dispose,this[g]=e.noDisposeOnSet||!1,this.reset()}function S(e,t,r,o){var n=r.value;_(e,n)&&(E(e,r),e[d]||(n=void 0)),n&&t.call(o,n.value,n.key,e)}function b(e,t,r){var o=e[f].get(t);if(o){var n=o.value;_(e,n)?(E(e,o),e[d]||(n=void 0)):r&&e[h].unshiftNode(o),n&&(n=n.value)}return n}function _(e,t){if(!t||!t.maxAge&&!e[l])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]}function v(e){if(e[c]>e[a])for(var t=e[h].tail;e[c]>e[a]&&null!==t;){var r=t.prev;E(e,t),t=r}}function E(e,t){if(t){var r=t.value;e[u]&&e[u](r.key,r.value),e[c]-=r.length,e[f].delete(r.key),e[h].removeNode(t)}}function O(e,t,r,o,n){this.key=e,this.value=t,this.length=r,this.now=o,this.maxAge=n||0}Object.defineProperty(m.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[a]=e,v(this)},get:function(){return this[a]},enumerable:!0}),Object.defineProperty(m.prototype,"allowStale",{set:function(e){this[d]=!!e},get:function(){return this[d]},enumerable:!0}),Object.defineProperty(m.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[l]=e,v(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(m.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=y),e!==this[p]&&(this[p]=e,this[c]=0,this[h].forEach((function(e){e.length=this[p](e.value,e.key),this[c]+=e.length}),this)),v(this)},get:function(){return this[p]},enumerable:!0}),Object.defineProperty(m.prototype,"length",{get:function(){return this[c]},enumerable:!0}),Object.defineProperty(m.prototype,"itemCount",{get:function(){return this[h].length},enumerable:!0}),m.prototype.rforEach=function(e,t){t=t||this;for(var r=this[h].tail;null!==r;){var o=r.prev;S(this,e,r,t),r=o}},m.prototype.forEach=function(e,t){t=t||this;for(var r=this[h].head;null!==r;){var o=r.next;S(this,e,r,t),r=o}},m.prototype.keys=function(){return this[h].toArray().map((function(e){return e.key}),this)},m.prototype.values=function(){return this[h].toArray().map((function(e){return e.value}),this)},m.prototype.reset=function(){this[u]&&this[h]&&this[h].length&&this[h].forEach((function(e){this[u](e.key,e.value)}),this),this[f]=new n,this[h]=new s,this[c]=0},m.prototype.dump=function(){return this[h].map((function(e){if(!_(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},m.prototype.dumpLru=function(){return this[h]},m.prototype.inspect=function(e,t){var r="LRUCache {",o=!1;this[d]&&(r+="\n  allowStale: true",o=!0);var n=this[a];n&&n!==1/0&&(o&&(r+=","),r+="\n  max: "+i.inspect(n,t),o=!0);var s=this[l];s&&(o&&(r+=","),r+="\n  maxAge: "+i.inspect(s,t),o=!0);var u=this[p];u&&u!==y&&(o&&(r+=","),r+="\n  length: "+i.inspect(this[c],t),o=!0);var g=!1;return this[h].forEach((function(e){g?r+=",\n  ":(o&&(r+=",\n"),g=!0,r+="\n  ");var n=i.inspect(e.key).split("\n").join("\n  "),a={value:e.value};e.maxAge!==s&&(a.maxAge=e.maxAge),u!==y&&(a.length=e.length),_(this,e)&&(a.stale=!0),a=i.inspect(a,t).split("\n").join("\n  "),r+=n+" => "+a})),(g||o)&&(r+="\n"),r+="}"},m.prototype.set=function(e,t,r){var o=(r=r||this[l])?Date.now():0,n=this[p](t,e);if(this[f].has(e)){if(n>this[a])return E(this,this[f].get(e)),!1;var i=this[f].get(e).value;return this[u]&&(this[g]||this[u](e,i.value)),i.now=o,i.maxAge=r,i.value=t,this[c]+=n-i.length,i.length=n,this.get(e),v(this),!0}var s=new O(e,t,n,o,r);return s.length>this[a]?(this[u]&&this[u](e,t),!1):(this[c]+=s.length,this[h].unshift(s),this[f].set(e,this[h].head),v(this),!0)},m.prototype.has=function(e){return!!this[f].has(e)&&!_(this,this[f].get(e).value)},m.prototype.get=function(e){return b(this,e,!0)},m.prototype.peek=function(e){return b(this,e,!1)},m.prototype.pop=function(){var e=this[h].tail;return e?(E(this,e),e.value):null},m.prototype.del=function(e){E(this,this[f].get(e))},m.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var o=e[r],n=o.e||0;if(0===n)this.set(o.k,o.v);else{var i=n-t;i>0&&this.set(o.k,o.v,i)}}},m.prototype.prune=function(){var e=this;this[f].forEach((function(t,r){b(e,r,!1)}))}},function(e,t,r){"use strict";e.exports=function(e,t){return e=""+e,e=t?'"'+(e=(e=e.replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1"))+'"':e.replace(/([()%!^<>&|;,"'\s])/g,"^$1")}},function(e,t,r){var o=r(146).Transform,n=r(0).inherits,i=r(152);function s(e){o.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,o){return"function"==typeof t&&(o=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof o&&(o=null),e(t,r,o)}}n(s,o),s.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;process.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},e.exports=c((function(e,t,r){var o=new s(e);return o._transform=t,r&&(o._flush=r),o})),e.exports.ctor=c((function(e,t,r){function o(t){if(!(this instanceof o))return new o(t);this.options=i(e,t),s.call(this,this.options)}return n(o,s),o.prototype._transform=t,r&&(o.prototype._flush=r),o})),e.exports.obj=c((function(e,t,r){var o=new s(i({objectMode:!0,highWaterMark:16},e));return o._transform=t,r&&(o._flush=r),o}))},function(e,t,r){"use strict";var o=r(22);e.exports=S;var n,i=r(147);S.ReadableState=m;r(13).EventEmitter;var s=function(e,t){return e.listeners(t).length},a=r(66),c=r(23).Buffer,p=global.Uint8Array||function(){};var d=Object.create(r(16));d.inherits=r(17);var l=r(0),u=void 0;u=l&&l.debuglog?l.debuglog("stream"):function(){};var g,h=r(149),f=r(67);d.inherits(S,a);var y=["error","close","destroy","pause","resume"];function m(e,t){e=e||{};var o=t instanceof(n=n||r(15));this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=r(69).StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function S(e){if(n=n||r(15),!(this instanceof S))return new S(e);this._readableState=new m(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function b(e,t,r,o,n){var i,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,E(e)}(e,s)):(n||(i=function(e,t){var r;o=t,c.isBuffer(o)||o instanceof p||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var o;return r}(s,t)),i?e.emit("error",i):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),o?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):T(e,s)):_(e,s,t,!1))):o||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function _(e,t,r,o){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,o?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&E(e)),T(e,t)}Object.defineProperty(S.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=f.destroy,S.prototype._undestroy=f.undestroy,S.prototype._destroy=function(e,t){this.push(null),t(e)},S.prototype.push=function(e,t){var r,o=this._readableState;return o.objectMode?r=!0:"string"==typeof e&&((t=t||o.defaultEncoding)!==o.encoding&&(e=c.from(e,t),t=""),r=!0),b(this,e,t,!1,r)},S.prototype.unshift=function(e){return b(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){return g||(g=r(69).StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};function v(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(O,e):O(e))}function O(e){u("emit readable"),e.emit("readable"),R(e)}function T(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(w,e,t))}function w(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(u("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function M(e){u("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(u("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var o;e<t.head.data.length?(o=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):o=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,o=1,n=r.data;e-=n.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0===(e-=s)){s===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++o}return t.length-=o,n}(e,t):function(e,t){var r=c.allocUnsafe(e),o=t.head,n=1;o.data.copy(r),e-=o.data.length;for(;o=o.next;){var i=o.data,s=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,s),0===(e-=s)){s===i.length?(++n,o.next?t.head=o.next:t.head=t.tail=null):(t.head=o,o.data=i.slice(s));break}++n}return t.length-=n,r}(e,t);return o}(e,t.buffer,t.decoder),r);var r}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(U,t,e))}function U(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function B(e,t){for(var r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):E(this),null;if(0===(e=v(e,t))&&t.ended)return 0===t.length&&C(this),null;var o,n=t.needReadable;return u("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",n=!0),t.ended||t.reading?u("reading or ended",n=!1):n&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=v(r,t))),null===(o=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&C(this)),null!==o&&this.emit("data",o),o},S.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},S.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,u("pipe count=%d opts=%j",n.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?p:S;function c(t,o){u("onunpipe"),t===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,u("cleanup"),e.removeListener("close",y),e.removeListener("finish",m),e.removeListener("drain",d),e.removeListener("error",f),e.removeListener("unpipe",c),r.removeListener("end",p),r.removeListener("end",S),r.removeListener("data",h),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function p(){u("onend"),e.end()}n.endEmitted?o.nextTick(a):r.once("end",a),e.on("unpipe",c);var d=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,R(e))}}(r);e.on("drain",d);var l=!1;var g=!1;function h(t){u("ondata"),g=!1,!1!==e.write(t)||g||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==B(n.pipes,e))&&!l&&(u("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,g=!0),r.pause())}function f(t){u("onerror",t),S(),e.removeListener("error",f),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",m),S()}function m(){u("onfinish"),e.removeListener("close",y),S()}function S(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",y),e.once("finish",m),e.emit("pipe",r),n.flowing||(u("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var o=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)o[i].emit("unpipe",this,r);return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&E(this):o.nextTick(M,this))}return r},S.prototype.addListener=S.prototype.on,S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(I,e,t))}(this,e)),this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},S.prototype.wrap=function(e){var t=this,r=this._readableState,o=!1;for(var n in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(u("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(o=!0,e.pause()))})),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var i=0;i<y.length;i++)e.on(y[i],this.emit.bind(this,y[i]));return this._read=function(t){u("wrapped _read",t),o&&(o=!1,e.resume())},this},Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),S._fromList=P},function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";var o=r(22);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(o.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";var o=r(22);function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var o=e.entry;e.entry=null;for(;o;){var n=o.callback;t.pendingcb--,n(r),o=o.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var i,s=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:o.nextTick;y.WritableState=f;var a=Object.create(r(16));a.inherits=r(17);var c={deprecate:r(150)},p=r(66),d=r(23).Buffer,l=global.Uint8Array||function(){};var u,g=r(67);function h(){}function f(e,t){i=i||r(15),e=e||{};var a=t instanceof i;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var c=e.highWaterMark,p=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:a&&(p||0===p)?p:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),E(e,t))}(e,r,n,t,i);else{var a=_(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||b(e,r),n?s(S,e,r,a,i):S(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function y(e){if(i=i||r(15),!(u.call(y,this)||this instanceof i))return new y(e);this._writableState=new f(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),p.call(this)}function m(e,t,r,o,n,i,s){t.writelen=o,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,i,t.onwrite),t.sync=!1}function S(e,t,r,o){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,o(),E(e,t)}function b(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var o=t.bufferedRequestCount,i=new Array(o),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,m(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var p=r.chunk,d=r.encoding,l=r.callback;if(m(e,t,!1,t.objectMode?1:p.length,p,d,l),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function E(e,t){var r=_(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(v,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}a.inherits(y,p),f.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(f.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===y&&(e&&e._writableState instanceof f)}})):u=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=e,d.isBuffer(n)||n instanceof l);return a&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=h),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,o,n,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t}(t,o,n);o!==s&&(r=!0,n="buffer",o=s)}var a=t.objectMode?1:o.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:o,encoding:n,isBuf:r,callback:i,next:null},p?p.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,a,o,n,i);return c}(this,i,a,e,t,r)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,r){"use strict";var o=r(23).Buffer,n=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=p,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=d,this.end=l,t=3;break;default:return this.write=u,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var o=r.charCodeAt(r.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var o=t.length-1;if(o<r)return 0;var n=s(t[o]);if(n>=0)return n>0&&(e.lastNeed=n-1),n;if(--o<r||-2===n)return 0;if((n=s(t[o]))>=0)return n>0&&(e.lastNeed=n-2),n;if(--o<r||-2===n)return 0;if((n=s(t[o]))>=0)return n>0&&(2===n?n=0:e.lastNeed=n-3),n;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var o=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=s;var o=r(15),n=Object.create(r(16));function i(e,t){var r=this._transformState;r.transforming=!1;var o=r.writecb;if(!o)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),o(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);o.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(17),n.inherits(s,o),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var o=this._transformState;if(o.writecb=r,o.writechunk=e,o.writeencoding=t,!o.transforming){var n=this._readableState;(o.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;o.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(159):e.exports=r(161)},function(e,t,r){var o;function n(e){function r(){if(r.enabled){var e=r,n=+new Date,i=n-(o||n);e.diff=i,e.prev=o,e.curr=n,o=n;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,o){if("%%"===r)return r;c++;var n=t.formatters[o];if("function"==typeof n){var i=s[c];r=n.call(e,i),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s);var p=r.log||t.log||console.log.bind(console);p.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,o=0;for(r in e)o=(o<<5)-o+e.charCodeAt(r),o|=0;return t.colors[Math.abs(o)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length,n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,o;for(r=0,o=t.skips.length;r<o;r++)if(t.skips[r].test(e))return!1;for(r=0,o=t.names.length;r<o;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(160),t.names=[],t.skips=[],t.formatters={}},function(e,t,r){"use strict";var o=r(13).EventEmitter,n=r(71)("RTCDC");e.exports=function(e,t){return e.eval("\n    window.arrayBufferToBase64 = function (buffer) {\n      var binary = ''\n      var bytes = new Uint8Array(buffer)\n      for (var i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i])\n      }\n      return window.btoa(binary)\n    }\n\n    window.base64ToArrayBuffer = function (base64) {\n      var binary = window.atob(base64)\n      var bytes = new Uint8Array(binary.length)\n      for (var i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i)\n      }\n      return bytes.buffer\n    }\n  "),class extends o{constructor(e,t,r){super(),"object"==typeof e?this._wrap(e):this._create(e,t,r)}_create(r,o,n){n=n||{},this._pcId=r,this.label=o,this.ordered=null,this.protocol="",this.id=this.stream=null,this.readyState="connecting",this.bufferedAmount=0,this._bufferedAmountLowThreshold=0,this._binaryType="blob",this.maxPacketLifeType=null,this.maxRetransmits=null,this.negotiated=!1,this.reliable="boolean"!=typeof n.reliable||n.reliable,this.on("error",e=>t.emit("error",e,this)),e.eval(`\n        var pc = conns[${JSON.stringify(r)}]\n        var dc = pc.createDataChannel(\n          ${JSON.stringify(o)}, ${JSON.stringify(n)})\n        pc.dataChannels[dc.id] = dc\n        // Queues messages that have been recieved before the message listener has been added\n        dc.msgQueue = []\n        dc.onmessage = function (eMsg) {\n          dc.msgQueue.push(eMsg)\n        }\n        dc.id\n      `,(e,t)=>{if(e)return this.emit("error",e);this.id=this.stream=t,this._registerListeners(),this.emit("init")})}_wrap(e){for(let t in e)this[t]=e[t];this.stream=this.id,this._registerListeners()}_registerListeners(t){e.on(`dc:${this._pcId}:${this.id}`,this.onMessage.bind(this)),this._eval(`\n        var id = 'dc:' + ${JSON.stringify(this._pcId)} + ':' + dc.id\n        dc.onopen = function () {\n          send(id, {\n            type: 'open',\n            state: {\n              ordered: dc.ordered,\n              protocol: dc.protocol,\n              maxPacketLifeType: dc.maxPacketLifeType,\n              maxRetransmits: dc.maxRetransmits,\n              negotiated: dc.negotiated,\n              reliable: dc.reliable\n            }\n          })\n        }\n        dc.onmessage = function (e) {\n          send(id, {\n            type: 'message',\n            event: {\n              data: e.data instanceof ArrayBuffer ? arrayBufferToBase64(e.data) : e.data,\n              origin: e.origin\n            },\n            dataType: e.data instanceof ArrayBuffer ? 'binary' : 'string'\n          })\n        }\n        dc.onbufferedamountlow = function () {\n          send(id, { type: 'bufferedamountlow' })\n        }\n        dc.onclose = function () {\n          delete pc.dataChannels[dc.id]\n          send(id, { type: 'close' })\n        }\n        dc.onerror = function () {\n          send(id, { type: 'error' })\n        }\n        if (dc.readyState === 'open') dc.onopen()\n        for (var i = 0; i < dc.msgQueue.length; i++) {\n          dc.onmessage(dc.msgQueue[i])\n        }\n        dc.msgQueue = null\n      `,t||(e=>{e&&this.emit("error",e)}))}onMessage(e){var t=this["on"+e.type],r=e.event||{};switch(n("<<",this.id,e.type,e,!!t),e.type){case"open":this.readyState="open";break;case"message":if("binary"===e.dataType){var o=new Buffer(r.data,"base64");r.data=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}break;case"close":this.readyState="closed"}this.emit(e.type,r),t&&t(r)}close(){this.readyState="closing",this._eval("if (dc) dc.close()",e=>{e&&this.emit("error",e)})}send(e){var t="";(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=function(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),o=0;o<t.length;++o)t[o]=r[o];return t}(e)),e instanceof Buffer&&(e=e.toString("base64"),t="data = base64ToArrayBuffer(data)"),this._eval(`\n        if (dc.readyState === 'open') {\n          var data = ${JSON.stringify(e)}\n          ${t}\n          dc.send(data)\n        }\n        dc.bufferedAmount\n      `,(e,t)=>{if(e)return this.emit("error",e);this.bufferedAmount=t})}_eval(t,r){return e.eval(`\n        var pc = conns[${JSON.stringify(this._pcId)}]\n        var dc = pc.dataChannels[${JSON.stringify(this.id)}]\n      `+t,r||(e=>{e&&this.emit("error",e)}))}_setProp(e,t){return null==this.id?this.once("init",()=>this._setProp(e,t)):this._eval(`dc["${e}"] = ${JSON.stringify(t)}`)}get bufferedAmountLowThreshold(){return this._bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._bufferedAmountLowThreshold=e,this._setProp("bufferedAmountLowThreshold",e)}get binaryType(){return this._binaryType}set binaryType(e){this._binaryType=e,this._setProp("binaryType",e)}}}},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const n=r(18),i=r(37),s=r(119),a=r(124),c=r(125),p=global,d=r(126)();p.window={},p.window=global,p.window.fetch=a,p.RTCPeerConnection=d.RTCPeerConnection,t.activate=function(e){console.log('Great, your extension "vscode-teletype" is now active!');let t=n.commands.registerCommand("extension.join-portal",()=>o(this,void 0,void 0,(function*(){let e=yield n.window.showInputBox({prompt:"Enter your GitHub AuthToken"});if(e){let t=yield function(){return o(this,void 0,void 0,(function*(){return yield n.window.showInputBox({prompt:"Enter ID of the Portal you wish to join"})}))}();t?(n.window.showInformationMessage("Trying to Join Portal with ID "+t+" "),yield function(e,t){return o(this,void 0,void 0,(function*(){console.log("Inside the function call of JoinPortal");let r,o,a=n.window.activeTextEditor;if(""!==t){try{r=new i.TeletypeClient({pusherKey:c.PUSHER_KEY,pusherOptions:{cluster:c.PUSHER_CLUSTER},baseURL:c.API_URL_BASE}),yield r.initialize(),yield r.signIn(t),console.log("Inside the try block of creating teletype client")}catch(e){console.log("Inside the catch block of creating teletype client"),console.log("Exception Error Message "+e)}o=new s.default({client:r,portalId:e,editor:a}),yield o.initialize()}else n.window.showErrorMessage("GitHub Auth Token. Please provide it in the constants.ts file")}))}(t,e)):n.window.showInformationMessage("No Portal ID has been entered. Please try again")}})));e.subscriptions.push(t)},t.deactivate=function(){}},function(e,t,r){const o=r(25),n=r(76),i=r(77),s=r(40),a=r(44),c=r(7),p=r(31),d=r(60),{Emitter:l}=r(3),u=()=>{};e.exports=class{constructor({restGateway:e,pubSubGateway:t,connectionTimeout:r,tetherDisconnectWindow:o,testEpoch:n,pusherKey:i,pusherOptions:s,baseURL:a,didCreateOrJoinPortal:c}){this.restGateway=e||new d({baseURL:a}),this.pubSubGateway=t||new p({key:i,options:s}),this.connectionTimeout=r||5e3,this.tetherDisconnectWindow=o||1e3,this.testEpoch=n,this.didCreateOrJoinPortal=c||u,this.emitter=new l}async initialize(){const{ok:e,body:t}=await this.restGateway.get("/protocol-version");if(e&&t.version>9)throw new c.ClientOutOfDateError(`This version teletype-client is out of date. The local version is 9 but the remote version is ${t.version}.`)}dispose(){this.peerPool&&this.peerPool.dispose()}async signIn(e){let t;this.restGateway.setOauthToken(e);try{t=await this.restGateway.get("/identity")}catch(e){const t="Authentication failed with message: "+e.message;throw new c.UnexpectedAuthenticationError(t)}if(t.ok)return this.peerPool=new s({peerId:this.getClientId(),peerIdentity:t.body,restGateway:this.restGateway,pubSubGateway:this.pubSubGateway,fragmentSize:16384,connectionTimeout:this.connectionTimeout,testEpoch:this.testEpoch}),this.peerPool.onError(this.peerPoolDidError.bind(this)),await this.peerPool.initialize(),this.signedIn=!0,this.emitter.emit("sign-in-change"),!0;if(401===t.status)return!1;{const e="Authentication failed with message: "+t.body.message;throw new c.UnexpectedAuthenticationError(e)}}signOut(){return this.signedIn&&(this.signedIn=!1,this.restGateway.setOauthToken(null),this.peerPool.dispose(),this.peerPool=null,this.emitter.emit("sign-in-change")),!0}isSignedIn(){return this.signedIn}getLocalUserIdentity(){return this.peerPool?this.peerPool.getLocalPeerIdentity():null}async createPortal(){let e;try{e=await this.restGateway.post("/portals",{hostPeerId:this.getClientId()})}catch(e){throw new c.PortalCreationError("Could not contact server to create your portal")}if(e.ok){const{id:t}=e.body,r=new a({id:t,siteId:1,peerPool:this.peerPool,connectionTimeout:this.connectionTimeout,tetherDisconnectWindow:this.tetherDisconnectWindow});return await r.initialize(),this.didCreateOrJoinPortal(r),r}if(401!==e.status)throw new c.PortalCreationError("A server error occurred while creating your portal");this.signOut()}async joinPortal(e){let t;try{t=await this.restGateway.get("/portals/"+e)}catch(e){throw new c.PortalJoinError("Could not contact server to join the portal")}if(t.ok){const{hostPeerId:r}=t.body,o=new a({id:e,hostPeerId:r,peerPool:this.peerPool,connectionTimeout:this.connectionTimeout,tetherDisconnectWindow:this.tetherDisconnectWindow});return await o.initialize(),await o.join(),this.didCreateOrJoinPortal(o),o}if(401!==t.status)throw new c.PortalNotFoundError;this.signOut()}onConnectionError(e){return this.emitter.on("connection-error",e)}onSignInChange(e){return this.emitter.on("sign-in-change",e)}getClientId(){if(!this.clientId){const e="00:00:00:00:00:00",t=o.networkInterfaces();let r;for(const o in t){const n=t[o][0];if(n&&!n.internal&&n.mac!==e){r=n.mac;break}}if(r){const e=r.split(":").map(e=>Buffer.from(e,"hex").readUInt8());this.clientId=n({node:e})+"."+i()}else this.clientId=i()+"."+i()}return this.clientId}peerPoolDidError(e){e instanceof c.InvalidAuthenticationTokenError?this.signOut():this.emitter.emit("connection-error",e)}}},function(e,t,r){var o,n,i=r(38),s=r(39),a=0,c=0;e.exports=function(e,t,r){var p=t&&r||0,d=t||[],l=(e=e||{}).node||o,u=void 0!==e.clockseq?e.clockseq:n;if(null==l||null==u){var g=i();null==l&&(l=o=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==u&&(u=n=16383&(g[6]<<8|g[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:c+1,y=h-a+(f-c)/1e4;if(y<0&&void 0===e.clockseq&&(u=u+1&16383),(y<0||h>a)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,c=f,n=u;var m=(1e4*(268435455&(h+=122192928e5))+f)%4294967296;d[p++]=m>>>24&255,d[p++]=m>>>16&255,d[p++]=m>>>8&255,d[p++]=255&m;var S=h/4294967296*1e4&268435455;d[p++]=S>>>8&255,d[p++]=255&S,d[p++]=S>>>24&15|16,d[p++]=S>>>16&255,d[p++]=u>>>8|128,d[p++]=255&u;for(var b=0;b<6;++b)d[p+b]=l[b];return t||s(d)}},function(e,t,r){var o=r(38),n=r(39);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||n(s)}},function(e,t,r){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=r(26),s=r(41),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disposed=!1,this.clear()}return n(e,null,[{key:"onEventHandlerException",value:function(e){var t=this;return 0===this.exceptionHandlers.length&&(this.dispatch=this.exceptionHandlingDispatch),this.exceptionHandlers.push(e),new i((function(){if(t.exceptionHandlers.splice(t.exceptionHandlers.indexOf(e),1),0===t.exceptionHandlers.length)return t.dispatch=t.simpleDispatch}))}},{key:"simpleDispatch",value:function(e,t){return e(t)}},{key:"exceptionHandlingDispatch",value:function(e,t){try{return e(t)}catch(e){return this.exceptionHandlers.map((function(t){return t(e)}))}}}]),n(e,[{key:"clear",value:function(){null!=this.subscriptions&&this.subscriptions.dispose(),this.subscriptions=new s,this.handlersByEventName={}}},{key:"dispose",value:function(){this.subscriptions.dispose(),this.handlersByEventName=null,this.disposed=!0}},{key:"on",value:function(e,t,r){var o=this;if(null==r&&(r=!1),this.disposed)throw new Error("Emitter has been disposed");if("function"!=typeof t)throw new Error("Handler must be a function");this.handlersByEventName[e]?r?this.handlersByEventName[e].unshift(t):this.handlersByEventName[e].push(t):this.handlersByEventName[e]=[t];var n=new i((function(){return o.subscriptions.remove(n),o.off(e,t)}));return this.subscriptions.add(n),n}},{key:"once",value:function(e,t,r){null==r&&(r=!1);var o=this.on(e,(function(e){return o.dispose(),t(e)}),r);return o}},{key:"preempt",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){if(!this.disposed){var r=this.handlersByEventName[e];if(r){var o=r.indexOf(t);o>=0&&r.splice(o,1),0===r.length&&delete this.handlersByEventName[e]}}}},{key:"emit",value:function(e,t){var r=this.handlersByEventName&&this.handlersByEventName[e];if(r)for(var o=r.slice(),n=0;n<o.length;n++)this.constructor.dispatch(o[n],t)}},{key:"emitAsync",value:function(e,t){var r=this,o=this.handlersByEventName&&this.handlersByEventName[e];if(o){var n=o.map((function(e){return r.constructor.dispatch(e,t)}));return Promise.all(n).then((function(){}))}return Promise.resolve()}},{key:"getEventNames",value:function(){return Object.keys(this.handlersByEventName)}},{key:"listenerCountForEventName",value:function(e){var t=this.handlersByEventName[e];return null==t?0:t.length}},{key:"getTotalListenerCount",value:function(){for(var e=0,t=Object.keys(this.handlersByEventName),r=0;r<t.length;r++){var o=t[r];e+=this.handlersByEventName[o].length}return e}}]),e}();a.dispatch=a.simpleDispatch,a.exceptionHandlers=[],e.exports=a},function(e,t,r){"use strict";var o=r(80);e.exports=o({window:global.window})},function(e,t,r){"use strict";var o=r(6);e.exports=function(e,t){var n=e&&e.window,i={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);var a=o.log,c=o.detectBrowser(n),p=r(81)||null,d=r(83)||null,l=r(86)||null,u=r(88)||null,g=r(89)||null,h={browserDetails:c,commonShim:g,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(c.browser){case"chrome":if(!p||!p.shimPeerConnection||!i.shimChrome)return a("Chrome shim is not included in this adapter release."),h;a("adapter.js shimming chrome."),h.browserShim=p,g.shimCreateObjectURL(n),p.shimGetUserMedia(n),p.shimMediaStream(n),p.shimSourceObject(n),p.shimPeerConnection(n),p.shimOnTrack(n),p.shimAddTrackRemoveTrack(n),p.shimGetSendersWithDtmf(n),g.shimRTCIceCandidate(n),g.shimMaxMessageSize(n),g.shimSendThrowTypeError(n);break;case"firefox":if(!l||!l.shimPeerConnection||!i.shimFirefox)return a("Firefox shim is not included in this adapter release."),h;a("adapter.js shimming firefox."),h.browserShim=l,g.shimCreateObjectURL(n),l.shimGetUserMedia(n),l.shimSourceObject(n),l.shimPeerConnection(n),l.shimOnTrack(n),l.shimRemoveStream(n),g.shimRTCIceCandidate(n),g.shimMaxMessageSize(n),g.shimSendThrowTypeError(n);break;case"edge":if(!d||!d.shimPeerConnection||!i.shimEdge)return a("MS edge shim is not included in this adapter release."),h;a("adapter.js shimming edge."),h.browserShim=d,g.shimCreateObjectURL(n),d.shimGetUserMedia(n),d.shimPeerConnection(n),d.shimReplaceTrack(n),g.shimMaxMessageSize(n),g.shimSendThrowTypeError(n);break;case"safari":if(!u||!i.shimSafari)return a("Safari shim is not included in this adapter release."),h;a("adapter.js shimming safari."),h.browserShim=u,g.shimCreateObjectURL(n),u.shimRTCIceServerUrls(n),u.shimCallbacksAPI(n),u.shimLocalStreamsAPI(n),u.shimRemoteStreamsAPI(n),u.shimTrackEventTransceiver(n),u.shimGetUserMedia(n),u.shimCreateOfferLegacy(n),g.shimRTCIceCandidate(n),g.shimMaxMessageSize(n),g.shimSendThrowTypeError(n);break;default:a("Unsupported browser!")}return h}},function(e,t,r){"use strict";var o=r(6),n=o.log;e.exports={shimGetUserMedia:r(82),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return r._ontrackpoly||(r._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(o){var n;n=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===o.track.id})):{track:o.track};var i=new Event("track");i.track=o.track,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],r.dispatchEvent(i)})),t.stream.getTracks().forEach((function(o){var n;n=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===o.id})):{track:o};var i=new Event("track");i.track=o,i.receiver=n,i.transceiver={receiver:n},i.streams=[t.stream],r.dispatchEvent(i)}))},r.addEventListener("addstream",r._ontrackpoly)),t.apply(r,arguments)}}else"RTCRtpTransceiver"in e||o.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||(e.transceiver={receiver:e.receiver}),e}))},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,o){var n=this,i=r.apply(n,arguments);return i||(i=t(n,e),n._senders.push(i)),i};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;o.apply(t,arguments);var r=t._senders.indexOf(e);-1!==r&&t._senders.splice(r,1)}}var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;r._senders=r._senders||[],n.apply(r,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],i.apply(t,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(e,[]);return t.forEach((function(t){t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var r=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",(function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)})),e.addEventListener("removetrack",(function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)}))):this.src=""}})},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var o=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(o)&&this._shimmedLocalStreams[r.id].push(o):this._shimmedLocalStreams[r.id]=[r,o],o};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var o=t.getSenders();r.apply(this,arguments);var n=t.getSenders().filter((function(e){return-1===o.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(n)};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],o.apply(this,arguments)};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var o=t._shimmedLocalStreams[r].indexOf(e);-1!==o&&t._shimmedLocalStreams[r].splice(o,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),n.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){var t=o.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!r._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());r._streams[t.id]=o,r._reverseStreams[o.id]=t,t=o}n.apply(r,[t])};var i=e.RTCPeerConnection.prototype.removeStream;function s(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var o=e._reverseStreams[t],n=e._streams[o.id];r=r.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function a(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var o=e._reverseStreams[t],n=e._streams[o.id];r=r.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var o=this;if("closed"===o.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var i=o.getSenders().find((function(e){return e.track===t}));if(i)throw new DOMException("Track already exists.","InvalidAccessError");o._streams=o._streams||{},o._reverseStreams=o._reverseStreams||{};var s=o._streams[r.id];if(s)s.addTrack(t),Promise.resolve().then((function(){o.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);o._streams[r.id]=a,o._reverseStreams[a.id]=r,o.addStream(a)}return o.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments,o=arguments.length&&"function"==typeof arguments[0];return o?r.apply(e,[function(r){var o=s(e,r);t[0].apply(null,[o])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(e,arguments).then((function(t){return s(e,t)}))}}));var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;return arguments.length&&arguments[0].type?(arguments[0]=a(e,arguments[0]),c.apply(e,arguments)):c.apply(e,arguments)};var p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=p.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===r))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");r._streams=r._streams||{},Object.keys(r._streams).forEach((function(o){r._streams[o].getTracks().find((function(t){return e.track===t}))&&(t=r._streams[o])})),t&&(1===t.getTracks().length?r.removeStream(r._reverseStreams[t.id]):t.removeTrack(e.track),r.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(e){var t=o.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection)e.RTCPeerConnection=function(t,r){return n("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,r)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});else{var r=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,n.push(s)):n.push(e.iceServers[i])}e.iceServers=n}return new r(e,t)},e.RTCPeerConnection.prototype=r.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,r){var o=this,n=arguments;if(arguments.length>0&&"function"==typeof e)return i.apply(this,arguments);if(0===i.length&&(0===arguments.length||"function"!=typeof arguments[0]))return i.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)})),t[r.id]=r})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){n[1](a(s(e)))};return i.apply(this,[c,arguments[0]])}return new Promise((function(e,t){i.apply(o,[function(t){e(a(s(t)))},t])})).then(t,r)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,o=new Promise((function(o,n){r.apply(t,[e[0],o,n])}));return e.length<2?o:o.then((function(){e[1].apply(null,[])}),(function(t){e.length>=3&&e[2].apply(null,[t])}))}})),t.version<52&&["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise((function(o,n){r.apply(e,[o,n,t])}))}return r.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}},function(e,t,r){"use strict";var o=r(6),n=o.log;e.exports=function(e){var t=o.detectBrowser(e),r=e&&e.navigator,i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var o="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==o.exact&&"number"==typeof o.exact&&(o.min=o.max=o.exact);var n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==o.ideal){t.optional=t.optional||[];var i={};"number"==typeof o.ideal?(i[n("min",r)]=o.ideal,t.optional.push(i),(i={})[n("max",r)]=o.ideal,t.optional.push(i)):(i[n("",r)]=o.ideal,t.optional.push(i))}void 0!==o.exact&&"number"!=typeof o.exact?(t.mandatory=t.mandatory||{},t.mandatory[n("",r)]=o.exact):["min","max"].forEach((function(e){void 0!==o[e]&&(t.mandatory=t.mandatory||{},t.mandatory[n(e,r)]=o[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var c,p=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||p))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?c=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(c=["front"]),c)return r.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return c.some((function(t){return-1!==e.label.toLowerCase().indexOf(t)}))}));return!r&&t.length&&-1!==c.indexOf("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=a.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=i(e.video),n("chrome: "+JSON.stringify(e)),o(e)}));e.video=i(e.video)}return n("chrome: "+JSON.stringify(e)),o(e)},a=function(e){return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};r.getUserMedia=function(e,t,o){s(e,(function(e){r.webkitGetUserMedia(e,t,(function(e){o&&o(a(e))}))}))};var c=function(e){return new Promise((function(t,o){r.getUserMedia(e,t,o)}))};if(r.mediaDevices||(r.mediaDevices={getUserMedia:c,enumerateDevices:function(){return new Promise((function(t){var r={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources((function(e){t(e.map((function(e){return{label:e.label,kind:r[e.kind],deviceId:e.id,groupId:""}})))}))}))},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),r.mediaDevices.getUserMedia){var p=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return p(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}else r.mediaDevices.getUserMedia=function(e){return c(e)};void 0===r.mediaDevices.addEventListener&&(r.mediaDevices.addEventListener=function(){n("Dummy mediaDevices.addEventListener called.")}),void 0===r.mediaDevices.removeEventListener&&(r.mediaDevices.removeEventListener=function(){n("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,r){"use strict";var o=r(6),n=r(84);e.exports={shimGetUserMedia:r(85),shimPeerConnection:function(e){var t=o.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender),e.RTCPeerConnection=n(e,t.version)},shimReplaceTrack:function(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},function(e,t,r){"use strict";var o=r(43);function n(e,t,r,n,i){var s=o.writeRtpDescription(e.kind,t);if(s+=o.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=o.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(n?n.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+"\r\n"),s}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},o=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},n=function(e,t,r,n){var i=o(e.parameters.apt,r),s=o(t.parameters.apt,n);return i&&s&&i.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(o){for(var i=0;i<t.codecs.length;i++){var s=t.codecs[i];if(o.name.toLowerCase()===s.name.toLowerCase()&&o.clockRate===s.clockRate){if("rtx"===o.name.toLowerCase()&&o.parameters&&s.parameters.apt&&!n(o,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(o.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<o.rtcpFeedback.length;t++)if(o.rtcpFeedback[t].type===e.type&&o.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var o=0;o<t.headerExtensions.length;o++){var n=t.headerExtensions[o];if(e.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function p(t,r,o,n){var i=new Event("track");i.track=r,i.receiver=o,i.transceiver={receiver:o},i.streams=n,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var d=function(r){var n=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){n[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var o=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof o;return n&&(o=[o]),o=o.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=n?o[0]:o,!!o.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=o.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(d.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(d.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),d.prototype.onicecandidate=null,d.prototype.onaddstream=null,d.prototype.ontrack=null,d.prototype.onremovestream=null,d.prototype.onsignalingstatechange=null,d.prototype.oniceconnectionstatechange=null,d.prototype.onconnectionstatechange=null,d.prototype.onicegatheringstatechange=null,d.prototype.onnegotiationneeded=null,d.prototype.ondatachannel=null,d.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},d.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},d.prototype.getConfiguration=function(){return this._config},d.prototype.getLocalStreams=function(){return this.localStreams},d.prototype.getRemoteStreams=function(){return this.remoteStreams},d.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,o={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)o.iceTransport=this.transceivers[0].iceTransport,o.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();o.iceTransport=n.iceTransport,o.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(o),o},d.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var o;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(o=this.transceivers[n]);return o||(o=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),o.track=t,o.stream=r,o.rtpSender=new e.RTCRtpSender(t,o.dtlsTransport),o.rtpSender},d.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var o=e.clone();e.getTracks().forEach((function(e,t){var r=o.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),o.getTracks().forEach((function(e){r.addTrack(e,o)}))}},d.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var o=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(o)&&this.localStreams.indexOf(o)>-1&&this.localStreams.splice(this.localStreams.indexOf(o),1),this._maybeFireNegotiationNeeded()},d.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},d.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},d.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},d.prototype._createIceGatherer=function(t,r){var o=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?"completed":"gathering",null!==o.transceivers[t].bufferedCandidateEvents&&o.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),n},d.prototype._gather=function(t,r){var n=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(n.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),a.component=1,a.ufrag=i.getLocalParameters().usernameFragment;var p=o.writeCandidate(a);s.candidate=Object.assign(s.candidate,o.parseCandidate(p)),s.candidate.candidate=p,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=o.getMediaSections(n._localDescription.sdp);d[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",n._localDescription.sdp=o.getDescription(n._localDescription.sdp)+d.join("");var l=n.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),c||n._dispatchEvent("icecandidate",s),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},d.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var o=new e.RTCDtlsTransport(r);return o.ondtlsstatechange=function(){t._updateConnectionState()},o.onerror=function(){Object.defineProperty(o,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:o}},d.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var o=this.transceivers[e].dtlsTransport;o&&(delete o.ondtlsstatechange,delete o.onerror,delete this.transceivers[e].dtlsTransport)},d.prototype._transceive=function(e,r,n){var s=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:o.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),n&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},d.prototype.setLocalDescription=function(e){var t,r,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=o.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=o.parseRtpParameters(e);n.transceivers[t].localCapabilities=r})),n.transceivers.forEach((function(e,t){n._gather(e.mid,t)}));else if("answer"===e.type){t=o.splitSections(n._remoteDescription.sdp),r=t.shift();var a=o.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=n.transceivers[t],c=s.iceGatherer,p=s.iceTransport,d=s.dtlsTransport,l=s.localCapabilities,u=s.remoteCapabilities;if(!(o.isRejected(e)&&0===o.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var g=o.getIceParameters(e,r),h=o.getDtlsParameters(e,r);a&&(h.role="server"),n.usingBundle&&0!==t||(n._gather(s.mid,t),"new"===p.state&&p.start(c,g,a?"controlling":"controlled"),"new"===d.state&&d.start(h));var f=i(l,u);n._transceive(s,f.codecs.length>0,!1)}}))}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},d.prototype.setRemoteDescription=function(n){var d=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(c("TypeError",'Unsupported type "'+n.type+'"'));if(!s("setRemoteDescription",n.type,d.signalingState)||d._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+n.type+" in state "+d.signalingState));var l={};d.remoteStreams.forEach((function(e){l[e.id]=e}));var u=[],g=o.splitSections(n.sdp),h=g.shift(),f=o.matchPrefix(h,"a=ice-lite").length>0,y=o.matchPrefix(h,"a=group:BUNDLE ").length>0;d.usingBundle=y;var m=o.matchPrefix(h,"a=ice-options:")[0];return d.canTrickleIceCandidates=!!m&&m.substr(14).split(" ").indexOf("trickle")>=0,g.forEach((function(s,c){var p=o.splitLines(s),g=o.getKind(s),m=o.isRejected(s)&&0===o.matchPrefix(s,"a=bundle-only").length,S=p[0].substr(2).split(" ")[2],b=o.getDirection(s,h),_=o.parseMsid(s),v=o.getMid(s)||o.generateIdentifier();if(m||"application"===g&&("DTLS/SCTP"===S||"UDP/DTLS/SCTP"===S))d.transceivers[c]={mid:v,kind:g,protocol:S,rejected:!0};else{var E,O,T,w,M,I,R,P,C;!m&&d.transceivers[c]&&d.transceivers[c].rejected&&(d.transceivers[c]=d._createTransceiver(g,!0));var U,B,A=o.parseRtpParameters(s);m||(U=o.getIceParameters(s,h),(B=o.getDtlsParameters(s,h)).role="client"),R=o.parseRtpEncodingParameters(s);var x=o.parseRtcpParameters(s),k=o.matchPrefix(s,"a=end-of-candidates",h).length>0,D=o.matchPrefix(s,"a=candidate:").map((function(e){return o.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===n.type||"answer"===n.type)&&!m&&y&&c>0&&d.transceivers[c]&&(d._disposeIceAndDtlsTransports(c),d.transceivers[c].iceGatherer=d.transceivers[0].iceGatherer,d.transceivers[c].iceTransport=d.transceivers[0].iceTransport,d.transceivers[c].dtlsTransport=d.transceivers[0].dtlsTransport,d.transceivers[c].rtpSender&&d.transceivers[c].rtpSender.setTransport(d.transceivers[0].dtlsTransport),d.transceivers[c].rtpReceiver&&d.transceivers[c].rtpReceiver.setTransport(d.transceivers[0].dtlsTransport)),"offer"!==n.type||m){if("answer"===n.type&&!m){O=(E=d.transceivers[c]).iceGatherer,T=E.iceTransport,w=E.dtlsTransport,M=E.rtpReceiver,I=E.sendEncodingParameters,P=E.localCapabilities,d.transceivers[c].recvEncodingParameters=R,d.transceivers[c].remoteCapabilities=A,d.transceivers[c].rtcpParameters=x,D.length&&"new"===T.state&&(!f&&!k||y&&0!==c?D.forEach((function(e){a(E.iceTransport,e)})):T.setRemoteCandidates(D)),y&&0!==c||("new"===T.state&&T.start(O,U,"controlling"),"new"===w.state&&w.start(B)),!i(E.localCapabilities,E.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&E.sendEncodingParameters[0].rtx&&delete E.sendEncodingParameters[0].rtx,d._transceive(E,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!M||"sendrecv"!==b&&"sendonly"!==b?delete E.rtpReceiver:(C=M.track,_?(l[_.stream]||(l[_.stream]=new e.MediaStream),r(C,l[_.stream]),u.push([C,M,l[_.stream]])):(l.default||(l.default=new e.MediaStream),r(C,l.default),u.push([C,M,l.default])))}}else{(E=d.transceivers[c]||d._createTransceiver(g)).mid=v,E.iceGatherer||(E.iceGatherer=d._createIceGatherer(c,y)),D.length&&"new"===E.iceTransport.state&&(!k||y&&0!==c?D.forEach((function(e){a(E.iceTransport,e)})):E.iceTransport.setRemoteCandidates(D)),P=e.RTCRtpReceiver.getCapabilities(g),t<15019&&(P.codecs=P.codecs.filter((function(e){return"rtx"!==e.name}))),I=E.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var N,L=!1;if("sendrecv"===b||"sendonly"===b){if(L=!E.rtpReceiver,M=E.rtpReceiver||new e.RTCRtpReceiver(E.dtlsTransport,g),L)C=M.track,_&&"-"===_.stream||(_?(l[_.stream]||(l[_.stream]=new e.MediaStream,Object.defineProperty(l[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(C,"id",{get:function(){return _.track}}),N=l[_.stream]):(l.default||(l.default=new e.MediaStream),N=l.default)),N&&(r(C,N),E.associatedRemoteMediaStreams.push(N)),u.push([C,M,N])}else E.rtpReceiver&&E.rtpReceiver.track&&(E.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===E.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),E.associatedRemoteMediaStreams=[]);E.localCapabilities=P,E.remoteCapabilities=A,E.rtpReceiver=M,E.rtcpParameters=x,E.sendEncodingParameters=I,E.recvEncodingParameters=R,d._transceive(d.transceivers[c],!1,L)}}})),void 0===d._dtlsRole&&(d._dtlsRole="offer"===n.type?"active":"passive"),d._remoteDescription={type:n.type,sdp:n.sdp},"offer"===n.type?d._updateSignalingState("have-remote-offer"):d._updateSignalingState("stable"),Object.keys(l).forEach((function(t){var r=l[t];if(r.getTracks().length){if(-1===d.remoteStreams.indexOf(r)){d.remoteStreams.push(r);var o=new Event("addstream");o.stream=r,e.setTimeout((function(){d._dispatchEvent("addstream",o)}))}u.forEach((function(e){var t=e[0],o=e[1];r.id===e[2].id&&p(d,t,o,[r])}))}})),u.forEach((function(e){e[2]||p(d,e[0],e[1],[])})),e.setTimeout((function(){d&&d.transceivers&&d.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},d.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},d.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},d.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},d.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},d.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},d.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,s=r.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(i=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));i>0||s>0;)i>0&&(r._createTransceiver("audio"),i--),s>0&&(r._createTransceiver("video"),s--);var p=o.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(n,i){var s=n.track,a=n.kind,c=n.mid||o.generateIdentifier();n.mid=c,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle));var p=e.RTCRtpSender.getCapabilities(a);t<15019&&(p.codecs=p.codecs.filter((function(e){return"rtx"!==e.name}))),p.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),p.headerExtensions.forEach((function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];s&&t>=15019&&"video"===a&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,a)),n.localCapabilities=p,n.sendEncodingParameters=d})),"max-compat"!==r._config.bundlePolicy&&(p+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),p+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){p+=n(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),p+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,p+="a="+o.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(p+="a=end-of-candidates\r\n"))}));var d=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(d)},d.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var s=o.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(s+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=o.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,o){if(!(o+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var p=i(e.localCapabilities,e.remoteCapabilities);!p.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=n(e,p,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var p=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(p)},d.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(n,i){if(!r._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var p=0;p<r.transceivers.length;p++)if(r.transceivers[p].mid===e.sdpMid){s=p;break}var d=r.transceivers[s];if(!d)return i(c("OperationError","Can not add ICE candidate"));if(d.rejected)return n();var l=Object.keys(e.candidate).length>0?o.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return n();if(l.component&&1!==l.component)return n();if((0===s||s>0&&d.iceTransport!==r.transceivers[0].iceTransport)&&!a(d.iceTransport,l))return i(c("OperationError","Can not add ICE candidate"));var u=e.candidate.trim();0===u.indexOf("a=")&&(u=u.substr(2)),(t=o.getMediaSections(r._remoteDescription.sdp))[s]+="a="+(l.type?u:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=o.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var g=0;g<r.transceivers.length&&(r.transceivers[g].rejected||(r.transceivers[g].iceTransport.addRemoteCandidate({}),(t=o.getMediaSections(r._remoteDescription.sdp))[g]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=o.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));g++);n()}))},d.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var o=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&o.push(e[t].getStats())}))})),Promise.all(o).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var o=r.prototype.getStats;r.prototype.getStats=function(){return o.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var o;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(o=e[r]).type]||o.type,t.set(r,e[r])})),t}))}}}));var l=["createOffer","createAnswer"];return l.forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=d.prototype[e];d.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),d}},function(e,t,r){"use strict";e.exports=function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},function(e,t,r){"use strict";var o=r(6);e.exports={shimGetUserMedia:r(87),shimOnTrack:function(e){"object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)&&Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.transceiver={receiver:r.receiver},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&e.HTMLMediaElement&&!("srcObject"in e.HTMLMediaElement.prototype)&&Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}})},shimPeerConnection:function(e){var t=o.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(r,o){if(t.version<38&&r&&r.iceServers){for(var n=[],i=0;i<r.iceServers.length;i++){var s=r.iceServers[i];if(s.hasOwnProperty("urls"))for(var a=0;a<s.urls.length;a++){var c={url:s.urls[a]};0===s.urls[a].indexOf("turn")&&(c.username=s.username,c.credential=s.credential),n.push(c)}else n.push(r.iceServers[i])}r.iceServers=n}return new e.mozRTCPeerConnection(r,o)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,o){return i.apply(this,[e||null]).then((function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach((function(r){t.set(r,e[r]),t[r]=e[r]})),t}(e)),t.version<53&&!r)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,o)}}},shimRemoveStream:function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;o.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&-1!==e.getTracks().indexOf(r.track)&&t.removeTrack(r)}))})}}},function(e,t,r){"use strict";var o=r(6),n=o.log;e.exports=function(e){var t=o.detectBrowser(e),r=e&&e.navigator,i=e&&e.MediaStreamTrack,s=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},a=function(e,o,i){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var o=e[r]="object"==typeof e[r]?e[r]:{ideal:e[r]};if(void 0===o.min&&void 0===o.max&&void 0===o.exact||t.push(r),void 0!==o.exact&&("number"==typeof o.exact?o.min=o.max=o.exact:e[r]=o.exact,delete o.exact),void 0!==o.ideal){e.advanced=e.advanced||[];var n={};"number"==typeof o.ideal?n[r]={min:o.ideal,max:o.ideal}:n[r]=o.ideal,e.advanced.push(n),delete o.ideal,Object.keys(o).length||delete e[r]}}})),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(n("spec: "+JSON.stringify(e)),e.audio&&(e.audio=a(e.audio)),e.video&&(e.video=a(e.video)),n("ff37: "+JSON.stringify(e))),r.mozGetUserMedia(e,o,(function(e){i(s(e))}))};if(r.mediaDevices||(r.mediaDevices={getUserMedia:function(e){return new Promise((function(t,r){a(e,t,r)}))},addEventListener:function(){},removeEventListener:function(){}}),r.mediaDevices.enumerateDevices=r.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},t.version<41){var c=r.mediaDevices.enumerateDevices.bind(r.mediaDevices);r.mediaDevices.enumerateDevices=function(){return c().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}if(t.version<49){var p=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return p(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("The object can not be found here.","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}}if(!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var d=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),l(e)},i&&i.prototype.getSettings){var u=i.prototype.getSettings;i.prototype.getSettings=function(){var e=u.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var g=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),g.apply(this,[e])}}}r.getUserMedia=function(e,n,i){if(t.version<44)return a(e,n,i);o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(n,i)}}},function(e,t,r){"use strict";var o=r(6);e.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach((function(r){r.id===e&&(t=r)})),this._remoteStreams&&this._remoteStreams.forEach((function(r){r.id===e&&(t=r)})),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var r=this;e.getTracks().forEach((function(o){t.call(r,o,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?-1===this._localStreams.indexOf(r)&&this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var r=this,o=e.getTracks();this.getSenders().forEach((function(e){-1!==o.indexOf(e.track)&&r.removeTrack(e)}))}})}},shimRemoteStreamsAPI:function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(e)>=0)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}}))},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,o=t.createAnswer,n=t.setLocalDescription,i=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var o=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[o]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],n=o.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};var a=function(e,t,r){var o=n.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o};t.setLocalDescription=a,a=function(e,t,r){var o=i.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.setRemoteDescription=a,a=function(e,t,r){var o=s.apply(this,[e]);return r?(o.then(t,r),Promise.resolve()):o},t.addIceCandidate=a}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,o){t.mediaDevices.getUserMedia(e).then(r,o)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var s=e.iceServers[i];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,n.push(s)):n.push(e.iceServers[i])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var r=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var o=r.getTransceivers().find((function(e){return e.sender.track&&"audio"===e.sender.track.kind}));!1===e.offerToReceiveAudio&&o?"sendrecv"===o.direction?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":"recvonly"===o.direction&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):!0!==e.offerToReceiveAudio||o||r.addTransceiver("audio"),void 0!==e.offerToReceiveAudio&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=r.getTransceivers().find((function(e){return e.sender.track&&"video"===e.sender.track.kind}));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection("sendonly"):"recvonly"===n.direction&&n.setDirection("inactive"):!0!==e.offerToReceiveVideo||n||r.addTransceiver("video")}return t.apply(r,arguments)}}}},function(e,t,r){"use strict";var o=r(43),n=r(6);e.exports={shimRTCIceCandidate:function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),n=o.parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,n.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var r=t.createObjectURL.bind(t),o=t.revokeObjectURL.bind(t),i=new Map,s=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++s;return i.set(t,e),n.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return r(e)},t.revokeObjectURL=function(e){o(e),i.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,a.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=i.get(arguments[1])||null),c.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=n.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){var t=o.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r},s=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:57===t.version?65535:65536),r},a=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var i=o.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;if(e._sctp=null,r(arguments[0])){var t,o=i(arguments[0]),n=s(o),p=a(arguments[0],o);t=0===n&&0===p?Number.POSITIVE_INFINITY:0===n||0===p?Math.max(n,p):Math.min(n,p);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return t}}),e._sctp=d}return c.apply(e,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=this,r=t.apply(e,arguments),o=r.send;return r.send=function(){var t=this,r=arguments[0],n=r.length||r.size||r.byteLength;if(n>e.sctp.maxMessageSize)throw new DOMException("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)","TypeError");return o.apply(t,arguments)},r}}}}},function(e,t,r){const o=r(7);e.exports=class{constructor({localPeerId:e,remotePeerId:t,restGateway:r,testEpoch:o}){this.localPeerId=e,this.remotePeerId=t,this.restGateway=r,this.testEpoch=o,this.incomingSequenceNumber=0,this.outgoingSequenceNumber=0,this.incomingSignals={}}async send(e){const t={senderId:this.localPeerId,sequenceNumber:this.outgoingSequenceNumber++,signal:e};null!=this.testEpoch&&(t.testEpoch=this.testEpoch);const{ok:r,status:n,body:i}=await this.restGateway.post(`/peers/${this.remotePeerId}/signals`,t);if(401===n)throw new o.InvalidAuthenticationTokenError("The provided authentication token is invalid");if(!r)throw new o.PubSubConnectionError("Error signalling peer: "+i.message)}async receiveMessage({testEpoch:e,sequenceNumber:t,signal:r}){if(!(this.testEpoch&&this.testEpoch!==e||(this.incomingSignals[t]=r,this.receivingSignals))){for(this.receivingSignals=!0;;){const e=this.incomingSignals[this.incomingSequenceNumber];if(!e)break;delete this.incomingSignals[this.incomingSequenceNumber],await this.receive(e),this.incomingSequenceNumber++}this.receivingSignals=!1}}}},function(e,t,r){var o=r(27),n=o,i=Function("return this")();n.exportSymbol("proto.Operation",null,i),n.exportSymbol("proto.Operation.MarkersUpdate",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.LayerOperation",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.LogicalRange",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.MarkerOperation",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.MarkerUpdate",null,i),n.exportSymbol("proto.Operation.Point",null,i),n.exportSymbol("proto.Operation.Splice",null,i),n.exportSymbol("proto.Operation.Splice.Deletion",null,i),n.exportSymbol("proto.Operation.Splice.Insertion",null,i),n.exportSymbol("proto.Operation.SpliceId",null,i),n.exportSymbol("proto.Operation.Undo",null,i),proto.Operation=function(e){o.Message.initialize(this,e,0,-1,null,proto.Operation.oneofGroups_)},n.inherits(proto.Operation,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.displayName="proto.Operation"),proto.Operation.oneofGroups_=[[1,2,3]],proto.Operation.VariantCase={VARIANT_NOT_SET:0,SPLICE:1,UNDO:2,MARKERS_UPDATE:3},proto.Operation.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.Operation.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.Operation.prototype.toObject=function(e){return proto.Operation.toObject(e,this)},proto.Operation.toObject=function(e,t){var r,o={splice:(r=t.getSplice())&&proto.Operation.Splice.toObject(e,r),undo:(r=t.getUndo())&&proto.Operation.Undo.toObject(e,r),markersUpdate:(r=t.getMarkersUpdate())&&proto.Operation.MarkersUpdate.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation;return proto.Operation.deserializeBinaryFromReader(r,t)},proto.Operation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.Splice;t.readMessage(r,proto.Operation.Splice.deserializeBinaryFromReader),e.setSplice(r);break;case 2:r=new proto.Operation.Undo;t.readMessage(r,proto.Operation.Undo.deserializeBinaryFromReader),e.setUndo(r);break;case 3:r=new proto.Operation.MarkersUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.deserializeBinaryFromReader),e.setMarkersUpdate(r);break;default:t.skipField()}}return e},proto.Operation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSplice())&&t.writeMessage(1,r,proto.Operation.Splice.serializeBinaryToWriter),null!=(r=e.getUndo())&&t.writeMessage(2,r,proto.Operation.Undo.serializeBinaryToWriter),null!=(r=e.getMarkersUpdate())&&t.writeMessage(3,r,proto.Operation.MarkersUpdate.serializeBinaryToWriter)},proto.Operation.Splice=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Splice,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Splice.displayName="proto.Operation.Splice"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.prototype.toObject=function(e){return proto.Operation.Splice.toObject(e,this)},proto.Operation.Splice.toObject=function(e,t){var r,o={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),insertion:(r=t.getInsertion())&&proto.Operation.Splice.Insertion.toObject(e,r),deletion:(r=t.getDeletion())&&proto.Operation.Splice.Deletion.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.Splice.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Splice;return proto.Operation.Splice.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=new proto.Operation.Splice.Insertion;t.readMessage(r,proto.Operation.Splice.Insertion.deserializeBinaryFromReader),e.setInsertion(r);break;case 3:r=new proto.Operation.Splice.Deletion;t.readMessage(r,proto.Operation.Splice.Deletion.deserializeBinaryFromReader),e.setDeletion(r);break;default:t.skipField()}}return e},proto.Operation.Splice.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Splice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getInsertion())&&t.writeMessage(2,r,proto.Operation.Splice.Insertion.serializeBinaryToWriter),null!=(r=e.getDeletion())&&t.writeMessage(3,r,proto.Operation.Splice.Deletion.serializeBinaryToWriter)},proto.Operation.Splice.Insertion=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Splice.Insertion,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Splice.Insertion.displayName="proto.Operation.Splice.Insertion"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Insertion.prototype.toObject=function(e){return proto.Operation.Splice.Insertion.toObject(e,this)},proto.Operation.Splice.Insertion.toObject=function(e,t){var r,n={text:o.Message.getFieldWithDefault(t,2,""),leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Splice.Insertion.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Splice.Insertion;return proto.Operation.Splice.Insertion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Insertion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=t.readString();e.setText(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 5:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 6:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;default:t.skipField()}}return e},proto.Operation.Splice.Insertion.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Splice.Insertion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Insertion.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getText()).length>0&&t.writeString(2,r),null!=(r=e.getLeftDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(5,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(6,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.Splice.Insertion.prototype.getText=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.Operation.Splice.Insertion.prototype.setText=function(e){o.Message.setProto3StringField(this,2,e)},proto.Operation.Splice.Insertion.prototype.getLeftDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.Splice.Insertion.prototype.setLeftDependencyId=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Insertion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasLeftDependencyId=function(){return null!=o.Message.getField(this,3)},proto.Operation.Splice.Insertion.prototype.getOffsetInLeftDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.Splice.Insertion.prototype.setOffsetInLeftDependency=function(e){o.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInLeftDependency=function(){return null!=o.Message.getField(this,4)},proto.Operation.Splice.Insertion.prototype.getRightDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,5)},proto.Operation.Splice.Insertion.prototype.setRightDependencyId=function(e){o.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Insertion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasRightDependencyId=function(){return null!=o.Message.getField(this,5)},proto.Operation.Splice.Insertion.prototype.getOffsetInRightDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,6)},proto.Operation.Splice.Insertion.prototype.setOffsetInRightDependency=function(e){o.Message.setWrapperField(this,6,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInRightDependency=function(){return null!=o.Message.getField(this,6)},proto.Operation.Splice.Deletion=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Splice.Deletion,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Splice.Deletion.displayName="proto.Operation.Splice.Deletion"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Deletion.prototype.toObject=function(e){return proto.Operation.Splice.Deletion.toObject(e,this)},proto.Operation.Splice.Deletion.toObject=function(e,t){var r,o={leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r),maxSeqsBySiteMap:(r=t.getMaxSeqsBySiteMap())?r.toObject(e,void 0):[]};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.Splice.Deletion.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Splice.Deletion;return proto.Operation.Splice.Deletion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Deletion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 3:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 4:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 5:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;case 6:r=e.getMaxSeqsBySiteMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.Operation.Splice.Deletion.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Splice.Deletion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Deletion.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getLeftDependencyId())&&t.writeMessage(2,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(3,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(4,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(5,r,proto.Operation.Point.serializeBinaryToWriter),(r=e.getMaxSeqsBySiteMap(!0))&&r.getLength()>0&&r.serializeBinary(6,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeUint32)},proto.Operation.Splice.Deletion.prototype.getLeftDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,2)},proto.Operation.Splice.Deletion.prototype.setLeftDependencyId=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.Splice.Deletion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasLeftDependencyId=function(){return null!=o.Message.getField(this,2)},proto.Operation.Splice.Deletion.prototype.getOffsetInLeftDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,3)},proto.Operation.Splice.Deletion.prototype.setOffsetInLeftDependency=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInLeftDependency=function(){return null!=o.Message.getField(this,3)},proto.Operation.Splice.Deletion.prototype.getRightDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,4)},proto.Operation.Splice.Deletion.prototype.setRightDependencyId=function(e){o.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Deletion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasRightDependencyId=function(){return null!=o.Message.getField(this,4)},proto.Operation.Splice.Deletion.prototype.getOffsetInRightDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,5)},proto.Operation.Splice.Deletion.prototype.setOffsetInRightDependency=function(e){o.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInRightDependency=function(){return null!=o.Message.getField(this,5)},proto.Operation.Splice.Deletion.prototype.getMaxSeqsBySiteMap=function(e){return o.Message.getMapField(this,6,e,null)},proto.Operation.Splice.Deletion.prototype.clearMaxSeqsBySiteMap=function(){this.getMaxSeqsBySiteMap().clear()},proto.Operation.Splice.prototype.getSpliceId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Splice.prototype.setSpliceId=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.Splice.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Splice.prototype.hasSpliceId=function(){return null!=o.Message.getField(this,1)},proto.Operation.Splice.prototype.getInsertion=function(){return o.Message.getWrapperField(this,proto.Operation.Splice.Insertion,2)},proto.Operation.Splice.prototype.setInsertion=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.Splice.prototype.clearInsertion=function(){this.setInsertion(void 0)},proto.Operation.Splice.prototype.hasInsertion=function(){return null!=o.Message.getField(this,2)},proto.Operation.Splice.prototype.getDeletion=function(){return o.Message.getWrapperField(this,proto.Operation.Splice.Deletion,3)},proto.Operation.Splice.prototype.setDeletion=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.Splice.prototype.clearDeletion=function(){this.setDeletion(void 0)},proto.Operation.Splice.prototype.hasDeletion=function(){return null!=o.Message.getField(this,3)},proto.Operation.Undo=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Undo,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Undo.displayName="proto.Operation.Undo"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Undo.prototype.toObject=function(e){return proto.Operation.Undo.toObject(e,this)},proto.Operation.Undo.toObject=function(e,t){var r,n={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),undoCount:o.Message.getFieldWithDefault(t,2,0)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Undo.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Undo;return proto.Operation.Undo.deserializeBinaryFromReader(r,t)},proto.Operation.Undo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=t.readUint32();e.setUndoCount(r);break;default:t.skipField()}}return e},proto.Operation.Undo.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Undo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Undo.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),0!==(r=e.getUndoCount())&&t.writeUint32(2,r)},proto.Operation.Undo.prototype.getSpliceId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Undo.prototype.setSpliceId=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.Undo.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Undo.prototype.hasSpliceId=function(){return null!=o.Message.getField(this,1)},proto.Operation.Undo.prototype.getUndoCount=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Operation.Undo.prototype.setUndoCount=function(e){o.Message.setProto3IntField(this,2,e)},proto.Operation.MarkersUpdate=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.displayName="proto.Operation.MarkersUpdate"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.toObject=function(e,t){var r,n={siteId:o.Message.getFieldWithDefault(t,1,0),layerOperationsMap:(r=t.getLayerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.LayerOperation.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate;return proto.Operation.MarkersUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSiteId(r);break;case 2:r=e.getLayerOperationsMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSiteId())&&t.writeUint32(1,r),(r=e.getLayerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.LayerOperation,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LayerOperation.displayName="proto.Operation.MarkersUpdate.LayerOperation"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LayerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LayerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.LayerOperation.toObject=function(e,t){var r,n={isDeletion:o.Message.getFieldWithDefault(t,1,!1),markerOperationsMap:(r=t.getMarkerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.MarkerOperation.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.LayerOperation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LayerOperation;return proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=e.getMarkerOperationsMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LayerOperation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),(r=e.getMarkerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getIsDeletion=function(){return o.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.LayerOperation.prototype.setIsDeletion=function(e){o.Message.setProto3BooleanField(this,1,e)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getMarkerOperationsMap=function(e){return o.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.MarkerOperation)},proto.Operation.MarkersUpdate.LayerOperation.prototype.clearMarkerOperationsMap=function(){this.getMarkerOperationsMap().clear()},proto.Operation.MarkersUpdate.MarkerOperation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.MarkerOperation,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerOperation.displayName="proto.Operation.MarkersUpdate.MarkerOperation"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerOperation.toObject=function(e,t){var r,n={isDeletion:o.Message.getFieldWithDefault(t,1,!1),markerUpdate:(r=t.getMarkerUpdate())&&proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerOperation;return proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=new proto.Operation.MarkersUpdate.MarkerUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader),e.setMarkerUpdate(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerOperation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),null!=(r=e.getMarkerUpdate())&&t.writeMessage(2,r,proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getIsDeletion=function(){return o.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setIsDeletion=function(e){o.Message.setProto3BooleanField(this,1,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getMarkerUpdate=function(){return o.Message.getWrapperField(this,proto.Operation.MarkersUpdate.MarkerUpdate,2)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setMarkerUpdate=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.clearMarkerUpdate=function(){this.setMarkerUpdate(void 0)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.hasMarkerUpdate=function(){return null!=o.Message.getField(this,2)},proto.Operation.MarkersUpdate.MarkerUpdate=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.MarkerUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerUpdate.displayName="proto.Operation.MarkersUpdate.MarkerUpdate"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerUpdate.toObject=function(e,t){var r,n={range:(r=t.getRange())&&proto.Operation.MarkersUpdate.LogicalRange.toObject(e,r),exclusive:o.Message.getFieldWithDefault(t,2,!1),reversed:o.Message.getFieldWithDefault(t,3,!1),tailed:o.Message.getFieldWithDefault(t,4,!1)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerUpdate;return proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.MarkersUpdate.LogicalRange;t.readMessage(r,proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader),e.setRange(r);break;case 2:r=t.readBool();e.setExclusive(r);break;case 3:r=t.readBool();e.setReversed(r);break;case 4:r=t.readBool();e.setTailed(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getRange())&&t.writeMessage(1,r,proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter),(r=e.getExclusive())&&t.writeBool(2,r),(r=e.getReversed())&&t.writeBool(3,r),(r=e.getTailed())&&t.writeBool(4,r)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getRange=function(){return o.Message.getWrapperField(this,proto.Operation.MarkersUpdate.LogicalRange,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setRange=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.clearRange=function(){this.setRange(void 0)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.hasRange=function(){return null!=o.Message.getField(this,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getExclusive=function(){return o.Message.getFieldWithDefault(this,2,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setExclusive=function(e){o.Message.setProto3BooleanField(this,2,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getReversed=function(){return o.Message.getFieldWithDefault(this,3,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setReversed=function(e){o.Message.setProto3BooleanField(this,3,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getTailed=function(){return o.Message.getFieldWithDefault(this,4,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setTailed=function(e){o.Message.setProto3BooleanField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.LogicalRange,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LogicalRange.displayName="proto.Operation.MarkersUpdate.LogicalRange"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LogicalRange.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LogicalRange.toObject(e,this)},proto.Operation.MarkersUpdate.LogicalRange.toObject=function(e,t){var r,o={startDependencyId:(r=t.getStartDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInStartDependency:(r=t.getOffsetInStartDependency())&&proto.Operation.Point.toObject(e,r),endDependencyId:(r=t.getEndDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInEndDependency:(r=t.getOffsetInEndDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.MarkersUpdate.LogicalRange.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LogicalRange;return proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setStartDependencyId(r);break;case 2:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInStartDependency(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setEndDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInEndDependency(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LogicalRange.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getStartDependencyId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInStartDependency())&&t.writeMessage(2,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getEndDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInEndDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getStartDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setStartDependencyId=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearStartDependencyId=function(){this.setStartDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasStartDependencyId=function(){return null!=o.Message.getField(this,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInStartDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInStartDependency=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInStartDependency=function(){this.setOffsetInStartDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInStartDependency=function(){return null!=o.Message.getField(this,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getEndDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setEndDependencyId=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearEndDependencyId=function(){this.setEndDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasEndDependencyId=function(){return null!=o.Message.getField(this,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInEndDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInEndDependency=function(e){o.Message.setWrapperField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInEndDependency=function(){this.setOffsetInEndDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInEndDependency=function(){return null!=o.Message.getField(this,4)},proto.Operation.MarkersUpdate.prototype.getSiteId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Operation.MarkersUpdate.prototype.setSiteId=function(e){o.Message.setProto3IntField(this,1,e)},proto.Operation.MarkersUpdate.prototype.getLayerOperationsMap=function(e){return o.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.LayerOperation)},proto.Operation.MarkersUpdate.prototype.clearLayerOperationsMap=function(){this.getLayerOperationsMap().clear()},proto.Operation.SpliceId=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.SpliceId,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.SpliceId.displayName="proto.Operation.SpliceId"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.SpliceId.prototype.toObject=function(e){return proto.Operation.SpliceId.toObject(e,this)},proto.Operation.SpliceId.toObject=function(e,t){var r={site:o.Message.getFieldWithDefault(t,1,0),seq:o.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.SpliceId.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.SpliceId;return proto.Operation.SpliceId.deserializeBinaryFromReader(r,t)},proto.Operation.SpliceId.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSite(r);break;case 2:r=t.readUint32();e.setSeq(r);break;default:t.skipField()}}return e},proto.Operation.SpliceId.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.SpliceId.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.SpliceId.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSite())&&t.writeUint32(1,r),0!==(r=e.getSeq())&&t.writeUint32(2,r)},proto.Operation.SpliceId.prototype.getSite=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Operation.SpliceId.prototype.setSite=function(e){o.Message.setProto3IntField(this,1,e)},proto.Operation.SpliceId.prototype.getSeq=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Operation.SpliceId.prototype.setSeq=function(e){o.Message.setProto3IntField(this,2,e)},proto.Operation.Point=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Point,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Point.displayName="proto.Operation.Point"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Point.prototype.toObject=function(e){return proto.Operation.Point.toObject(e,this)},proto.Operation.Point.toObject=function(e,t){var r={row:o.Message.getFieldWithDefault(t,1,0),column:o.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.Point.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Point;return proto.Operation.Point.deserializeBinaryFromReader(r,t)},proto.Operation.Point.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRow(r);break;case 2:r=t.readUint32();e.setColumn(r);break;default:t.skipField()}}return e},proto.Operation.Point.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Point.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Point.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRow())&&t.writeUint32(1,r),0!==(r=e.getColumn())&&t.writeUint32(2,r)},proto.Operation.Point.prototype.getRow=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Operation.Point.prototype.setRow=function(e){o.Message.setProto3IntField(this,1,e)},proto.Operation.Point.prototype.getColumn=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Operation.Point.prototype.setColumn=function(e){o.Message.setProto3IntField(this,2,e)},proto.Operation.prototype.getSplice=function(){return o.Message.getWrapperField(this,proto.Operation.Splice,1)},proto.Operation.prototype.setSplice=function(e){o.Message.setOneofWrapperField(this,1,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearSplice=function(){this.setSplice(void 0)},proto.Operation.prototype.hasSplice=function(){return null!=o.Message.getField(this,1)},proto.Operation.prototype.getUndo=function(){return o.Message.getWrapperField(this,proto.Operation.Undo,2)},proto.Operation.prototype.setUndo=function(e){o.Message.setOneofWrapperField(this,2,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearUndo=function(){this.setUndo(void 0)},proto.Operation.prototype.hasUndo=function(){return null!=o.Message.getField(this,2)},proto.Operation.prototype.getMarkersUpdate=function(){return o.Message.getWrapperField(this,proto.Operation.MarkersUpdate,3)},proto.Operation.prototype.setMarkersUpdate=function(e){o.Message.setOneofWrapperField(this,3,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearMarkersUpdate=function(){this.setMarkersUpdate(void 0)},proto.Operation.prototype.hasMarkersUpdate=function(){return null!=o.Message.getField(this,3)},n.object.extend(t,proto)},function(e,t,r){const o=r(5),n=r(93),i=r(94),{ZERO_POINT:s,compare:a,traverse:c,traversal:p,characterIndexForPosition:d,extentForText:l}=r(28);function u({site:e,seq:t}){return e+"."+t}function g({startDependencyId:e,offsetInStartDependency:t,endDependencyId:r,offsetInEndDependency:o}){return h(e,r)&&0===a(t,o)}function h(e,t){return e.site===t.site&&e.seq===t.seq}function f(e){const t=[];for(let r=0;r<e.length;r++){const{oldStart:o,oldEnd:n,oldText:i,newStart:s,newEnd:a,newText:c}=e[r];t.push({oldStart:s,oldEnd:a,oldText:c,newStart:o,newEnd:n,newText:i})}return t}e.exports=class e{constructor({siteId:e,text:t,history:r}){o(0!==e,"siteId 0 is reserved"),this.siteId=e,this.nextSequenceNumber=1,this.splitTreesBySpliceId=new Map,this.deletionsBySpliceId=new Map,this.undoCountsBySpliceId=new Map,this.markerLayersBySiteId=new Map([[this.siteId,new Map]]),this.deferredOperationsByDependencyId=new Map,this.deferredResolutionsByDependencyId=new Map,this.deferredMarkerUpdates=new Map,this.deferredMarkerUpdatesByDependencyId=new Map,this.maxSeqsBySite={},this.operations=[],this.undoStack=[],this.redoStack=[],this.nextCheckpointId=1;const a={spliceId:{site:0,seq:0},offset:s,text:"",extent:s,nextSplit:null,deletions:new Set};this.splitTreesBySpliceId.set(u(a.spliceId),new i(a));const c={spliceId:{site:0,seq:1},offset:s,text:"",extent:s,nextSplit:null,deletions:new Set};this.splitTreesBySpliceId.set(u(c.spliceId),new i(c)),this.documentTree=new n(a,c,this.isSegmentVisible.bind(this)),t?(this.setTextInRange(s,s,t),this.undoStack.length=0):r&&this.populateHistory(r)}populateHistory({baseText:e,nextCheckpointId:t,undoStack:r,redoStack:o}){this.setTextInRange(s,s,e),this.nextCheckpointId=t;const n=[],i=r.concat(o.slice().reverse());for(let e=0;e<i.length;e++){const{type:t,changes:r,markersBefore:o,markersAfter:s,id:a,markers:c}=i[e];if("transaction"===t){const e=[],t=this.snapshotFromMarkers(o);for(let t=r.length-1;t>=0;t--){const{oldStart:o,oldEnd:n,newText:i}=r[t];e.push(...this.setTextInRange(o,n,i))}const i=this.snapshotFromMarkers(s);n.push(new m(0,e,t,i))}else{if("checkpoint"!==t)throw new Error(`Unknown entry type '${t}'`);n.push(new y(a,!1,this.snapshotFromMarkers(c)))}}this.undoStack=n;for(let e=0;e<o.length;e++)"transaction"===o[e].type&&this.undo()}replicate(t){const r=new e({siteId:t});return r.integrateOperations(this.getOperations()),r}getOperations(){const e=[];return this.markerLayersBySiteId.forEach((t,r)=>{const o={};t.forEach((e,t)=>{const r={};e.forEach((e,t)=>{r[t]=e}),o[t]=r}),e.push({type:"markers-update",updates:o,siteId:r})}),this.operations.concat(e)}setTextInRange(e,t,r,o){const n={site:this.siteId,seq:this.nextSequenceNumber},i={type:"splice",spliceId:n};return a(t,e)>0&&(i.deletion=this.delete(n,e,t)),r&&r.length>0&&(i.insertion=this.insert(n,e,r)),this.updateMaxSeqsBySite(n),this.undoStack.push(new m(this.getNow(),[i])),this.clearRedoStack(),this.operations.push(i),[i]}getMarkers(){const e={};return this.markerLayersBySiteId.forEach((t,r)=>{t.size>0&&(e[r]={},t.forEach((t,o)=>{e[r][o]={},t.forEach((t,n)=>{const i=Object.assign({},t);i.range=this.resolveLogicalRange(t.range,t.exclusive),e[r][o][n]=i})}))}),e}updateMarkers(e){const t={type:"markers-update",siteId:this.siteId,updates:{}},r=this.markerLayersBySiteId.get(this.siteId);for(let o in e){const n=e[o];o=parseInt(o);let i=r.get(o);if(null===n)i&&(r.delete(o),t.updates[o]=null);else{i||(i=new Map,r.set(o,i)),t.updates[o]={};for(let e in n){const r=n[e];e=parseInt(e);let s=i.get(e);if(r){s=s?Object.assign({},s):{exclusive:!1,reversed:!1,tailed:!0};const n=s.exclusive!==r.exclusive;Object.assign(s,r),(r.range||n)&&(s.range=this.getLogicalRange(r.range||s.range,s.exclusive)),Object.freeze(s),i.set(e,s),t.updates[o][e]=s}else i.delete(e),t.updates[o][e]=null}}}return[t]}undo(){let e,t=null,r=[];for(let o=this.undoStack.length-1;o>=0;o--){const n=this.undoStack[o];if(n instanceof m){r=n.operations,e=n.markersSnapshotBefore,t=o;break}if(n instanceof y&&n.isBarrier)return null}if(null!=t){this.redoStack.push(...this.undoStack.splice(t).reverse());const{operations:o,textUpdates:n}=this.undoOrRedoOperations(r);return{operations:o,textUpdates:n,markers:this.markersFromSnapshot(e)}}return null}redo(){let e,t=null,r=[];for(let o=this.redoStack.length-1;o>=0;o--){const n=this.redoStack[o];if(n instanceof m){r=n.operations,e=n.markersSnapshotAfter,t=o;break}}for(;this.redoStack[t-1]instanceof y;)t--;if(null!=t){this.undoStack.push(...this.redoStack.splice(t).reverse());const{operations:o,textUpdates:n}=this.undoOrRedoOperations(r);return{operations:o,textUpdates:n,markers:e?this.markersFromSnapshot(e):null}}return null}clearUndoStack(){this.undoStack.length=0}clearRedoStack(){this.redoStack.length=0}applyGroupingInterval(e){const t=this.undoStack[this.undoStack.length-1],r=this.undoStack[this.undoStack.length-2];if(t instanceof m&&(t.groupingInterval=e,r instanceof m)){t.timestamp-r.timestamp<Math.min(e,r.groupingInterval||1/0)&&(this.undoStack.pop(),r.timestamp=t.timestamp,r.groupingInterval=e,r.operations.push(...t.operations),r.markersSnapshotAfter=t.markersSnapshotAfter)}}getNow(){return Date.now()}createCheckpoint(e){const t=new y(this.nextCheckpointId++,e&&e.isBarrier,e&&this.snapshotFromMarkers(e.markers));return this.undoStack.push(t),t.id}isBarrierPresentBeforeCheckpoint(e){for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof y){if(r.id==e)return!1;if(r.isBarrier)return!0}}return!1}groupChangesSinceCheckpoint(e,t){if(this.isBarrierPresentBeforeCheckpoint(e))return!1;const r=this.collectOperationsSinceCheckpoint(e,!0,t&&t.deleteCheckpoint);if(r){const{operations:e,markersSnapshot:o}=r;return e.length>0?(this.undoStack.push(new m(this.getNow(),e,o,t&&this.snapshotFromMarkers(t.markers))),this.textUpdatesForOperations(e)):[]}return!1}revertToCheckpoint(e,t){if(this.isBarrierPresentBeforeCheckpoint(e))return!1;const r=this.collectOperationsSinceCheckpoint(e,!0,t&&t.deleteCheckpoint);if(r){const{operations:e,textUpdates:t}=this.undoOrRedoOperations(r.operations);return{operations:e,textUpdates:t,markers:this.markersFromSnapshot(r.markersSnapshot)}}return!1}getChangesSinceCheckpoint(e){const t=this.collectOperationsSinceCheckpoint(e,!1,!1);return!!t&&this.textUpdatesForOperations(t.operations)}collectOperationsSinceCheckpoint(e,t,r){let o=-1;const n=[];for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof y){if(r.id===e){o=t;break}}else{if(!(r instanceof m))throw new Error("Unknown stack entry "+r.constructor.name);n.push(...r.operations)}}if(-1===o)return null;{const{markersSnapshot:e}=this.undoStack[o];return t&&(r||o++,this.undoStack.splice(o)),{operations:n,markersSnapshot:e}}}groupLastChanges(){let e;for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof y){if(r.isBarrier)return!1}else{if(e)return this.undoStack.splice(t),this.undoStack.push(new m(this.getNow(),r.operations.concat(e.operations),r.markersSnapshotBefore,e.markersSnapshotAfter)),!0;e=r}}return!1}getHistory(e){const t=new Map(this.undoCountsBySpliceId),r=[];for(let t=this.redoStack.length-1;t>=0;t--){const o=this.redoStack[t];if(o instanceof m){const e=this.markersFromSnapshot(o.markersSnapshotBefore),t=this.undoOrRedoOperations(o.operations).textUpdates,n=this.markersFromSnapshot(o.markersSnapshotAfter);r.push({type:"transaction",changes:t,markersBefore:e,markersAfter:n})}else r.push({type:"checkpoint",id:o.id,markers:this.markersFromSnapshot(o.markersSnapshot)});if(r.length===e)break}r.reverse();for(let e=this.redoStack.length-1;e>=this.redoStack.length-r.length;e--){const t=this.redoStack[e];t instanceof m&&this.undoOrRedoOperations(t.operations)}const o=[];for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof m){const e=this.markersFromSnapshot(r.markersSnapshotAfter),t=f(this.undoOrRedoOperations(r.operations).textUpdates),n=this.markersFromSnapshot(r.markersSnapshotBefore);o.push({type:"transaction",changes:t,markersBefore:n,markersAfter:e})}else o.push({type:"checkpoint",id:r.id,markers:this.markersFromSnapshot(r.markersSnapshot)});if(o.length===e)break}o.reverse();for(let e=this.undoStack.length-1;e>=this.undoStack.length-o.length;e--){const t=this.undoStack[e];t instanceof m&&this.undoOrRedoOperations(t.operations)}return this.undoCountsBySpliceId=t,{nextCheckpointId:this.nextCheckpointId,undoStack:o,redoStack:r}}delete(e,t,r){const o=u(e),n=this.findLocalSegmentBoundary(t)[1],i=this.findLocalSegmentBoundary(r)[0],s={};let a=n;for(;;){const e=s[a.spliceId.site];if((null==e||a.spliceId.seq>e)&&(s[a.spliceId.site]=a.spliceId.seq),a.deletions.add(o),this.documentTree.splayNode(a),this.documentTree.updateSubtreeExtent(a),a===i)break;a=this.documentTree.getSuccessor(a)}const p={spliceId:e,leftDependencyId:n.spliceId,offsetInLeftDependency:n.offset,rightDependencyId:i.spliceId,offsetInRightDependency:c(i.offset,i.extent),maxSeqsBySite:s};return this.deletionsBySpliceId.set(o,p),p}insert(e,t,r){const[o,n]=this.findLocalSegmentBoundary(t),a={spliceId:e,text:r,extent:l(r),offset:s,leftDependency:o,rightDependency:n,nextSplit:null,deletions:new Set};return this.documentTree.insertBetween(o,n,a),this.splitTreesBySpliceId.set(u(e),new i(a)),{text:r,leftDependencyId:o.spliceId,offsetInLeftDependency:c(o.offset,o.extent),rightDependencyId:n.spliceId,offsetInRightDependency:n.offset}}undoOrRedoOperations(e){const t=[],r=new Map;for(var o=0;o<e.length;o++){const{spliceId:n}=e[o],i=(this.undoCountsBySpliceId.get(u(n))||0)+1;this.updateUndoCount(n,i,r);const s={type:"undo",spliceId:n,undoCount:i};t.push(s),this.operations.push(s)}return{operations:t,textUpdates:this.textUpdatesForOperations(t,r)}}isSpliceUndone({spliceId:e}){const t=this.undoCountsBySpliceId.get(u(e));return null!=t&&!0&t}canIntegrateOperation(e){switch(e.type){case"splice":{const{spliceId:t,deletion:r,insertion:o}=e;if((this.maxSeqsBySite[t.site]||0)!==t.seq-1)return!1;if(r){if(!(this.splitTreesBySpliceId.has(u(r.leftDependencyId))&&this.splitTreesBySpliceId.has(u(r.rightDependencyId))))return!1;for(const e in r.maxSeqsBySite)if(r.maxSeqsBySite[e]>(this.maxSeqsBySite[e]||0))return!1}if(o){if(!(this.splitTreesBySpliceId.has(u(o.leftDependencyId))&&this.splitTreesBySpliceId.has(u(o.rightDependencyId))))return!1}return!0}case"undo":{const t=u(e.spliceId);return this.splitTreesBySpliceId.has(t)||this.deletionsBySpliceId.has(t)}case"markers-update":return!0;default:throw new Error("Unknown operation type")}}integrateOperations(e){const t=[];let r,o=0;for(;o<e.length;){const n=e[o++];if("markers-update"!==n.type&&this.operations.push(n),this.canIntegrateOperation(n)){switch(t.push(n),n.type){case"splice":n.deletion&&this.integrateDeletion(n.spliceId,n.deletion),n.insertion&&this.integrateInsertion(n.spliceId,n.insertion),this.updateMaxSeqsBySite(n.spliceId);break;case"undo":r||(r=new Map),this.integrateUndo(n,r)}this.collectDeferredOperations(n,e)}else this.deferOperation(n)}return{textUpdates:this.textUpdatesForOperations(t,r),markerUpdates:this.updateMarkersForOperations(t)}}collectDeferredOperations({spliceId:e},t){if(e){const r=u(e),o=this.deferredOperationsByDependencyId.get(r);o&&(o.forEach(e=>{this.canIntegrateOperation(e)&&t.push(e)}),this.deferredOperationsByDependencyId.delete(r))}}deferOperation(e){if("splice"===e.type){const{spliceId:t,deletion:r,insertion:o}=e;if(this.addOperationDependency(this.deferredOperationsByDependencyId,{site:t.site,seq:t.seq-1},e),r){this.addOperationDependency(this.deferredOperationsByDependencyId,r.leftDependencyId,e),this.addOperationDependency(this.deferredOperationsByDependencyId,r.rightDependencyId,e);for(const t in r.maxSeqsBySite){const o=r.maxSeqsBySite[t];this.addOperationDependency(this.deferredOperationsByDependencyId,{site:t,seq:o},e)}}o&&(this.addOperationDependency(this.deferredOperationsByDependencyId,o.leftDependencyId,e),this.addOperationDependency(this.deferredOperationsByDependencyId,o.rightDependencyId,e))}else{if("undo"!==e.type)throw new Error("Unknown operation type: "+e.type);this.addOperationDependency(this.deferredOperationsByDependencyId,e.spliceId,e)}}addOperationDependency(e,t,r){const o=u(t);if(!this.hasAppliedSplice(t)){let t=e.get(o);t||(t=new Set,e.set(o,t)),t.add(r)}}hasAppliedSplice(e){const t=u(e);return this.splitTreesBySpliceId.has(t)||this.deletionsBySpliceId.has(t)}integrateInsertion(e,t){const{text:r,leftDependencyId:o,offsetInLeftDependency:n,rightDependencyId:a,offsetInRightDependency:c}=t,p=this.findSegmentStart(a,c),d=this.findSegmentEnd(o,n);this.documentTree.splayNode(d),this.documentTree.splayNode(p);let g=this.documentTree.getSuccessor(d),h=d,f=p;for(;g!==f;){const t=this.documentTree.getSegmentIndex(h),r=this.documentTree.getSegmentIndex(f),o=this.documentTree.getSegmentIndex(g.leftDependency),n=this.documentTree.getSegmentIndex(g.rightDependency);o<=t&&n>=r?(e.site<g.spliceId.site?f=g:h=g,g=this.documentTree.getSuccessor(h)):g=this.documentTree.getSuccessor(g)}const y={spliceId:e,offset:s,text:r,extent:l(r),leftDependency:d,rightDependency:p,nextSplit:null,deletions:new Set};this.documentTree.insertBetween(h,f,y),this.splitTreesBySpliceId.set(u(e),new i(y))}integrateDeletion(e,t){const{leftDependencyId:r,offsetInLeftDependency:o,rightDependencyId:n,offsetInRightDependency:i,maxSeqsBySite:s}=t,a=u(e);this.deletionsBySpliceId.set(a,t);const c=this.findSegmentStart(r,o),p=this.findSegmentEnd(n,i);let d=c;for(;;){const e=s[d.spliceId.site]||0;if(d.spliceId.seq<=e&&(this.documentTree.splayNode(d),d.deletions.add(a),this.documentTree.updateSubtreeExtent(d)),d===p)break;d=this.documentTree.getSuccessor(d)}}integrateUndo({spliceId:e,undoCount:t},r){return this.updateUndoCount(e,t,r)}getMarkerLayersForSiteId(e){let t=this.markerLayersBySiteId.get(e);return t||(t=new Map,this.markerLayersBySiteId.set(e,t)),t}deferMarkerUpdate(e,t,r,o){const{range:n}=o,i={siteId:e,layerId:t,markerId:r};this.addOperationDependency(this.deferredMarkerUpdatesByDependencyId,n.startDependencyId,i),this.addOperationDependency(this.deferredMarkerUpdatesByDependencyId,n.endDependencyId,i);let s=this.deferredMarkerUpdates.get(e);s||(s=new Map,this.deferredMarkerUpdates.set(e,s));let a=s.get(t);a||(a=new Map,s.set(t,a)),a.set(r,o)}updateMarkersForOperations(e){const t={};for(let r=0;r<e.length;r++){const o=e[r];"markers-update"===o.type?this.integrateMarkerUpdates(t,o):"splice"===o.type&&this.integrateDeferredMarkerUpdates(t,o)}return t}integrateMarkerUpdates(e,{siteId:t,updates:r}){const o=this.getMarkerLayersForSiteId(t);e[t]||(e[t]={});for(let n in r){const i=r[n];n=parseInt(n);let s=o.get(n);if(i){s||(s=new Map,o.set(n,s)),e[t][n]||(e[t][n]={});for(let r in i){const o=i[r];if(r=parseInt(r),o)o.range&&!this.canResolveLogicalRange(o.range)?this.deferMarkerUpdate(t,n,r,o):this.integrateMarkerUpdate(e,t,n,r,o);else{s.has(r)&&(s.delete(r),e[t][n][r]=null);const o=this.deferredMarkerUpdates.get(t);if(o){const e=o.get(n);e&&e.delete(r)}}}}else{s&&(e[t][n]=null,o.delete(n));const r=this.deferredMarkerUpdates.get(t);r&&r.delete(n)}}}integrateDeferredMarkerUpdates(e,{spliceId:t}){const r=u(t),o=this.deferredMarkerUpdatesByDependencyId.get(r);o&&(o.forEach(({siteId:t,layerId:r,markerId:o})=>{const n=this.deferredMarkerUpdates.get(t);if(n){const i=n.get(r);if(i){const n=i.get(o);n&&this.canResolveLogicalRange(n.range)&&this.integrateMarkerUpdate(e,t,r,o,n)}}}),this.deferredMarkerUpdatesByDependencyId.delete(r))}integrateMarkerUpdate(e,t,r,o,n){let i=this.markerLayersBySiteId.get(t).get(r);i||(i=new Map,this.markerLayersBySiteId.get(t).set(r,i));let s=i.get(o);s=s?Object.assign({},s):{},Object.assign(s,n),Object.freeze(s),i.set(o,s),e[t]||(e[t]={}),e[t][r]||(e[t][r]={}),e[t][r][o]=Object.assign({},s),e[t][r][o].range=this.resolveLogicalRange(s.range,s.exclusive);const a=this.deferredMarkerUpdates.get(t);if(a){const e=a.get(r);e&&e.has(o)&&(e.delete(o),0===e.size&&(a.delete(r),0===a.size&&this.deferredMarkerUpdates.delete(t)))}}snapshotFromMarkers(e){if(!e)return e;const t={};for(const r in e){const o={},n=e[r];for(const e in n){const t=Object.assign({},n[e]);t.range=this.getLogicalRange(t.range,t.exclusive),o[e]=t}t[r]=o}return t}markersFromSnapshot(e){if(!e)return e;const t={};for(const r in e){const o={},n=e[r];for(const e in n){const t=Object.assign({},n[e]);t.range=this.resolveLogicalRange(t.range),o[e]=t}t[r]=o}return t}updateUndoCount(e,t,r){const o=u(e),n=this.undoCountsBySpliceId.get(o)||0;if(t<=n)return;r.set(o,n),this.undoCountsBySpliceId.set(o,t);const i=new Set;this.collectSegments(o,i),i.forEach(e=>{const t=this.isSegmentVisible(e,r);this.isSegmentVisible(e)!==t&&(this.documentTree.splayNode(e,r),this.documentTree.updateSubtreeExtent(e))})}textUpdatesForOperations(e,t){const r=new Set,o=new Map,n=new Map;for(let t=0;t<e.length;t++){const i=e[t],{type:s,spliceId:a,deletion:c,insertion:p}=i;if(a){const e=u(a);"splice"===s&&r.add(e),this.collectSegments(e,null,n,o)}}return this.computeChangesForSegments(n,o,t,r)}canResolveLogicalRange({startDependencyId:e,endDependencyId:t}){return this.hasAppliedSplice(e)&&this.hasAppliedSplice(t)}getLogicalRange({start:e,end:t},r){const{segment:o,offset:n}=this.findSegment(e,r),{segment:i,offset:s}=this.findSegment(t,!r||0===a(e,t));return{startDependencyId:o.spliceId,offsetInStartDependency:n,endDependencyId:i.spliceId,offsetInEndDependency:s}}resolveLogicalRange(e,t){const{startDependencyId:r,offsetInStartDependency:o,endDependencyId:n,offsetInEndDependency:i}=e;return{start:this.resolveLogicalPosition(r,o,t),end:this.resolveLogicalPosition(n,i,!t||g(e))}}resolveLogicalPosition(e,t,r){const o=this.splitTreesBySpliceId.get(u(e));let n=o.findSegmentContainingOffset(t);const i=c(n.offset,n.extent);r&&0===a(t,i)&&(n=o.getSuccessor(n)||n);const s=this.documentTree.getSegmentPosition(n);return this.isSegmentVisible(n)?c(s,p(t,n.offset)):s}findLocalSegmentBoundary(e){const{segment:t,start:r,end:o}=this.documentTree.findSegmentContainingPosition(e);if(a(e,o)<0){const o=this.splitTreesBySpliceId.get(u(t.spliceId));return this.splitSegment(o,t,p(e,r))}return[t,this.documentTree.getSuccessor(t)]}splitSegment(e,t,r){const o=e.splitSegment(t,r);return this.documentTree.splitSegment(t,o),[t,o]}findSegment(e,t){let{segment:r,start:o,end:n}=this.documentTree.findSegmentContainingPosition(e),i=c(r.offset,p(e,o));return t&&0===a(e,n)&&(r=this.documentTree.getSuccessor(r),i=r.offset),{segment:r,offset:i}}findSegmentStart(e,t){const r=this.splitTreesBySpliceId.get(u(e)),o=r.findSegmentContainingOffset(t),n=c(o.offset,o.extent);if(0===a(o.offset,t))return o;if(0===a(n,t))return o.nextSplit;{const[e,n]=this.splitSegment(r,o,p(t,o.offset));return n}}findSegmentEnd(e,t){const r=this.splitTreesBySpliceId.get(u(e)),o=r.findSegmentContainingOffset(t),n=c(o.offset,o.extent);if(0===a(n,t))return o;{const[e,n]=this.splitSegment(r,o,p(t,o.offset));return e}}getText(){let e="";const t=this.documentTree.getSegments();for(var r=0;r<t.length;r++){const o=t[r];this.isSegmentVisible(o)&&(e+=o.text)}return e}collectSegments(e,t,r,o){const n=this.splitTreesBySpliceId.get(e);if(n){let e=n.getStart();for(;e;)t?t.add(e):(o.set(e,this.documentTree.getSegmentPosition(e)),r.set(e,this.documentTree.getSegmentIndex(e))),e=n.getSuccessor(e)}const i=this.deletionsBySpliceId.get(e);if(i){const{leftDependencyId:e,offsetInLeftDependency:n,rightDependencyId:s,offsetInRightDependency:a,maxSeqsBySite:c}=i,p=this.findSegmentStart(e,n),d=this.findSegmentEnd(s,a);let l=p;for(;;){const e=c[l.spliceId.site]||0;if(l.spliceId.seq<=e&&(t?t.add(l):(o.set(l,this.documentTree.getSegmentPosition(l)),r.set(l,this.documentTree.getSegmentIndex(l)))),l===d)break;l=this.documentTree.getSuccessor(l)}}}computeChangesForSegments(e,t,r,o){const n=Array.from(e.keys()).sort((t,r)=>e.get(t)-e.get(r)),i=[];let s;for(let e=0;e<n.length;e++){const d=n[e],l=this.isSegmentVisible(d,r,o);if(l!==this.isSegmentVisible(d)){const e=t.get(d),r=s?c(s.oldEnd,p(e,s.newEnd)):e;l?i.length>0&&0===a(s.newEnd,e)?(s.oldEnd=c(s.oldEnd,d.extent),s.oldText+=d.text):(s={oldStart:r,oldEnd:c(r,d.extent),oldText:d.text,newStart:e,newEnd:e,newText:""},i.push(s)):s&&0===a(s.newEnd,e)?(s.newEnd=c(s.newEnd,d.extent),s.newText+=d.text):(s={oldStart:r,oldEnd:r,oldText:"",newStart:e,newEnd:c(e,d.extent),newText:d.text},i.push(s))}}return i}isSegmentVisible(e,t,r){const o=u(e.spliceId);if(r&&r.has(o))return!1;let n;return t&&(n=t.get(o)),null==n&&(n=this.undoCountsBySpliceId.get(o)||0),0==(1&n)&&!this.isSegmentDeleted(e,t,r)}isSegmentDeleted(e,t,r){for(const o of e.deletions){if(r&&r.has(o))continue;let e;if(t&&(e=t.get(o)),null==e&&(e=this.undoCountsBySpliceId.get(o)||0),0==(1&e))return!0}return!1}updateMaxSeqsBySite({site:e,seq:t}){const r=this.maxSeqsBySite[e]||0;o.equal(r,t-1,"Operations from a given site must be applied in order."),this.maxSeqsBySite[e]=t,this.siteId===e&&(this.nextSequenceNumber=t+1)}};class y{constructor(e,t,r){this.id=e,this.isBarrier=t,this.markersSnapshot=r}}class m{constructor(e,t,r,o){this.timestamp=e,this.operations=t,this.markersSnapshotBefore=r,this.markersSnapshotAfter=o}}},function(e,t,r){const o=r(48),{ZERO_POINT:n,compare:i,traverse:s}=r(28);e.exports=class extends o{constructor(e,t,r){super(),this.firstSegment=e,this.firstSegment.documentRight=t,this.firstSegment.documentRight.documentParent=this.firstSegment,this.firstSegment.documentLeft=null,this.firstSegment.documentSubtreeExtent=n,t.documentSubtreeExtent=n,this.root=this.firstSegment,this.isSegmentVisible=r}getSegmentIndex(e){let t=e.documentLeft?e.documentLeft.documentSubtreeSize:0;for(;e.documentParent;)e.documentParent.documentRight===e&&(t++,e.documentParent.documentLeft&&(t+=e.documentParent.documentLeft.documentSubtreeSize)),e=e.documentParent;return t}getParent(e){return e.documentParent}setParent(e,t){e.documentParent=t}getLeft(e){return e.documentLeft}setLeft(e,t){e.documentLeft=t}getRight(e){return e.documentRight}setRight(e,t){e.documentRight=t}findSegmentContainingPosition(e){let t=this.root,r=n;for(;t;){let o=r;t.documentLeft&&(o=s(o,t.documentLeft.documentSubtreeExtent));let n=o;if(this.isSegmentVisible(t)&&(n=s(n,t.extent)),i(e,o)<=0&&t!==this.firstSegment)t=t.documentLeft;else{if(!(i(e,n)>0))return{segment:t,start:o,end:n};r=n,t=t.documentRight}}throw new Error("No segment found")}insertBetween(e,t,r){this.splayNode(e),this.splayNode(t),this.root=r,r.documentLeft=e,e.documentParent=r,r.documentRight=t,t.documentParent=r,t.documentLeft=null,this.updateSubtreeExtent(t),this.updateSubtreeExtent(r)}splitSegment(e,t){this.splayNode(e),this.root=t,t.documentParent=null,t.documentLeft=e,e.documentParent=t,t.documentRight=e.documentRight,t.documentRight&&(t.documentRight.documentParent=t),e.documentRight=null,this.updateSubtreeExtent(e),this.updateSubtreeExtent(t)}updateSubtreeExtent(e,t){e.documentSubtreeExtent=n,e.documentSubtreeSize=1,e.documentLeft&&(e.documentSubtreeExtent=s(e.documentSubtreeExtent,e.documentLeft.documentSubtreeExtent),e.documentSubtreeSize+=e.documentLeft.documentSubtreeSize),this.isSegmentVisible(e,t)&&(e.documentSubtreeExtent=s(e.documentSubtreeExtent,e.extent)),e.documentRight&&(e.documentSubtreeExtent=s(e.documentSubtreeExtent,e.documentRight.documentSubtreeExtent),e.documentSubtreeSize+=e.documentRight.documentSubtreeSize)}getSegmentPosition(e){return this.splayNode(e),e.documentLeft?e.documentLeft.documentSubtreeExtent:n}getSegments(){const e=[];return function t(r){r.documentLeft&&t(r.documentLeft),e.push(r),r.documentRight&&t(r.documentRight)}(this.root),e}}},function(e,t,r){const o=r(48),{ZERO_POINT:n,compare:i,traverse:s,traversal:a,characterIndexForPosition:c,extentForText:p}=r(28);e.exports=class extends o{constructor(e){super(),this.startSegment=e,this.startSegment.splitLeft=null,this.startSegment.splitRight=null,this.startSegment.splitParent=null,this.startSegment.splitSubtreeExtent=this.startSegment.extent,this.root=this.startSegment}getStart(){return this.startSegment}getParent(e){return e.splitParent}setParent(e,t){e.splitParent=t}getLeft(e){return e.splitLeft}setLeft(e,t){e.splitLeft=t}getRight(e){return e.splitRight}setRight(e,t){e.splitRight=t}updateSubtreeExtent(e){e.splitSubtreeExtent=n,e.splitLeft&&(e.splitSubtreeExtent=s(e.splitSubtreeExtent,e.splitLeft.splitSubtreeExtent)),e.splitSubtreeExtent=s(e.splitSubtreeExtent,e.extent),e.splitRight&&(e.splitSubtreeExtent=s(e.splitSubtreeExtent,e.splitRight.splitSubtreeExtent))}findSegmentContainingOffset(e){let t=this.root,r=n;for(;t;){let o=r;t.splitLeft&&(o=s(o,t.splitLeft.splitSubtreeExtent));const n=s(o,t.extent);if(i(e,o)<=0&&t.splitLeft)t=t.splitLeft;else{if(!(i(e,n)>0))return this.splayNode(t),t;r=n,t=t.splitRight}}throw new Error("No segment found")}splitSegment(e,t){const r=c(e.text,t);this.splayNode(e);const o=Object.assign({},e);return o.text=e.text.slice(r),o.extent=a(e.extent,t),o.spliceId=Object.assign({},e.spliceId),o.offset=s(o.offset,t),o.deletions=new Set(o.deletions),e.text=e.text.slice(0,r),e.extent=t,e.nextSplit=o,this.root=o,o.splitParent=null,o.splitLeft=e,e.splitParent=o,o.splitRight=e.splitRight,o.splitRight&&(o.splitRight.splitParent=o),e.splitRight=null,this.updateSubtreeExtent(e),this.updateSubtreeExtent(o),o}getSuccessor(e){return e.nextSplit}getSegments(){const e=[];let t=this.getStart();for(;t;)e.push(t),t=t.nextSplit;return e}}},function(e,t,r){const{Operation:o}=r(96);function n(e){const t=new o;switch(e.type){case"splice":t.setSplice(function(e){const t=new o.Splice;t.setSpliceId(i(e.spliceId)),e.insertion&&t.setInsertion(function(e){const t=new o.Splice.Insertion;return t.setText(e.text),t.setLeftDependencyId(i(e.leftDependencyId)),t.setOffsetInLeftDependency(s(e.offsetInLeftDependency)),t.setRightDependencyId(i(e.rightDependencyId)),t.setOffsetInRightDependency(s(e.offsetInRightDependency)),t}(e.insertion));e.deletion&&t.setDeletion(function(e){const t=new o.Splice.Deletion;t.setLeftDependencyId(i(e.leftDependencyId)),t.setOffsetInLeftDependency(s(e.offsetInLeftDependency)),t.setRightDependencyId(i(e.rightDependencyId)),t.setOffsetInRightDependency(s(e.offsetInRightDependency));const r=t.getMaxSeqsBySiteMap();for(const t in e.maxSeqsBySite)r.set(t,e.maxSeqsBySite[t]);return t}(e.deletion));return t}(e));break;case"undo":t.setUndo(function(e){const t=new o.Undo;return t.setSpliceId(i(e.spliceId)),t.setUndoCount(e.undoCount),t}(e));break;case"markers-update":t.setMarkersUpdate(function({siteId:e,updates:t}){const r=new o.MarkersUpdate;r.setSiteId(e);const n=r.getLayerOperationsMap();for(const e in t){const r=t[e],a=new o.MarkersUpdate.LayerOperation;if(r){a.setIsDeletion(!1);const e=a.getMarkerOperationsMap();for(const t in r){const n=r[t],a=new o.MarkersUpdate.MarkerOperation;if(n){a.setIsDeletion(!1);const{range:e,exclusive:t,reversed:r,tailed:c}=n,p=new o.MarkersUpdate.MarkerUpdate,d=new o.MarkersUpdate.LogicalRange;d.setStartDependencyId(i(e.startDependencyId)),d.setOffsetInStartDependency(s(e.offsetInStartDependency)),d.setEndDependencyId(i(e.endDependencyId)),d.setOffsetInEndDependency(s(e.offsetInEndDependency)),p.setRange(d),p.setExclusive(t),p.setReversed(r),p.setTailed(c),a.setMarkerUpdate(p)}else a.setIsDeletion(!0);e.set(t,a)}}else a.setIsDeletion(!0);n.set(e,a)}return r}(e));break;default:throw new Error("Unknown operation type: "+e.type)}return t}function i({site:e,seq:t}){const r=new o.SpliceId;return r.setSite(e),r.setSeq(t),r}function s({row:e,column:t}){const r=new o.Point;return r.setRow(e),r.setColumn(t),r}function a(e){if(e.hasSplice())return function(e){const t=e.getInsertion(),r=e.getDeletion();return{type:"splice",spliceId:d(e.getSpliceId()),insertion:t?c(t):null,deletion:r?p(r):null}}(e.getSplice());if(e.hasUndo())return{type:"undo",spliceId:d((t=e.getUndo()).getSpliceId()),undoCount:t.getUndoCount()};if(e.hasMarkersUpdate())return function(e){const t={};return e.getLayerOperationsMap().forEach((e,r)=>{if(e.getIsDeletion())t[r]=null;else{const o={};e.getMarkerOperationsMap().forEach((e,t)=>{if(e.getIsDeletion())o[t]=null;else{const r=e.getMarkerUpdate(),n=r.getRange(),i={startDependencyId:d(n.getStartDependencyId()),offsetInStartDependency:l(n.getOffsetInStartDependency()),endDependencyId:d(n.getEndDependencyId()),offsetInEndDependency:l(n.getOffsetInEndDependency())};o[t]={range:i,exclusive:r.getExclusive(),reversed:r.getReversed(),tailed:r.getTailed()}}}),t[r]=o}}),{type:"markers-update",siteId:e.getSiteId(),updates:t}}(e.getMarkersUpdate());throw new Error("Unknown operation type");var t}function c(e){return{text:e.getText(),leftDependencyId:d(e.getLeftDependencyId()),offsetInLeftDependency:l(e.getOffsetInLeftDependency()),rightDependencyId:d(e.getRightDependencyId()),offsetInRightDependency:l(e.getOffsetInRightDependency())}}function p(e){const t={};return e.getMaxSeqsBySiteMap().forEach((e,r)=>{t[r]=e}),{leftDependencyId:d(e.getLeftDependencyId()),offsetInLeftDependency:l(e.getOffsetInLeftDependency()),rightDependencyId:d(e.getRightDependencyId()),offsetInRightDependency:l(e.getOffsetInRightDependency()),maxSeqsBySite:t}}function d(e){return{site:e.getSite(),seq:e.getSeq()}}function l(e){return{row:e.getRow(),column:e.getColumn()}}e.exports={serializeOperation:n,deserializeOperation:a,serializeOperationBinary:function(e){return n(e).serializeBinary()},deserializeOperationBinary:function(e){return a(o.deserializeBinary(e))}}},function(e,t,r){var o=r(27),n=o,i=Function("return this")();n.exportSymbol("proto.Operation",null,i),n.exportSymbol("proto.Operation.MarkersUpdate",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.LayerOperation",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.LogicalRange",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.MarkerOperation",null,i),n.exportSymbol("proto.Operation.MarkersUpdate.MarkerUpdate",null,i),n.exportSymbol("proto.Operation.Point",null,i),n.exportSymbol("proto.Operation.Splice",null,i),n.exportSymbol("proto.Operation.Splice.Deletion",null,i),n.exportSymbol("proto.Operation.Splice.Insertion",null,i),n.exportSymbol("proto.Operation.SpliceId",null,i),n.exportSymbol("proto.Operation.Undo",null,i),proto.Operation=function(e){o.Message.initialize(this,e,0,-1,null,proto.Operation.oneofGroups_)},n.inherits(proto.Operation,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.displayName="proto.Operation"),proto.Operation.oneofGroups_=[[1,2,3]],proto.Operation.VariantCase={VARIANT_NOT_SET:0,SPLICE:1,UNDO:2,MARKERS_UPDATE:3},proto.Operation.prototype.getVariantCase=function(){return o.Message.computeOneofCase(this,proto.Operation.oneofGroups_[0])},o.Message.GENERATE_TO_OBJECT&&(proto.Operation.prototype.toObject=function(e){return proto.Operation.toObject(e,this)},proto.Operation.toObject=function(e,t){var r,o={splice:(r=t.getSplice())&&proto.Operation.Splice.toObject(e,r),undo:(r=t.getUndo())&&proto.Operation.Undo.toObject(e,r),markersUpdate:(r=t.getMarkersUpdate())&&proto.Operation.MarkersUpdate.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation;return proto.Operation.deserializeBinaryFromReader(r,t)},proto.Operation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.Splice;t.readMessage(r,proto.Operation.Splice.deserializeBinaryFromReader),e.setSplice(r);break;case 2:r=new proto.Operation.Undo;t.readMessage(r,proto.Operation.Undo.deserializeBinaryFromReader),e.setUndo(r);break;case 3:r=new proto.Operation.MarkersUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.deserializeBinaryFromReader),e.setMarkersUpdate(r);break;default:t.skipField()}}return e},proto.Operation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSplice())&&t.writeMessage(1,r,proto.Operation.Splice.serializeBinaryToWriter),null!=(r=e.getUndo())&&t.writeMessage(2,r,proto.Operation.Undo.serializeBinaryToWriter),null!=(r=e.getMarkersUpdate())&&t.writeMessage(3,r,proto.Operation.MarkersUpdate.serializeBinaryToWriter)},proto.Operation.Splice=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Splice,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Splice.displayName="proto.Operation.Splice"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.prototype.toObject=function(e){return proto.Operation.Splice.toObject(e,this)},proto.Operation.Splice.toObject=function(e,t){var r,o={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),insertion:(r=t.getInsertion())&&proto.Operation.Splice.Insertion.toObject(e,r),deletion:(r=t.getDeletion())&&proto.Operation.Splice.Deletion.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.Splice.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Splice;return proto.Operation.Splice.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=new proto.Operation.Splice.Insertion;t.readMessage(r,proto.Operation.Splice.Insertion.deserializeBinaryFromReader),e.setInsertion(r);break;case 3:r=new proto.Operation.Splice.Deletion;t.readMessage(r,proto.Operation.Splice.Deletion.deserializeBinaryFromReader),e.setDeletion(r);break;default:t.skipField()}}return e},proto.Operation.Splice.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Splice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getInsertion())&&t.writeMessage(2,r,proto.Operation.Splice.Insertion.serializeBinaryToWriter),null!=(r=e.getDeletion())&&t.writeMessage(3,r,proto.Operation.Splice.Deletion.serializeBinaryToWriter)},proto.Operation.Splice.Insertion=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Splice.Insertion,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Splice.Insertion.displayName="proto.Operation.Splice.Insertion"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Insertion.prototype.toObject=function(e){return proto.Operation.Splice.Insertion.toObject(e,this)},proto.Operation.Splice.Insertion.toObject=function(e,t){var r,n={text:o.Message.getFieldWithDefault(t,2,""),leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Splice.Insertion.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Splice.Insertion;return proto.Operation.Splice.Insertion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Insertion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=t.readString();e.setText(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 5:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 6:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;default:t.skipField()}}return e},proto.Operation.Splice.Insertion.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Splice.Insertion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Insertion.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getText()).length>0&&t.writeString(2,r),null!=(r=e.getLeftDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(5,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(6,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.Splice.Insertion.prototype.getText=function(){return o.Message.getFieldWithDefault(this,2,"")},proto.Operation.Splice.Insertion.prototype.setText=function(e){o.Message.setField(this,2,e)},proto.Operation.Splice.Insertion.prototype.getLeftDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.Splice.Insertion.prototype.setLeftDependencyId=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Insertion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasLeftDependencyId=function(){return null!=o.Message.getField(this,3)},proto.Operation.Splice.Insertion.prototype.getOffsetInLeftDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.Splice.Insertion.prototype.setOffsetInLeftDependency=function(e){o.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInLeftDependency=function(){return null!=o.Message.getField(this,4)},proto.Operation.Splice.Insertion.prototype.getRightDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,5)},proto.Operation.Splice.Insertion.prototype.setRightDependencyId=function(e){o.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Insertion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasRightDependencyId=function(){return null!=o.Message.getField(this,5)},proto.Operation.Splice.Insertion.prototype.getOffsetInRightDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,6)},proto.Operation.Splice.Insertion.prototype.setOffsetInRightDependency=function(e){o.Message.setWrapperField(this,6,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInRightDependency=function(){return null!=o.Message.getField(this,6)},proto.Operation.Splice.Deletion=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Splice.Deletion,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Splice.Deletion.displayName="proto.Operation.Splice.Deletion"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Deletion.prototype.toObject=function(e){return proto.Operation.Splice.Deletion.toObject(e,this)},proto.Operation.Splice.Deletion.toObject=function(e,t){var r,o={leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r),maxSeqsBySiteMap:(r=t.getMaxSeqsBySiteMap())?r.toObject(e,void 0):[]};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.Splice.Deletion.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Splice.Deletion;return proto.Operation.Splice.Deletion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Deletion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 3:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 4:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 5:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;case 6:r=e.getMaxSeqsBySiteMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.Operation.Splice.Deletion.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Splice.Deletion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Deletion.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getLeftDependencyId())&&t.writeMessage(2,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(3,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(4,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(5,r,proto.Operation.Point.serializeBinaryToWriter),(r=e.getMaxSeqsBySiteMap(!0))&&r.getLength()>0&&r.serializeBinary(6,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeUint32)},proto.Operation.Splice.Deletion.prototype.getLeftDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,2)},proto.Operation.Splice.Deletion.prototype.setLeftDependencyId=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.Splice.Deletion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasLeftDependencyId=function(){return null!=o.Message.getField(this,2)},proto.Operation.Splice.Deletion.prototype.getOffsetInLeftDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,3)},proto.Operation.Splice.Deletion.prototype.setOffsetInLeftDependency=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInLeftDependency=function(){return null!=o.Message.getField(this,3)},proto.Operation.Splice.Deletion.prototype.getRightDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,4)},proto.Operation.Splice.Deletion.prototype.setRightDependencyId=function(e){o.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Deletion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasRightDependencyId=function(){return null!=o.Message.getField(this,4)},proto.Operation.Splice.Deletion.prototype.getOffsetInRightDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,5)},proto.Operation.Splice.Deletion.prototype.setOffsetInRightDependency=function(e){o.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInRightDependency=function(){return null!=o.Message.getField(this,5)},proto.Operation.Splice.Deletion.prototype.getMaxSeqsBySiteMap=function(e){return o.Message.getMapField(this,6,e,null)},proto.Operation.Splice.Deletion.prototype.clearMaxSeqsBySiteMap=function(){this.getMaxSeqsBySiteMap().clear()},proto.Operation.Splice.prototype.getSpliceId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Splice.prototype.setSpliceId=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.Splice.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Splice.prototype.hasSpliceId=function(){return null!=o.Message.getField(this,1)},proto.Operation.Splice.prototype.getInsertion=function(){return o.Message.getWrapperField(this,proto.Operation.Splice.Insertion,2)},proto.Operation.Splice.prototype.setInsertion=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.Splice.prototype.clearInsertion=function(){this.setInsertion(void 0)},proto.Operation.Splice.prototype.hasInsertion=function(){return null!=o.Message.getField(this,2)},proto.Operation.Splice.prototype.getDeletion=function(){return o.Message.getWrapperField(this,proto.Operation.Splice.Deletion,3)},proto.Operation.Splice.prototype.setDeletion=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.Splice.prototype.clearDeletion=function(){this.setDeletion(void 0)},proto.Operation.Splice.prototype.hasDeletion=function(){return null!=o.Message.getField(this,3)},proto.Operation.Undo=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Undo,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Undo.displayName="proto.Operation.Undo"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Undo.prototype.toObject=function(e){return proto.Operation.Undo.toObject(e,this)},proto.Operation.Undo.toObject=function(e,t){var r,n={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),undoCount:o.Message.getFieldWithDefault(t,2,0)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Undo.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Undo;return proto.Operation.Undo.deserializeBinaryFromReader(r,t)},proto.Operation.Undo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=t.readUint32();e.setUndoCount(r);break;default:t.skipField()}}return e},proto.Operation.Undo.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Undo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Undo.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),0!==(r=e.getUndoCount())&&t.writeUint32(2,r)},proto.Operation.Undo.prototype.getSpliceId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Undo.prototype.setSpliceId=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.Undo.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Undo.prototype.hasSpliceId=function(){return null!=o.Message.getField(this,1)},proto.Operation.Undo.prototype.getUndoCount=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Operation.Undo.prototype.setUndoCount=function(e){o.Message.setField(this,2,e)},proto.Operation.MarkersUpdate=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.displayName="proto.Operation.MarkersUpdate"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.toObject=function(e,t){var r,n={siteId:o.Message.getFieldWithDefault(t,1,0),layerOperationsMap:(r=t.getLayerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.LayerOperation.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate;return proto.Operation.MarkersUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSiteId(r);break;case 2:r=e.getLayerOperationsMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSiteId())&&t.writeUint32(1,r),(r=e.getLayerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.LayerOperation,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LayerOperation.displayName="proto.Operation.MarkersUpdate.LayerOperation"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LayerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LayerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.LayerOperation.toObject=function(e,t){var r,n={isDeletion:o.Message.getFieldWithDefault(t,1,!1),markerOperationsMap:(r=t.getMarkerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.MarkerOperation.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.LayerOperation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LayerOperation;return proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=e.getMarkerOperationsMap();t.readMessage(r,(function(e,t){o.Map.deserializeBinary(e,t,o.BinaryReader.prototype.readUint32,o.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LayerOperation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),(r=e.getMarkerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,o.BinaryWriter.prototype.writeUint32,o.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getIsDeletion=function(){return o.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.LayerOperation.prototype.setIsDeletion=function(e){o.Message.setField(this,1,e)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getMarkerOperationsMap=function(e){return o.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.MarkerOperation)},proto.Operation.MarkersUpdate.LayerOperation.prototype.clearMarkerOperationsMap=function(){this.getMarkerOperationsMap().clear()},proto.Operation.MarkersUpdate.MarkerOperation=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.MarkerOperation,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerOperation.displayName="proto.Operation.MarkersUpdate.MarkerOperation"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerOperation.toObject=function(e,t){var r,n={isDeletion:o.Message.getFieldWithDefault(t,1,!1),markerUpdate:(r=t.getMarkerUpdate())&&proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerOperation;return proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=new proto.Operation.MarkersUpdate.MarkerUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader),e.setMarkerUpdate(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerOperation.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),null!=(r=e.getMarkerUpdate())&&t.writeMessage(2,r,proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getIsDeletion=function(){return o.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setIsDeletion=function(e){o.Message.setField(this,1,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getMarkerUpdate=function(){return o.Message.getWrapperField(this,proto.Operation.MarkersUpdate.MarkerUpdate,2)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setMarkerUpdate=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.clearMarkerUpdate=function(){this.setMarkerUpdate(void 0)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.hasMarkerUpdate=function(){return null!=o.Message.getField(this,2)},proto.Operation.MarkersUpdate.MarkerUpdate=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.MarkerUpdate,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerUpdate.displayName="proto.Operation.MarkersUpdate.MarkerUpdate"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerUpdate.toObject=function(e,t){var r,n={range:(r=t.getRange())&&proto.Operation.MarkersUpdate.LogicalRange.toObject(e,r),exclusive:o.Message.getFieldWithDefault(t,2,!1),reversed:o.Message.getFieldWithDefault(t,3,!1),tailed:o.Message.getFieldWithDefault(t,4,!1)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerUpdate;return proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.MarkersUpdate.LogicalRange;t.readMessage(r,proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader),e.setRange(r);break;case 2:r=t.readBool();e.setExclusive(r);break;case 3:r=t.readBool();e.setReversed(r);break;case 4:r=t.readBool();e.setTailed(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getRange())&&t.writeMessage(1,r,proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter),(r=e.getExclusive())&&t.writeBool(2,r),(r=e.getReversed())&&t.writeBool(3,r),(r=e.getTailed())&&t.writeBool(4,r)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getRange=function(){return o.Message.getWrapperField(this,proto.Operation.MarkersUpdate.LogicalRange,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setRange=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.clearRange=function(){this.setRange(void 0)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.hasRange=function(){return null!=o.Message.getField(this,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getExclusive=function(){return o.Message.getFieldWithDefault(this,2,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setExclusive=function(e){o.Message.setField(this,2,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getReversed=function(){return o.Message.getFieldWithDefault(this,3,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setReversed=function(e){o.Message.setField(this,3,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getTailed=function(){return o.Message.getFieldWithDefault(this,4,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setTailed=function(e){o.Message.setField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.MarkersUpdate.LogicalRange,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LogicalRange.displayName="proto.Operation.MarkersUpdate.LogicalRange"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LogicalRange.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LogicalRange.toObject(e,this)},proto.Operation.MarkersUpdate.LogicalRange.toObject=function(e,t){var r,o={startDependencyId:(r=t.getStartDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInStartDependency:(r=t.getOffsetInStartDependency())&&proto.Operation.Point.toObject(e,r),endDependencyId:(r=t.getEndDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInEndDependency:(r=t.getOffsetInEndDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(o.$jspbMessageInstance=t),o}),proto.Operation.MarkersUpdate.LogicalRange.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LogicalRange;return proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setStartDependencyId(r);break;case 2:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInStartDependency(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setEndDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInEndDependency(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LogicalRange.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getStartDependencyId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInStartDependency())&&t.writeMessage(2,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getEndDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInEndDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getStartDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setStartDependencyId=function(e){o.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearStartDependencyId=function(){this.setStartDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasStartDependencyId=function(){return null!=o.Message.getField(this,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInStartDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInStartDependency=function(e){o.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInStartDependency=function(){this.setOffsetInStartDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInStartDependency=function(){return null!=o.Message.getField(this,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getEndDependencyId=function(){return o.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setEndDependencyId=function(e){o.Message.setWrapperField(this,3,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearEndDependencyId=function(){this.setEndDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasEndDependencyId=function(){return null!=o.Message.getField(this,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInEndDependency=function(){return o.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInEndDependency=function(e){o.Message.setWrapperField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInEndDependency=function(){this.setOffsetInEndDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInEndDependency=function(){return null!=o.Message.getField(this,4)},proto.Operation.MarkersUpdate.prototype.getSiteId=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Operation.MarkersUpdate.prototype.setSiteId=function(e){o.Message.setField(this,1,e)},proto.Operation.MarkersUpdate.prototype.getLayerOperationsMap=function(e){return o.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.LayerOperation)},proto.Operation.MarkersUpdate.prototype.clearLayerOperationsMap=function(){this.getLayerOperationsMap().clear()},proto.Operation.SpliceId=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.SpliceId,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.SpliceId.displayName="proto.Operation.SpliceId"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.SpliceId.prototype.toObject=function(e){return proto.Operation.SpliceId.toObject(e,this)},proto.Operation.SpliceId.toObject=function(e,t){var r={site:o.Message.getFieldWithDefault(t,1,0),seq:o.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.SpliceId.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.SpliceId;return proto.Operation.SpliceId.deserializeBinaryFromReader(r,t)},proto.Operation.SpliceId.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSite(r);break;case 2:r=t.readUint32();e.setSeq(r);break;default:t.skipField()}}return e},proto.Operation.SpliceId.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.SpliceId.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.SpliceId.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSite())&&t.writeUint32(1,r),0!==(r=e.getSeq())&&t.writeUint32(2,r)},proto.Operation.SpliceId.prototype.getSite=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Operation.SpliceId.prototype.setSite=function(e){o.Message.setField(this,1,e)},proto.Operation.SpliceId.prototype.getSeq=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Operation.SpliceId.prototype.setSeq=function(e){o.Message.setField(this,2,e)},proto.Operation.Point=function(e){o.Message.initialize(this,e,0,-1,null,null)},n.inherits(proto.Operation.Point,o.Message),n.DEBUG&&!COMPILED&&(proto.Operation.Point.displayName="proto.Operation.Point"),o.Message.GENERATE_TO_OBJECT&&(proto.Operation.Point.prototype.toObject=function(e){return proto.Operation.Point.toObject(e,this)},proto.Operation.Point.toObject=function(e,t){var r={row:o.Message.getFieldWithDefault(t,1,0),column:o.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.Point.deserializeBinary=function(e){var t=new o.BinaryReader(e),r=new proto.Operation.Point;return proto.Operation.Point.deserializeBinaryFromReader(r,t)},proto.Operation.Point.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRow(r);break;case 2:r=t.readUint32();e.setColumn(r);break;default:t.skipField()}}return e},proto.Operation.Point.prototype.serializeBinary=function(){var e=new o.BinaryWriter;return proto.Operation.Point.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Point.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRow())&&t.writeUint32(1,r),0!==(r=e.getColumn())&&t.writeUint32(2,r)},proto.Operation.Point.prototype.getRow=function(){return o.Message.getFieldWithDefault(this,1,0)},proto.Operation.Point.prototype.setRow=function(e){o.Message.setField(this,1,e)},proto.Operation.Point.prototype.getColumn=function(){return o.Message.getFieldWithDefault(this,2,0)},proto.Operation.Point.prototype.setColumn=function(e){o.Message.setField(this,2,e)},proto.Operation.prototype.getSplice=function(){return o.Message.getWrapperField(this,proto.Operation.Splice,1)},proto.Operation.prototype.setSplice=function(e){o.Message.setOneofWrapperField(this,1,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearSplice=function(){this.setSplice(void 0)},proto.Operation.prototype.hasSplice=function(){return null!=o.Message.getField(this,1)},proto.Operation.prototype.getUndo=function(){return o.Message.getWrapperField(this,proto.Operation.Undo,2)},proto.Operation.prototype.setUndo=function(e){o.Message.setOneofWrapperField(this,2,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearUndo=function(){this.setUndo(void 0)},proto.Operation.prototype.hasUndo=function(){return null!=o.Message.getField(this,2)},proto.Operation.prototype.getMarkersUpdate=function(){return o.Message.getWrapperField(this,proto.Operation.MarkersUpdate,3)},proto.Operation.prototype.setMarkersUpdate=function(e){o.Message.setOneofWrapperField(this,3,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearMarkersUpdate=function(){this.setMarkersUpdate(void 0)},proto.Operation.prototype.hasMarkersUpdate=function(){return null!=o.Message.getField(this,3)},n.object.extend(t,proto)},function(e,t,r){
/*!
 * Pusher JavaScript Library v4.4.0
 * https://pusher.com/
 *
 * Copyright 2017, Pusher
 * Released under the MIT licence.
 */
e.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";var o=r(1);e.exports=o.default},function(e,t,r){"use strict";var o=r(2),n=r(4),i=r(14),s=r(32),a=r(33),c=r(34),p=r(7),d=r(11),l=r(60),u=r(16),g=r(36),h=r(30),f=function(){function e(t,r){var p=this;if(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(t),!(r=r||{}).cluster&&!r.wsHost&&!r.httpHost){var f=h.default.buildLogSuffix("javascriptQuickStart");u.default.warn("You should always specify a cluster when connecting. "+f)}this.key=t,this.config=n.extend(l.getGlobalConfig(),r.cluster?l.getClusterConfig(r.cluster):{},r),this.channels=g.default.createChannels(),this.global_emitter=new i.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new s.default(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:a.default.INFO,version:d.default.VERSION}),this.config.disableStats||(this.timelineSender=g.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+o.default.TimelineTransport.name}));this.connection=g.default.createConnectionManager(this.key,n.extend({getStrategy:function(e){var t=n.extend({},p.config,e);return c.build(o.default.getDefaultStrategy(t),t)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",(function(){p.subscribeAll(),p.timelineSender&&p.timelineSender.send(p.connection.isUsingTLS())})),this.connection.bind("message",(function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var r=p.channel(e.channel);r&&r.handleEvent(e)}t||p.global_emitter.emit(e.event,e.data)})),this.connection.bind("connecting",(function(){p.channels.disconnect()})),this.connection.bind("disconnected",(function(){p.channels.disconnect()})),this.connection.bind("error",(function(e){u.default.warn("Error",e)})),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,r=e.instances.length;t<r;t++)e.instances[t].connect()},e.log=function(t){e.logToConsole&&global.console&&global.console.log&&global.console.log(t)},e.getClientFeatures=function(){return n.keys(n.filterObject({ws:o.default.Transports.ws},(function(e){return e.isSupported({})})))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new p.PeriodicTimer(6e4,(function(){t.send(e)}))}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,r){return this.global_emitter.bind(e,t,r),this},e.prototype.unbind=function(e,t,r){return this.global_emitter.unbind(e,t,r),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&"connected"===this.connection.state&&t.unsubscribe()},e.prototype.send_event=function(e,t,r){return this.connection.send_event(e,t,r)},e.prototype.shouldUseTLS=function(){return"https:"===o.default.getProtocol()||(!0===this.config.forceTLS||Boolean(this.config.encrypted))},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=o.default,e.ScriptReceivers=o.default.ScriptReceivers,e.DependenciesReceivers=o.default.DependenciesReceivers,e.auth_callbacks=o.default.auth_callbacks,e}();t.__esModule=!0,t.default=f,o.default.setup(f)},function(e,t,r){"use strict";var o=r(3),n=r(26),i=r(27),s=r(28),a=r(29),c=r(31),p=o.default.getDefaultStrategy,d=o.default.Transports,l=o.default.setup,u=o.default.getProtocol,g=o.default.isXHRSupported,h=o.default.getLocalStorage,f=o.default.createXHR,y=o.default.createWebSocket,m=o.default.addUnloadListener,S=o.default.removeUnloadListener,b=o.default.transportConnectionInitializer,_={getDefaultStrategy:p,Transports:d,setup:l,getProtocol:u,isXHRSupported:g,createSocketRequest:o.default.createSocketRequest,getLocalStorage:h,createXHR:f,createWebSocket:y,addUnloadListener:m,removeUnloadListener:S,transportConnectionInitializer:b,HTTPFactory:o.default.HTTPFactory,TimelineTransport:c.default,getAuthorizers:function(){return{ajax:a.default}},getWebSocketAPI:function(){return n.Client},getXHRAPI:function(){return i.XMLHttpRequest},getNetwork:function(){return s.Network}};t.__esModule=!0,t.default=_},function(e,t,r){"use strict";var o=r(4),n=r(9),i=r(17),s=r(18),a=r(19),c={getDefaultStrategy:i.default,Transports:n.default,transportConnectionInitializer:s.default,HTTPFactory:a.default,setup:function(e){e.ready()},getLocalStorage:function(){},getClientFeatures:function(){return o.keys(o.filterObject({ws:n.default.ws},(function(e){return e.isSupported({})})))},getProtocol:function(){return"http:"},isXHRSupported:function(){return!0},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);throw"Cross-origin HTTP requests are not supported"},createXHR:function(){return new(this.getXHRAPI())},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},addUnloadListener:function(e){},removeUnloadListener:function(e){}};t.__esModule=!0,t.default=c},function(e,t,r){"use strict";var o=r(5),n=r(6);function i(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,e)}function s(e,t){for(var r=[],o=0;o<e.length;o++)r.push(t(e[o],o,e,r));return r}function a(e,t){var r={};return i(e,(function(e,o){r[o]=t(e)})),r}function c(e,t){var r={};return i(e,(function(o,n){(t&&t(o,n,e,r)||Boolean(o))&&(r[n]=o)})),r}function p(e){var t=[];return i(e,(function(e,r){t.push([r,e])})),t}function d(e){return a(e,(function(e){return"object"==typeof e&&(e=u(e)),encodeURIComponent(o.default(e.toString()))}))}function l(e){var t=[],r=[];return function e(o,n){var i,s,a;switch(typeof o){case"object":if(!o)return null;for(i=0;i<t.length;i+=1)if(t[i]===o)return{$ref:r[i]};if(t.push(o),r.push(n),"[object Array]"===Object.prototype.toString.apply(o))for(a=[],i=0;i<o.length;i+=1)a[i]=e(o[i],n+"["+i+"]");else for(s in a={},o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=e(o[s],n+"["+JSON.stringify(s)+"]"));return a;case"number":case"string":case"boolean":return o}}(e,"$")}function u(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(l(e))}}t.extend=function e(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];for(var n=0;n<r.length;n++){var i=r[n];for(var s in i)i[s]&&i[s].constructor&&i[s].constructor===Object?t[s]=e(t[s]||{},i[s]):t[s]=i[s]}return t},t.stringify=function(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(u(arguments[t]));return e.join(" : ")},t.arrayIndexOf=function(e,t){var r=Array.prototype.indexOf;if(null===e)return-1;if(r&&e.indexOf===r)return e.indexOf(t);for(var o=0,n=e.length;o<n;o++)if(e[o]===t)return o;return-1},t.objectApply=i,t.keys=function(e){var t=[];return i(e,(function(e,r){t.push(r)})),t},t.values=function(e){var t=[];return i(e,(function(e){t.push(e)})),t},t.apply=function(e,t,r){for(var o=0;o<e.length;o++)t.call(r||global,e[o],o,e)},t.map=s,t.mapObject=a,t.filter=function(e,t){t=t||function(e){return!!e};for(var r=[],o=0;o<e.length;o++)t(e[o],o,e,r)&&r.push(e[o]);return r},t.filterObject=c,t.flatten=p,t.any=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1},t.all=function(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0},t.encodeParamsObject=d,t.buildQueryString=function(e){return s(p(d(c(e,(function(e){return void 0!==e})))),n.default.method("join","=")).join("&")},t.decycleObject=l,t.safeJSONStringify=u},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){return d(c(e))};for(var r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={},i=0,s=o.length;i<s;i++)n[o.charAt(i)]=i;var a=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?r(192|t>>>6)+r(128|63&t):r(224|t>>>12&15)+r(128|t>>>6&63)+r(128|63&t)},c=function(e){return e.replace(/[^\x00-\x7F]/g,a)},p=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[o.charAt(r>>>18),o.charAt(r>>>12&63),t>=2?"=":o.charAt(r>>>6&63),t>=1?"=":o.charAt(63&r)].join("")},d=global.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,p)}},function(e,t,r){"use strict";var o=r(7),n={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new o.OneOffTimer(0,e)},method:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,o.concat(arguments))}}};t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(8);function i(e){global.clearTimeout(e)}function s(e){global.clearInterval(e)}var a=function(e){function t(t,r){e.call(this,setTimeout,i,t,(function(e){return r(),null}))}return o(t,e),t}(n.default);t.OneOffTimer=a;var c=function(e){function t(t,r){e.call(this,setInterval,s,t,(function(e){return r(),e}))}return o(t,e),t}(n.default);t.PeriodicTimer=c},function(e,t){"use strict";var r=function(){function e(e,t,r,o){var n=this;this.clear=t,this.timer=e((function(){n.timer&&(n.timer=o(n.timer))}),r)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}();t.__esModule=!0,t.default=r},function(e,t,r){"use strict";var o=r(10),n=r(12),i=r(4),s=r(2),a=new n.default({urls:o.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(s.default.getWebSocketAPI())},isSupported:function(){return Boolean(s.default.getWebSocketAPI())},getSocket:function(e){return s.default.createWebSocket(e)}}),c={urls:o.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};t.streamingConfiguration=i.extend({getSocket:function(e){return s.default.HTTPFactory.createStreamingSocket(e)}},c),t.pollingConfiguration=i.extend({getSocket:function(e){return s.default.HTTPFactory.createPollingSocket(e)}},c);var p={isSupported:function(){return s.default.isXHRSupported()}},d={ws:a,xhr_streaming:new n.default(i.extend({},t.streamingConfiguration,p)),xhr_polling:new n.default(i.extend({},t.pollingConfiguration,p))};t.__esModule=!0,t.default=d},function(e,t,r){"use strict";var o=r(11);function n(e,t,r){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+r}function i(e,t){return"/app/"+e+("?protocol="+o.default.PROTOCOL+"&client=js&version="+o.default.VERSION+(t?"&"+t:""))}t.ws={getInitial:function(e,t){return n("ws",t,(t.httpPath||"")+i(e,"flash=false"))}},t.http={getInitial:function(e,t){return n("http",t,(t.httpPath||"/pusher")+i(e))}},t.sockjs={getInitial:function(e,t){return n("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return i(e)}}},function(e,t){"use strict";t.__esModule=!0,t.default={VERSION:"4.4.0",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""}},function(e,t,r){"use strict";var o=r(13),n=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,r,n){return new o.default(this.hooks,e,t,r,n)},e}();t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(6),i=r(4),s=r(14),a=r(16),c=r(2),p=function(e){function t(t,r,o,n,i){e.call(this),this.initialize=c.default.transportConnectionInitializer,this.hooks=t,this.name=r,this.priority=o,this.key=n,this.options=i,this.state="new",this.timeline=i.timeline,this.activityTimeout=i.activityTimeout,this.id=this.timeline.generateUniqueID()}return o(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return n.default.defer((function(){e.onError(t),e.changeState("closed")})),!1}return this.bindListeners(),a.default.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(n.default.defer((function(){t.socket&&t.socket.send(e)})),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return i.extend({cid:this.id},e)},t}(s.default);t.__esModule=!0,t.default=p},function(e,t,r){"use strict";var o=r(4),n=r(15),i=function(){function e(e){this.callbacks=new n.default,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,r){return this.callbacks.add(e,t,r),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,r){return this.callbacks.remove(e,t,r),this},e.prototype.unbind_global=function(e){return e?(this.global_callbacks=o.filter(this.global_callbacks||[],(function(t){return t!==e})),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,r){for(var o=0;o<this.global_callbacks.length;o++)this.global_callbacks[o](e,t);var n=this.callbacks.get(e),i=[];if(r?i.push(t,r):t&&i.push(t),n&&n.length>0)for(o=0;o<n.length;o++)n[o].fn.apply(n[o].context||global,i);else this.failThrough&&this.failThrough(e,t);return this},e}();t.__esModule=!0,t.default=i},function(e,t,r){"use strict";var o=r(4),n=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[i(e)]},e.prototype.add=function(e,t,r){var o=i(e);this._callbacks[o]=this._callbacks[o]||[],this._callbacks[o].push({fn:t,context:r})},e.prototype.remove=function(e,t,r){if(e||t||r){var n=e?[i(e)]:o.keys(this._callbacks);t||r?this.removeCallback(n,t,r):this.removeAllCallbacks(n)}else this._callbacks={}},e.prototype.removeCallback=function(e,t,r){o.apply(e,(function(e){this._callbacks[e]=o.filter(this._callbacks[e]||[],(function(e){return t&&t!==e.fn||r&&r!==e.context})),0===this._callbacks[e].length&&delete this._callbacks[e]}),this)},e.prototype.removeAllCallbacks=function(e){o.apply(e,(function(e){delete this._callbacks[e]}),this)},e}();function i(e){return"_"+e}t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=r(4),n=r(1),i={debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];n.default.log&&n.default.log(o.stringify.apply(this,arguments))},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=o.stringify.apply(this,arguments);n.default.log?n.default.log(r):global.console&&(global.console.warn?global.console.warn(r):global.console.log&&global.console.log(r))}};t.__esModule=!0,t.default=i},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t;return t=e.useTLS?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_loop"]]],[[":def","ws_options",{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}],[":def","wss_options",[":extend",":ws_options",{useTLS:!0}]],[":def","http_options",{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","xhr_streaming","xhr_streaming",1,":http_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":http_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","streaming_loop",[":sequential",":timeouts",":xhr_streaming"]],[":def","polling_loop",[":sequential",":timeouts",":xhr_polling"]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],t,":http_loop"]]]]]}},function(e,t){"use strict";t.__esModule=!0,t.default=function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.useTLS?"s":"")})),this.hooks.isInitialized()?this.changeState("initialized"):this.onClose()}},function(e,t,r){"use strict";var o=r(20),n=r(21),i=r(23),s=r(24),a=r(25),c={createStreamingSocket:function(e){return this.createSocket(i.default,e)},createPollingSocket:function(e){return this.createSocket(s.default,e)},createSocket:function(e,t){return new n.default(e,t)},createXHR:function(e,t){return this.createRequest(a.default,e,t)},createRequest:function(e,t,r){return new o.default(e,t,r)}};t.__esModule=!0,t.default=c},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(2),i=r(14),s=function(e){function t(t,r,o){e.call(this),this.hooks=t,this.method=r,this.url=o}return o(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},n.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(n.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var r=this.advanceBuffer(t);if(!r)break;this.emit("chunk",{status:e,data:r})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),r=t.indexOf("\n");return-1!==r?(this.position+=r+1,t.slice(0,r)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(i.default);t.__esModule=!0,t.default=s},function(e,t,r){"use strict";var o=r(22),n=r(6),i=r(2),s=1,a=function(){function e(e,t){this.hooks=e,this.session=p(1e3)+"/"+function(e){for(var t=[],r=0;r<e;r++)t.push(p(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=o.default.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==o.default.OPEN)return!1;try{return i.default.createSocketRequest("POST",c((t=this.location,r=this.session,t.base+"/"+r+"/xhr_send"))).start(e),!0}catch(e){return!1}var t,r},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,r){this.closeStream(),this.readyState=o.default.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:r})},e.prototype.onChunk=function(e){var t;if(200===e.status)switch(this.readyState===o.default.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var r=0;r<t.length;r++)this.onEvent(t[r]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}},e.prototype.onOpen=function(e){var t,r,n;this.readyState===o.default.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,r=e.hostname,(n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+r+n[3])),this.readyState=o.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===o.default.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=i.default.createSocketRequest("POST",c(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(t){e.onChunk(t)})),this.stream.bind("finished",(function(t){e.hooks.onFinished(e,t)})),this.stream.bind("buffer_too_long",(function(){e.reconnect()}));try{this.stream.start()}catch(t){n.default.defer((function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)}))}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function c(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+s++}function p(e){return Math.floor(Math.random()*e)}t.__esModule=!0,t.default=a},function(e,t){"use strict";var r;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(r||(r={})),t.__esModule=!0,t.default=r},function(e,t){"use strict";t.__esModule=!0,t.default={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}}},function(e,t){"use strict";t.__esModule=!0,t.default={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}}},function(e,t,r){"use strict";var o=r(2),n={getRequest:function(e){var t=new(o.default.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}};t.__esModule=!0,t.default=n},function(e,t){e.exports=r(98)},function(e,t){e.exports=r(116)},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.isOnline=function(){return!0},t}(r(14).default);t.NetInfo=n,t.Network=new n},function(e,t,r){"use strict";var o=r(16),n=r(2),i=r(30);t.__esModule=!0,t.default=function(e,t,r){var s;for(var a in(s=n.default.createXHR()).open("POST",this.options.authEndpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)s.setRequestHeader(a,this.authOptions.headers[a]);return s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var e,t=!1;try{e=JSON.parse(s.responseText),t=!0}catch(e){r(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+s.responseText)}t&&r(!1,e)}else{var n=i.default.buildLogSuffix("authenticationEndpoint");o.default.warn("Couldn't retrieve authentication info. "+s.status+"Clients must be authenticated to join private or presence channels. "+n),r(!0,s.status)}},s.send(this.composeQuery(t)),s}},function(e,t){"use strict";var r={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"}}};t.__esModule=!0,t.default={buildLogSuffix:function(e){var t,o=r.urls[e];return o?(o.fullUrl?t=o.fullUrl:o.path&&(t=r.baseUrl+o.path),t?"See: "+t:""):""}}},function(e,t,r){"use strict";var o=r(16),n=r(4),i=r(2),s={name:"xhr",getAgent:function(e,t){return function(r,s){var a="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path;a+="/2?"+n.buildQueryString(r);var c=i.default.createXHR();c.open("GET",a,!0),c.onreadystatechange=function(){if(4===c.readyState){var t=c.status,r=c.responseText;if(200!==t)return void o.default.debug("TimelineSender Error: received "+t+" from stats.pusher.com");try{var n=JSON.parse(r).host}catch(e){o.default.debug("TimelineSenderError: invalid response "+r)}n&&(e.host=n)}},c.send()}}};t.__esModule=!0,t.default=s},function(e,t,r){"use strict";var o=r(4),n=r(6),i=r(33),s=function(){function e(e,t,r){this.key=e,this.session=t,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(o.extend({},t,{timestamp:n.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(i.default.ERROR,e)},e.prototype.info=function(e){this.log(i.default.INFO,e)},e.prototype.debug=function(e){this.log(i.default.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var r=this,n=o.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(function(e,o){e||r.sent++,t&&t(e,o)})),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}();t.__esModule=!0,t.default=s},function(e,t){"use strict";var r;!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(r||(r={})),t.__esModule=!0,t.default=r},function(e,t,r){"use strict";var o=r(4),n=r(6),i=r(35),s=r(46),a=r(53),c=r(54),p=r(55),d=r(56),l=r(57),u=r(58),g=r(59),h=r(2).default.Transports;t.build=function(e,t){return v(e,o.extend({},m,t))[1].strategy};var f={isSupported:function(){return!1},connect:function(e,t){var r=n.default.defer((function(){t(new s.UnsupportedStrategy)}));return{abort:function(){r.ensureAborted()},forceMinPriority:function(){}}}};function y(e){return function(t){return[e.apply(this,arguments),t]}}var m={extend:function(e,t,r){return[o.extend({},t,r),e]},def:function(e,t,r){if(void 0!==e[t])throw"Redefining symbol "+t;return e[t]=r,[void 0,e]},def_transport:function(e,t,r,n,i,c){var p,d=h[r];if(!d)throw new s.UnsupportedTransport(r);p=!(e.enabledTransports&&-1===o.arrayIndexOf(e.enabledTransports,t)||e.disabledTransports&&-1!==o.arrayIndexOf(e.disabledTransports,t))?new a.default(t,n,c?c.getAssistant(d):d,o.extend({key:e.key,useTLS:e.useTLS,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},i)):f;var l=e.def(e,t,p)[1];return l.Transports=e.Transports||{},l.Transports[t]=p,[void 0,l]},transport_manager:y((function(e,t){return new i.default(t)})),sequential:y((function(e,t){var r=Array.prototype.slice.call(arguments,2);return new c.default(r,t)})),cached:y((function(e,t,r){return new d.default(r,e.Transports,{ttl:t,timeline:e.timeline,useTLS:e.useTLS})})),first_connected:y((function(e,t){return new g.default(t)})),best_connected_ever:y((function(){var e=Array.prototype.slice.call(arguments,1);return new p.default(e)})),delayed:y((function(e,t,r){return new l.default(r,{delay:t})})),if:y((function(e,t,r,o){return new u.default(t,r,o)})),is_supported:y((function(e,t){return function(){return t.isSupported()}}))};function S(e){return"string"==typeof e&&":"===e.charAt(0)}function b(e,t){return t[e.slice(1)]}function _(e,t){if(S(e[0])){var r=b(e[0],t);if(e.length>1){if("function"!=typeof r)throw"Calling non-function "+e[0];var n=[o.extend({},t)].concat(o.map(e.slice(1),(function(e){return v(e,o.extend({},t))[0]})));return r.apply(this,n)}return[r,t]}return function e(t,r){if(0===t.length)return[[],r];var o=v(t[0],r),n=e(t.slice(1),o[1]);return[[o[0]].concat(n[0]),n[1]]}(e,t)}function v(e,t){return"string"==typeof e?function(e,t){if(!S(e))return[e,t];var r=b(e,t);if(void 0===r)throw"Undefined symbol "+e;return[r,t]}(e,t):"object"==typeof e&&e instanceof Array&&e.length>0?_(e,t):[e,t]}},function(e,t,r){"use strict";var o=r(36),n=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return o.default.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}();t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=r(37),n=r(38),i=r(41),s=r(42),a=r(43),c=r(44),p=r(48),d=r(45),l=r(51),u=r(52),g={createChannels:function(){return new u.default},createConnectionManager:function(e,t){return new l.default(e,t)},createChannel:function(e,t){return new d.default(e,t)},createPrivateChannel:function(e,t){return new c.default(e,t)},createPresenceChannel:function(e,t){return new a.default(e,t)},createEncryptedChannel:function(e,t){return new p.default(e,t)},createTimelineSender:function(e,t){return new s.default(e,t)},createAuthorizer:function(e,t){return t.authorizer?t.authorizer(e,t):new i.default(e,t)},createHandshake:function(e,t){return new n.default(e,t)},createAssistantToTheTransportManager:function(e,t,r){return new o.default(e,t,r)}};t.__esModule=!0,t.default=g},function(e,t,r){"use strict";var o=r(6),n=r(4),i=function(){function e(e,t,r){this.manager=e,this.transport=t,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,r,i){var s=this;i=n.extend({},i,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(e,t,r,i),c=null,p=function(){a.unbind("open",p),a.bind("closed",d),c=o.default.now()},d=function(e){if(a.unbind("closed",d),1002===e.code||1003===e.code)s.manager.reportDeath();else if(!e.wasClean&&c){var t=o.default.now()-c;t<2*s.maxPingDelay&&(s.manager.reportDeath(),s.pingDelay=Math.max(t/2,s.minPingDelay))}};return a.bind("open",p),a},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}();t.__esModule=!0,t.default=i},function(e,t,r){"use strict";var o=r(4),n=r(39),i=r(40),s=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var r;e.unbindListeners();try{r=n.processHandshake(t)}catch(t){return e.finish("error",{error:t}),void e.transport.close()}"connected"===r.action?e.finish("connected",{connection:new i.default(r.id,e.transport),activityTimeout:r.activityTimeout}):(e.finish(r.action,{error:r.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var r=n.getCloseAction(t)||"backoff",o=n.getCloseError(t);e.finish(r,{error:o})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(o.extend({transport:this.transport,action:e},t))},e}();t.__esModule=!0,t.default=s},function(e,t){"use strict";t.decodeMessage=function(e){try{var t=JSON.parse(e.data),r=t.data;if("string"==typeof r)try{r=JSON.parse(t.data)}catch(e){}var o={event:t.event,channel:t.channel,data:r};return t.user_id&&(o.user_id=t.user_id),o}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},t.encodeMessage=function(e){return JSON.stringify(e)},t.processHandshake=function(e){var r=t.decodeMessage(e);if("pusher:connection_established"===r.event){if(!r.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:r.data.socket_id,activityTimeout:1e3*r.data.activity_timeout}}if("pusher:error"===r.event)return{action:this.getCloseAction(r.data),error:this.getCloseError(r.data)};throw"Invalid handshake"},t.getCloseAction=function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},t.getCloseError=function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(4),i=r(14),s=r(39),a=r(16),c=function(e){function t(t,r){e.call(this),this.id=t,this.transport=r,this.activityTimeout=r.activityTimeout,this.bindListeners()}return o(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,r){var o={event:e,data:t};return r&&(o.channel=r),a.default.debug("Event sent",o),this.send(s.encodeMessage(o))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var r;try{r=s.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(void 0!==r){switch(a.default.debug("Event recd",r),r.event){case"pusher:error":e.emit("error",{type:"PusherError",data:r.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",r)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){r(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},r=function(){n.objectApply(t,(function(t,r){e.transport.unbind(r,t)}))};n.objectApply(t,(function(t,r){e.transport.bind(r,t)}))},t.prototype.handleCloseEvent=function(e){var t=s.getCloseAction(e),r=s.getCloseError(e);r&&this.emit("error",r),t&&this.emit(t,{action:t,error:r})},t}(i.default);t.__esModule=!0,t.default=c},function(e,t,r){"use strict";var o=r(2),n=function(){function e(e,t){this.channel=e;var r=t.authTransport;if(void 0===o.default.getAuthorizers()[r])throw"'"+r+"' is not a recognized auth transport";this.type=r,this.options=t,this.authOptions=(t||{}).auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var r in this.authOptions.params)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(this.authOptions.params[r]);return t},e.prototype.authorize=function(t,r){return e.authorizers=e.authorizers||o.default.getAuthorizers(),e.authorizers[this.type].call(this,o.default,t,r)},e}();t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=r(2),n=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(o.default.TimelineTransport.getAgent(this,e),t)},e}();t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(44),i=r(16),s=r(47),a=r(30),c=function(e){function t(t,r){e.call(this,t,r),this.members=new s.default}return o(t,e),t.prototype.authorize=function(t,r){var o=this;e.prototype.authorize.call(this,t,(function(e,t){if(!e){if(void 0===t.channel_data){var n=a.default.buildLogSuffix("authenticationEndpoint");return i.default.warn("Invalid auth response for channel '"+o.name+"',expected 'channel_data' field. "+n),void r("Invalid auth response")}var s=JSON.parse(t.channel_data);o.members.setMyID(s.user_id)}r(e,t)}))},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var r=e.data,o={};e.user_id&&(o.user_id=e.user_id),this.emit(t,r,o)}},t.prototype.handleInternalEvent=function(e){var t=e.event,r=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:member_added":var o=this.members.addMember(r);this.emit("pusher:member_added",o);break;case"pusher_internal:member_removed":var n=this.members.removeMember(r);n&&this.emit("pusher:member_removed",n)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(n.default);t.__esModule=!0,t.default=c},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(36),i=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.authorize=function(e,t){return n.default.createAuthorizer(this,this.pusher.config).authorize(e,t)},t}(r(45).default);t.__esModule=!0,t.default=i},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(14),i=r(46),s=r(16),a=r(30),c=function(e){function t(t,r){e.call(this,(function(e,r){s.default.debug("No callbacks on "+t+" for "+e)})),this.name=t,this.pusher=r,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return o(t,e),t.prototype.authorize=function(e,t){return t(!1,{})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new i.BadEventName("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var r=a.default.buildLogSuffix("triggeringClientEvents");s.default.warn("Client event triggered before channel 'subscription_succeeded' event . "+r)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,r=e.data;if("pusher_internal:subscription_succeeded"===t)this.handleSubscriptionSucceededEvent(e);else if(0!==t.indexOf("pusher_internal:")){this.emit(t,r,{})}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(t,r){t?e.emit("pusher:subscription_error",r):e.pusher.send_event("pusher:subscribe",{auth:r.auth,channel_data:r.channel_data,channel:e.name})})))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(n.default);t.__esModule=!0,t.default=c},function(e,t){"use strict";var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.BadEventName=o;var n=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.RequestTimedOut=n;var i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.TransportPriorityTooLow=i;var s=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.TransportClosed=s;var a=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.UnsupportedFeature=a;var c=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.UnsupportedTransport=c;var p=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(Error);t.UnsupportedStrategy=p},function(e,t,r){"use strict";var o=r(4),n=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;o.objectApply(this.members,(function(r,o){e(t.get(o))}))},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}();t.__esModule=!0,t.default=n},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(44),i=r(46),s=r(16),a=r(49),c=r(50),p=function(e){function t(){e.apply(this,arguments),this.key=null}return o(t,e),t.prototype.authorize=function(t,r){var o=this;e.prototype.authorize.call(this,t,(function(e,t){if(e)r(!0,t);else{var n=t.shared_secret;if(!n){var i="No shared_secret key in auth payload for encrypted channel: "+o.name;return r(!0,i),void s.default.warn("Error: "+i)}o.key=c.decodeBase64(n),delete t.shared_secret,r(!1,t)}}))},t.prototype.trigger=function(e,t){throw new i.UnsupportedFeature("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var r=t.event,o=t.data;0!==r.indexOf("pusher_internal:")&&0!==r.indexOf("pusher:")?this.handleEncryptedEvent(r,o):e.prototype.handleEvent.call(this,t)},t.prototype.handleEncryptedEvent=function(e,t){var r=this;if(this.key)if(t.ciphertext&&t.nonce){var o=c.decodeBase64(t.ciphertext);if(o.length<a.secretbox.overheadLength)s.default.warn("Expected encrypted event ciphertext length to be "+a.secretbox.overheadLength+", got: "+o.length);else{var n=c.decodeBase64(t.nonce);if(n.length<a.secretbox.nonceLength)s.default.warn("Expected encrypted event nonce length to be "+a.secretbox.nonceLength+", got: "+n.length);else{var i=a.secretbox.open(o,n,this.key);if(null===i)return s.default.debug("Failed to decrypted an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(t,p){t?s.default.warn("Failed to make a request to the authEndpoint: "+p+". Unable to fetch new key, so dropping encrypted event"):null!==(i=a.secretbox.open(o,n,r.key))?r.emitJSON(e,c.encodeUTF8(i)):s.default.warn("Failed to decrypt event with new key. Dropping encrypted event")}));this.emitJSON(e,c.encodeUTF8(i))}}}else s.default.warn("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else s.default.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.emitJSON=function(e,t){try{this.emit(e,JSON.parse(t))}catch(r){this.emit(e,t)}return this},t}(n.default);t.__esModule=!0,t.default=p},function(e,t){e.exports=r(117)},function(e,t){e.exports=r(118)},function(e,t,r){"use strict";var o=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function o(){this.constructor=e}e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},n=r(14),i=r(7),s=r(16),a=r(4),c=r(2),p=function(e){function t(t,r){var o=this;e.call(this),this.key=t,this.options=r||{},this.state="initialized",this.connection=null,this.usingTLS=!!r.useTLS,this.timeline=this.options.timeline,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=c.default.getNetwork();n.bind("online",(function(){o.timeline.info({netinfo:"online"}),"connecting"!==o.state&&"unavailable"!==o.state||o.retryIn(0)})),n.bind("offline",(function(){o.timeline.info({netinfo:"offline"}),o.connection&&o.sendActivityCheck()})),this.updateStrategy()}return o(t,e),t.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,r){return!!this.connection&&this.connection.send_event(e,t,r)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this,t=function(r,o){r?e.runner=e.strategy.connect(0,t):"error"===o.action?(e.emit("error",{type:"HandshakeError",error:o.error}),e.timeline.error({handshakeError:o.error})):(e.abortConnecting(),e.handshakeCallbacks[o.action](o))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection)&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new i.OneOffTimer(e||0,(function(){t.disconnectInternally(),t.connect()}))},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new i.OneOffTimer(this.options.unavailableTimeout,(function(){e.updateState("unavailable")}))},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new i.OneOffTimer(this.options.pongTimeout,(function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)}))},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new i.OneOffTimer(this.activityTimeout,(function(){e.sendActivityCheck()})))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return a.extend({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return a.extend({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(r){r.error&&e.emit("error",{type:"WebSocketError",error:r.error}),t(r)}};return{tls_only:t((function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)})),refused:t((function(){e.disconnect()})),backoff:t((function(){e.retryIn(1e3)})),retry:t((function(){e.retryIn(0)}))}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var r=this.state;if(this.state=e,r!==e){var o=e;"connected"===o&&(o+=" with new socket ID "+t.socket_id),s.default.debug("State changed",r+" -> "+o),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:r,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(n.default);t.__esModule=!0,t.default=p},function(e,t,r){"use strict";var o=r(4),n=r(36),i=r(46),s=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if("ReactNative"==navigator.product){throw new i.UnsupportedFeature("Encrypted channels are not yet supported when using React Native builds.")}return n.default.createEncryptedChannel(e,t)}return 0===e.indexOf("private-")?n.default.createPrivateChannel(e,t):0===e.indexOf("presence-")?n.default.createPresenceChannel(e,t):n.default.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){return o.values(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){o.objectApply(this.channels,(function(e){e.disconnect()}))},e}();t.__esModule=!0,t.default=s},function(e,t,r){"use strict";var o=r(36),n=r(6),i=r(46),s=r(4),a=function(){function e(e,t,r,o){this.name=e,this.priority=t,this.transport=r,this.options=o||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var r=this;if(!this.isSupported())return c(new i.UnsupportedStrategy,t);if(this.priority<e)return c(new i.TransportPriorityTooLow,t);var n=!1,a=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),p=null,d=function(){a.unbind("initialized",d),a.connect()},l=function(){p=o.default.createHandshake(a,(function(e){n=!0,h(),t(null,e)}))},u=function(e){h(),t(e)},g=function(){var e;h(),e=s.safeJSONStringify(a),t(new i.TransportClosed(e))},h=function(){a.unbind("initialized",d),a.unbind("open",l),a.unbind("error",u),a.unbind("closed",g)};return a.bind("initialized",d),a.bind("open",l),a.bind("error",u),a.bind("closed",g),a.initialize(),{abort:function(){n||(h(),p?p.close():a.close())},forceMinPriority:function(e){n||r.priority<e&&(p?p.close():a.close())}}},e}();function c(e,t){return n.default.defer((function(){t(e)})),{abort:function(){},forceMinPriority:function(){}}}t.__esModule=!0,t.default=a},function(e,t,r){"use strict";var o=r(4),n=r(6),i=r(7),s=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return o.any(this.strategies,n.default.method("isSupported"))},e.prototype.connect=function(e,t){var r=this,o=this.strategies,n=0,i=this.timeout,s=null,a=function(c,p){p?t(null,p):(n+=1,r.loop&&(n%=o.length),n<o.length?(i&&(i*=2,r.timeoutLimit&&(i=Math.min(i,r.timeoutLimit))),s=r.tryStrategy(o[n],e,{timeout:i,failFast:r.failFast},a)):t(!0))};return s=this.tryStrategy(o[n],e,{timeout:i,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,r,o){var n=null,s=null;return r.timeout>0&&(n=new i.OneOffTimer(r.timeout,(function(){s.abort(),o(!0)}))),s=e.connect(t,(function(e,t){e&&n&&n.isRunning()&&!r.failFast||(n&&n.ensureAborted(),o(e,t))})),{abort:function(){n&&n.ensureAborted(),s.abort()},forceMinPriority:function(e){s.forceMinPriority(e)}}},e}();t.__esModule=!0,t.default=s},function(e,t,r){"use strict";var o=r(4),n=r(6),i=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return o.any(this.strategies,n.default.method("isSupported"))},e.prototype.connect=function(e,t){return function(e,t,r){var n=o.map(e,(function(e,o,n,i){return e.connect(t,r(o,i))}));return{abort:function(){o.apply(n,s)},forceMinPriority:function(e){o.apply(n,(function(t){t.forceMinPriority(e)}))}}}(this.strategies,e,(function(e,r){return function(n,i){r[e].error=n,n?function(e){return o.all(e,(function(e){return Boolean(e.error)}))}(r)&&t(!0):(o.apply(r,(function(e){e.forceMinPriority(i.transport.priority)})),t(null,i))}}))},e}();function s(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}t.__esModule=!0,t.default=i},function(e,t,r){"use strict";var o=r(6),n=r(2),i=r(54),s=r(4),a=function(){function e(e,t,r){this.strategy=e,this.transports=t,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var r=this.usingTLS,a=function(e){var t=n.default.getLocalStorage();if(t)try{var r=t[c(e)];if(r)return JSON.parse(r)}catch(t){p(e)}return null}(r),d=[this.strategy];if(a&&a.timestamp+this.ttl>=o.default.now()){var l=this.transports[a.transport];l&&(this.timeline.info({cached:!0,transport:a.transport,latency:a.latency}),d.push(new i.default([l],{timeout:2*a.latency+1e3,failFast:!0})))}var u=o.default.now(),g=d.pop().connect(e,(function i(a,l){a?(p(r),d.length>0?(u=o.default.now(),g=d.pop().connect(e,i)):t(a)):(!function(e,t,r){var i=n.default.getLocalStorage();if(i)try{i[c(e)]=s.safeJSONStringify({timestamp:o.default.now(),transport:t,latency:r})}catch(e){}}(r,l.transport.name,o.default.now()-u),t(null,l))}));return{abort:function(){g.abort()},forceMinPriority:function(t){e=t,g&&g.forceMinPriority(t)}}},e}();function c(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function p(e){var t=n.default.getLocalStorage();if(t)try{delete t[c(e)]}catch(e){}}t.__esModule=!0,t.default=a},function(e,t,r){"use strict";var o=r(7),n=function(){function e(e,t){var r=t.delay;this.strategy=e,this.options={delay:r}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var r,n=this.strategy,i=new o.OneOffTimer(this.options.delay,(function(){r=n.connect(e,t)}));return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}},e}();t.__esModule=!0,t.default=n},function(e,t){"use strict";var r=function(){function e(e,t,r){this.test=e,this.trueBranch=t,this.falseBranch=r}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}();t.__esModule=!0,t.default=r},function(e,t){"use strict";var r=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var r=this.strategy.connect(e,(function(e,o){o&&r.abort(),t(e,o)}));return r},e}();t.__esModule=!0,t.default=r},function(e,t,r){"use strict";var o=r(11);t.getGlobalConfig=function(){return{wsHost:o.default.host,wsPort:o.default.ws_port,wssPort:o.default.wss_port,wsPath:o.default.ws_path,httpHost:o.default.sockjs_host,httpPort:o.default.sockjs_http_port,httpsPort:o.default.sockjs_https_port,httpPath:o.default.sockjs_path,statsHost:o.default.stats_host,authEndpoint:o.default.channel_auth_endpoint,authTransport:o.default.channel_auth_transport,activity_timeout:o.default.activity_timeout,pong_timeout:o.default.pong_timeout,unavailable_timeout:o.default.unavailable_timeout}},t.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}])},function(e,t,r){var o=r(0),n=r(20),i=r(34),s=function(e,t,r,o,s){s=s||{},this._stream=t,this._driver=n.http(e,{maxLength:s.maxLength,protocols:o});var a=this;if(this._stream&&this._stream.writable){if(!this._stream.readable)return this._stream.end();var c=function(){a._stream.removeListener("data",c)};this._stream.on("data",c),i.call(this,s),process.nextTick((function(){a._driver.start(),a._driver.io.write(r)}))}};o.inherits(s,i),s.isWebSocket=function(e){return n.isWebSocket(e)},s.validateOptions=function(e,t){n.validateOptions(e,t)},s.WebSocket=s,s.Client=r(113),s.EventSource=r(115),e.exports=s},function(e,t,r){"use strict";var o=r(1).Stream,n=r(0),i=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};n.inherits(i,o),i.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},i.prototype.resume=function(){this._paused=!1,this.emit("drain");var e=this._driver.messages;e._paused=!1,e.emit("drain")},i.prototype.write=function(e){return!!this.writable&&(this._driver.parse(e),!this._paused)},i.prototype.end=function(e){if(this.writable){void 0!==e&&this.write(e),this.writable=!1;var t=this._driver.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}},i.prototype.destroy=function(){this.end()};var s=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};n.inherits(s,o),s.prototype.pause=function(){this._driver.io._paused=!0},s.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},s.prototype.write=function(e){return!!this.writable&&("string"==typeof e?this._driver.text(e):this._driver.binary(e),!this._paused)},s.prototype.end=function(e){void 0!==e&&this.write(e)},s.prototype.destroy=function(){},t.IO=i,t.Messages=s},function(e,t,r){"use strict";var o=r(4).Buffer,n=function(){this._queue=[],this._queueSize=0,this._offset=0};n.prototype.put=function(e){e&&0!==e.length&&(o.isBuffer(e)||(e=o.from(e)),this._queue.push(e),this._queueSize+=e.length)},n.prototype.read=function(e){if(e>this._queueSize)return null;if(0===e)return o.alloc(0);this._queueSize-=e;var t,r,n=this._queue,i=e,s=n[0];if(s.length>=e)return s.length===e?n.shift():(r=s.slice(0,e),n[0]=s.slice(e),r);for(var a=0,c=n.length;a<c&&!(i<n[a].length);a++)i-=n[a].length;return t=n.splice(0,a),i>0&&n.length>0&&(t.push(n[0].slice(0,i)),n[0]=n[0].slice(i)),o.concat(t,e)},n.prototype.eachByte=function(e,t){for(var r,o,n;this._queue.length>0;){for(o=(r=this._queue[0]).length;this._offset<o;)n=this._offset,this._offset+=1,e.call(t,r[n]);this._offset=0,this._queue.shift()}},e.exports=n},function(e,t,r){"use strict";var o=r(4).Buffer,n=r(11),i=r(8),s=r(0),a=r(33),c=r(10),p=r(54),d=r(110),l=function(e,t){this.version="hybi-"+p.VERSION,p.call(this,null,e,t),this.readyState=-1,this._key=l.generateKey(),this._accept=p.generateAccept(this._key),this._http=new a("response");var r=i.parse(this.url),n=r.auth&&o.from(r.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(r.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(r.pathname||"/")+(r.search||""),this._headers.set("Host",r.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",p.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),n&&this._headers.set("Authorization","Basic "+n)};s.inherits(l,p),l.generateKey=function(){return n.randomBytes(16).toString("base64")};var u={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(e,t){return new d(this,e,t)},start:function(){return-1===this.readyState&&(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(e){if(3!==this.readyState){if(this.readyState>0)return p.prototype.parse.call(this,e);this._http.parse(e),this._http.isComplete()&&(this._validateHandshake(),3!==this.readyState&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var e=this._extensions.generateOffer();e&&this._headers.set("Sec-WebSocket-Extensions",e);var t=["GET "+this._pathname+" HTTP/1.1",this._headers.toString(),""];return o.from(t.join("\r\n"),"utf8")},_failHandshake:function(e){e="Error during WebSocket handshake: "+e,this.readyState=3,this.emit("error",new Error(e)),this.emit("close",new c.CloseEvent(this.ERRORS.protocol_error,e))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(101!==this._http.statusCode)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var e=this._http.headers,t=e.upgrade||"",r=e.connection||"",o=e["sec-websocket-accept"]||"",n=e["sec-websocket-protocol"]||"";if(""===t)return this._failHandshake("'Upgrade' header is missing");if("websocket"!==t.toLowerCase())return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(""===r)return this._failHandshake("'Connection' header is missing");if("upgrade"!==r.toLowerCase())return this._failHandshake("'Connection' header value is not 'Upgrade'");if(o!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,""!==n){if(this._protocols.indexOf(n)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=n}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(e){return this._failHandshake(e.message)}}};for(var g in u)l.prototype[g]=u[g];e.exports=l},function(e,t,r){var o=r(5);function n(e){o.ok(e===n.REQUEST||e===n.RESPONSE||void 0===e),void 0===e||this.initialize(e)}t.HTTPParser=n,n.prototype.initialize=function(e,t){o.ok(e===n.REQUEST||e===n.RESPONSE),this.type=e,this.state=e+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1},n.encoding="ascii",n.maxHeaderSize=81920,n.REQUEST="REQUEST",n.RESPONSE="RESPONSE";var i=n.kOnHeaders=0,s=n.kOnHeadersComplete=1,a=n.kOnBody=2,c=n.kOnMessageComplete=3;n.prototype[i]=n.prototype[s]=n.prototype[a]=n.prototype[c]=function(){};var p=!0;Object.defineProperty(n,"kOnExecute",{get:function(){return p=!1,4}});var d=t.methods=n.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK"],l=d.indexOf("CONNECT");n.prototype.reinitialize=n,n.prototype.close=n.prototype.pause=n.prototype.resume=n.prototype.free=function(){},n.prototype._compatMode0_11=!1,n.prototype.getAsyncId=function(){return 0};var u={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};n.prototype.execute=function(e,t,r){if(!(this instanceof n))throw new TypeError("not a HTTPParser");t=t||0,r="number"==typeof r?r:e.length,this.chunk=e,this.offset=t;var o=this.end=t+r;try{for(;this.offset<o&&!this[this.state](););}catch(e){if(this.isUserCall)throw e;return this.hadError=!0,e}return this.chunk=null,r=this.offset-t,u[this.state]&&(this.headerSize+=r,this.headerSize>n.maxHeaderSize)?new Error("max header size exceeded"):r};var g={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};n.prototype.finish=function(){if(!this.hadError)return g[this.state]?void("BODY_RAW"===this.state&&this.userCall()(this[c]())):new Error("invalid state for EOF")},n.prototype.consume=n.prototype.unconsume=n.prototype.getCurrentBuffer=function(){},n.prototype.userCall=function(){this.isUserCall=!0;var e=this;return function(t){return e.isUserCall=!1,t}},n.prototype.nextRequest=function(){this.userCall()(this[c]()),this.reinitialize(this.type)},n.prototype.consumeLine=function(){for(var e=this.end,t=this.chunk,r=this.offset;r<e;r++)if(10===t[r]){var o=this.line+t.toString(n.encoding,this.offset,r);return"\r"===o.charAt(o.length-1)&&(o=o.substr(0,o.length-1)),this.line="",this.offset=r+1,o}this.line+=t.toString(n.encoding,this.offset,this.end),this.offset=this.end};var h=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,f=/^[ \t]+(.*[^ \t])/;n.prototype.parseHeader=function(e,t){if(-1!==e.indexOf("\r"))throw S("HPE_LF_EXPECTED");var r=h.exec(e),o=r&&r[1];if(o)t.push(o),t.push(r[2]);else{var n=f.exec(e);n&&t.length&&(t[t.length-1]&&(t[t.length-1]+=" "),t[t.length-1]+=n[1])}};var y=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;n.prototype.REQUEST_LINE=function(){var e=this.consumeLine();if(e){var t=y.exec(e);if(null===t)throw S("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?t[1]:d.indexOf(t[1]),-1===this.info.method)throw new Error("invalid request method");this.info.url=t[2],this.info.versionMajor=+t[3],this.info.versionMinor=+t[4],this.body_bytes=0,this.state="HEADER"}};var m=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;function S(e){var t=new Error("Parse Error");return t.code=e,t}n.prototype.RESPONSE_LINE=function(){var e=this.consumeLine();if(e){var t=m.exec(e);if(null===t)throw S("HPE_INVALID_CONSTANT");this.info.versionMajor=+t[1],this.info.versionMinor=+t[2];var r=this.info.statusCode=+t[3];this.info.statusMessage=t[4],1!=(r/100|0)&&204!==r&&304!==r||(this.body_bytes=0),this.state="HEADER"}},n.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(-1!==this.connection.indexOf("close"))return!1}else if(-1===this.connection.indexOf("keep-alive"))return!1;return!(null===this.body_bytes&&!this.isChunked)},n.prototype.HEADER=function(){var e=this.consumeLine();if(void 0!==e){var t=this.info;if(e)this.parseHeader(e,t.headers);else{for(var r,o,i=t.headers,a=!1,c=!1,d=0;d<i.length;d+=2)switch(i[d].toLowerCase()){case"transfer-encoding":this.isChunked="chunked"===i[d+1].toLowerCase();break;case"content-length":if(r=+i[d+1],a){if(r!==this.body_bytes)throw S("HPE_UNEXPECTED_CONTENT_LENGTH")}else a=!0,this.body_bytes=r;break;case"connection":this.connection+=i[d+1].toLowerCase();break;case"upgrade":c=!0}if(this.isChunked&&a&&(a=!1,this.body_bytes=null),c&&-1!=this.connection.indexOf("upgrade")?t.upgrade=this.type===n.REQUEST||101===t.statusCode:t.upgrade=t.method===l,this.isChunked&&t.upgrade&&(this.isChunked=!1),t.shouldKeepAlive=this.shouldKeepAlive(),2===(o=p?this.userCall()(this[s](t)):this.userCall()(this[s](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive))))return this.nextRequest(),!0;if(this.isChunked&&!o)this.state="BODY_CHUNKHEAD";else{if(o||0===this.body_bytes)return this.nextRequest(),t.upgrade;null===this.body_bytes?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},n.prototype.BODY_CHUNKHEAD=function(){var e=this.consumeLine();void 0!==e&&(this.body_bytes=parseInt(e,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},n.prototype.BODY_CHUNK=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},n.prototype.BODY_CHUNKEMPTYLINE=function(){var e=this.consumeLine();void 0!==e&&(o.equal(e,""),this.state="BODY_CHUNKHEAD")},n.prototype.BODY_CHUNKTRAILERS=function(){var e=this.consumeLine();void 0!==e&&(e?this.parseHeader(e,this.trailers):(this.trailers.length&&this.userCall()(this[i](this.trailers,"")),this.nextRequest()))},n.prototype.BODY_RAW=function(){var e=this.end-this.offset;this.userCall()(this[a](this.chunk,this.offset,e)),this.offset=this.end},n.prototype.BODY_SIZED=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[a](this.chunk,this.offset,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach((function(e){var t=n["kOn"+e];Object.defineProperty(n.prototype,"on"+e,{get:function(){return this[t]},set:function(e){return this._compatMode0_11=!0,l="CONNECT",this[t]=e}})}))},function(e,t,r){"use strict";var o=r(104),n=r(105),i=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};i.MESSAGE_OPCODES=[1,2];var s={add:function(e){if("string"!=typeof e.name)throw new TypeError("extension.name must be a string");if("permessage"!==e.type)throw new TypeError('extension.type must be "permessage"');if("boolean"!=typeof e.rsv1)throw new TypeError("extension.rsv1 must be true or false");if("boolean"!=typeof e.rsv2)throw new TypeError("extension.rsv2 must be true or false");if("boolean"!=typeof e.rsv3)throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(e.name))throw new TypeError('An extension with name "'+e.name+'" is already registered');this._byName[e.name]=e,this._inOrder.push(e)},generateOffer:function(){var e=[],t=[],r={};return this._inOrder.forEach((function(n){var i=n.createClientSession();if(i){var s=[n,i];e.push(s),r[n.name]=s;var a=i.generateOffer();(a=a?[].concat(a):[]).forEach((function(e){t.push(o.serializeParams(n.name,e))}),this)}}),this),this._sessions=e,this._index=r,t.length>0?t.join(", "):null},activate:function(e){var t=o.parseHeader(e),r=[];t.eachOffer((function(e,t){var n=this._index[e];if(!n)throw new Error('Server sent an extension response for unknown extension "'+e+'"');var i=n[0],s=n[1],a=this._reserved(i);if(a)throw new Error("Server sent two extension responses that use the RSV"+a[0]+' bit: "'+a[1]+'" and "'+i.name+'"');if(!0!==s.activate(t))throw new Error("Server sent unacceptable extension parameters: "+o.serializeParams(e,t));this._reserve(i),r.push(n)}),this),this._sessions=r,this._pipeline=new n(r)},generateResponse:function(e){var t=[],r=[],i=o.parseHeader(e);return this._inOrder.forEach((function(e){var n=i.byName(e.name);if(0!==n.length&&!this._reserved(e)){var s=e.createServerSession(n);s&&(this._reserve(e),t.push([e,s]),r.push(o.serializeParams(e.name,s.generateResponse())))}}),this),this._sessions=t,this._pipeline=new n(t),r.length>0?r.join(", "):null},validFrameRsv:function(e){var t,r={rsv1:!1,rsv2:!1,rsv3:!1};if(i.MESSAGE_OPCODES.indexOf(e.opcode)>=0)for(var o=0,n=this._sessions.length;o<n;o++)t=this._sessions[o][0],r.rsv1=r.rsv1||t.rsv1,r.rsv2=r.rsv2||t.rsv2,r.rsv3=r.rsv3||t.rsv3;return(r.rsv1||!e.rsv1)&&(r.rsv2||!e.rsv2)&&(r.rsv3||!e.rsv3)},processIncomingMessage:function(e,t,r){this._pipeline.processIncomingMessage(e,t,r)},processOutgoingMessage:function(e,t,r){this._pipeline.processOutgoingMessage(e,t,r)},close:function(e,t){if(!this._pipeline)return e.call(t);this._pipeline.close(e,t)},_reserve:function(e){this._rsv1=this._rsv1||e.rsv1&&e.name,this._rsv2=this._rsv2||e.rsv2&&e.name,this._rsv3=this._rsv3||e.rsv3&&e.name},_reserved:function(e){return this._rsv1&&e.rsv1?[1,this._rsv1]:this._rsv2&&e.rsv2?[2,this._rsv2]:!(!this._rsv3||!e.rsv3)&&[3,this._rsv3]}};for(var a in s)i.prototype[a]=s[a];e.exports=i},function(e,t,r){"use strict";var o=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,n=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,i=new RegExp(o.source+"(?:=(?:"+o.source+"|"+/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/.source+"))?"),s=new RegExp(o.source+"(?: *; *"+i.source+")*","g"),a=new RegExp("^"+s.source+"(?: *, *"+s.source+")*$"),c=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,p=Object.prototype.hasOwnProperty,d={parseHeader:function(e){var t=new l;if(""===e||void 0===e)return t;if(!a.test(e))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+e);return e.match(s).forEach((function(e){var r=e.match(new RegExp(i.source,"g")),o=r.shift(),n={};r.forEach((function(e){var t,r=e.match(i),o=r[1];t=void 0!==r[2]?r[2]:void 0===r[3]||r[3].replace(/\\/g,""),c.test(t)&&(t=parseFloat(t)),p.call(n,o)?(n[o]=[].concat(n[o]),n[o].push(t)):n[o]=t}),this),t.push(o,n)}),this),t},serializeParams:function(e,t){var r=[],o=function(e,t){t instanceof Array?t.forEach((function(t){o(e,t)})):!0===t?r.push(e):"number"==typeof t?r.push(e+"="+t):n.test(t)?r.push(e+'="'+t.replace(/"/g,'\\"')+'"'):r.push(e+"="+t)};for(var i in t)o(i,t[i]);return[e].concat(r).join("; ")}},l=function(){this._byName={},this._inOrder=[]};l.prototype.push=function(e,t){p.call(this._byName,e)||(this._byName[e]=[]),this._byName[e].push(t),this._inOrder.push({name:e,params:t})},l.prototype.eachOffer=function(e,t){for(var r=this._inOrder,o=0,n=r.length;o<n;o++)e.call(t,r[o].name,r[o].params)},l.prototype.byName=function(e){return this._byName[e]||[]},l.prototype.toArray=function(){return this._inOrder.slice()},e.exports=d},function(e,t,r){"use strict";var o=r(106),n=r(56),i=function(e){this._cells=e.map((function(e){return new o(e)})),this._stopped={incoming:!1,outgoing:!1}};i.prototype.processIncomingMessage=function(e,t,r){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,e,t,r)},i.prototype.processOutgoingMessage=function(e,t,r){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,e,t,r)},i.prototype.close=function(e,t){this._stopped={incoming:!0,outgoing:!0};var r=this._cells.map((function(e){return e.close()}));e&&n.all(r).then((function(){e.call(t)}))},i.prototype._loop=function(e,t,r,o,n,i,s){for(var a=this._cells,c=a.length,p=this;c--;)a[c].pending(e);var d=function(t,n,c){if(t===r)return i.call(s,n,c);a[t][e](n,c,(function(r,n){r&&(p._stopped[e]=!0),d(t+o,r,n)}))};d(t,null,n)},e.exports=i},function(e,t,r){"use strict";var o=r(107),n=r(56),i=function(e){this._ext=e[0],this._session=e[1],this._functors={incoming:new o(this._session,"processIncomingMessage"),outgoing:new o(this._session,"processOutgoingMessage")}};i.prototype.pending=function(e){var t=this._functors[e];t._stopped||(t.pending+=1)},i.prototype.incoming=function(e,t,r,o){this._exec("incoming",e,t,r,o)},i.prototype.outgoing=function(e,t,r,o){this._exec("outgoing",e,t,r,o)},i.prototype.close=function(){return this._closed=this._closed||new n,this._doClose(),this._closed},i.prototype._exec=function(e,t,r,o,n){this._functors[e].call(t,r,(function(e,t){e&&(e.message=this._ext.name+": "+e.message),o.call(n,e,t),this._doClose()}),this)},i.prototype._doClose=function(){var e=this._functors.incoming,t=this._functors.outgoing;this._closed&&e.pending+t.pending===0&&(this._session&&this._session.close(),this._session=null,this._closed.done())},e.exports=i},function(e,t,r){"use strict";var o=r(55),n=function(e,t){this._session=e,this._method=t,this._queue=new o(n.QUEUE_SIZE),this._stopped=!1,this.pending=0};n.QUEUE_SIZE=8,n.prototype.call=function(e,t,r,o){if(!this._stopped){var n={error:e,message:t,callback:r,context:o,done:!1},i=!1,s=this;if(this._queue.push(n),n.error)return n.done=!0,this._stop(),this._flushQueue();var a=function(e,t){i^(i=!0)&&(e?(s._stop(),n.error=e,n.message=null):n.message=t,n.done=!0,s._flushQueue())};try{this._session[this._method](t,a)}catch(e){a(e)}}},n.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},n.prototype._flushQueue=function(){for(var e,t=this._queue;t.length>0&&t.peek().done;)(e=t.shift()).error?(this.pending=0,t.clear()):this.pending-=1,e.callback.call(e.context,e.error,e.message)},e.exports=n},function(e,t,r){"use strict";var o=function(){},n={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var i in n)o.prototype[i]=n[i];e.exports=o},function(e,t,r){"use strict";var o=r(4).Buffer,n=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},i={read:function(){return this.data=this.data||o.concat(this._chunks,this.length)},pushFrame:function(e){this.rsv1=this.rsv1||e.rsv1,this.rsv2=this.rsv2||e.rsv2,this.rsv3=this.rsv3||e.rsv3,null===this.opcode&&(this.opcode=e.opcode),this._chunks.push(e.payload),this.length+=e.length}};for(var s in i)n.prototype[s]=i[s];e.exports=n},function(e,t,r){"use strict";var o=r(4).Buffer,n=r(1).Stream,i=r(8),s=r(0),a=r(10),c=r(32),p=r(33),d={"ws:":80,"wss:":443},l=function(e,t,r){this._client=e,this._http=new p("response"),this._origin="object"==typeof e.url?e.url:i.parse(e.url),this._url="object"==typeof t?t:i.parse(t),this._options=r||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new c,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var n=this._url.auth&&o.from(this._url.auth,"utf8").toString("base64");n&&this._headers.set("Proxy-Authorization","Basic "+n)};s.inherits(l,n);var u={setHeader:function(e,t){return 0===this._state&&(this._headers.set(e,t),!0)},start:function(){if(0!==this._state)return!1;this._state=1;var e=this._origin,t=e.port||d[e.protocol],r=["CONNECT "+e.hostname+":"+t+" HTTP/1.1",this._headers.toString(),""];return this.emit("data",o.from(r.join("\r\n"),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(e){if(!this.writable)return!1;if(this._http.parse(e),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,200===this.statusCode)this.emit("connect",new a.ConnectEvent);else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(t))}return this.end(),!this._paused},end:function(e){this.writable&&(void 0!==e&&this.write(e),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var g in u)l.prototype[g]=u[g];e.exports=l},function(e,t,r){"use strict";var o=r(0),n=r(33),i=r(10),s=r(57),a=r(112),c=r(54),p=function(e){i.call(this,null,null,e),this._http=new n("request")};o.inherits(p,i);var d={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",(function(){})),this.on("error",(function(){}))},parse:function(e){if(this._delegate)return this._delegate.parse(e);if(this._http.parse(e),this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var t=this;this._delegate=p.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach((function(e){this._delegate.on(e,(function(r){t.emit(e,r)}))}),this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new i.ConnectEvent)}},_open:function(){this.__queue.forEach((function(e){this._delegate[e[0]].apply(this._delegate,e[1])}),this),this.__queue=[]}};for(var l in["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach((function(e){d[e]=function(){return this._delegate?this._delegate[e].apply(this._delegate,arguments):(this.__queue.push([e,arguments]),!0)}})),d)p.prototype[l]=d[l];p.isSecureRequest=function(e){if(e.connection&&void 0!==e.connection.authorized)return!0;if(e.socket&&e.socket.secure)return!0;var t=e.headers;return!!t&&("on"===t.https||("on"===t["x-forwarded-ssl"]||("https"===t["x-forwarded-scheme"]||"https"===t["x-forwarded-proto"])))},p.determineUrl=function(e){return(this.isSecureRequest(e)?"wss:":"ws:")+"//"+e.headers.host+e.url},p.http=function(e,t){void 0===(t=t||{}).requireMasking&&(t.requireMasking=!0);var r=e.headers,o=r["sec-websocket-version"],n=r["sec-websocket-key"],i=r["sec-websocket-key1"],p=r["sec-websocket-key2"],d=this.determineUrl(e);return o||n?new c(e,d,t):i||p?new a(e,d,t):new s(e,d,t)},e.exports=p},function(e,t,r){"use strict";var o=r(4).Buffer,n=r(10),i=r(57),s=r(11),a=r(0),c=function(e){return parseInt((e.match(/[0-9]/g)||[]).join(""),10)},p=function(e){return(e.match(/ /g)||[]).length},d=function(e,t,r){i.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};a.inherits(d,i);var l={BODY_SIZE:8,start:function(){return!!i.prototype.start.call(this)&&(this._started=!0,this._sendHandshakeBody(),!0)},close:function(){return 3!==this.readyState&&(1===this.readyState&&this._write(o.from([255,0])),this.readyState=3,this.emit("close",new n.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var e=(a=this._request.headers)["sec-websocket-key1"],t=a["sec-websocket-key2"];if(!e)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!t)throw new Error("Missing required header: Sec-WebSocket-Key2");var r=c(e),n=p(e),i=c(t),s=p(t);if(r%n!=0||i%s!=0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[r/n,i/s];var a=["HTTP/1.1 101 WebSocket Protocol Handshake",this._headers.toString(),""];return o.from(a.join("\r\n"),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var e=s.createHash("md5"),t=o.allocUnsafe(8+this.BODY_SIZE);return t.writeUInt32BE(this._keyValues[0],0),t.writeUInt32BE(this._keyValues[1],4),o.from(this._body).copy(t,8,0,this.BODY_SIZE),e.update(t),o.from(e.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var e=this._handshakeSignature();e&&(this._write(e),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(e){if(255!==e)return i.prototype._parseLeadingByte.call(this,e);this._closing=!0,this._length=0,this._stage=1}};for(var u in l)d.prototype[u]=l[u];e.exports=d},function(e,t,r){var o=r(0),n=r(59),i=r(114),s=(r(11),r(8)),a=r(20),c=r(34),p=(r(21),{"http:":80,"https:":443,"ws:":80,"wss:":443}),d=["https:","wss:"],l=function(e,t,r){r=r||{},this.url=e,this._driver=a.client(this.url,{maxLength:r.maxLength,protocols:t}),["open","error"].forEach((function(e){this._driver.on(e,(function(){m.headers=m._driver.headers,m.statusCode=m._driver.statusCode}))}),this);var o=r.proxy||{},l=s.parse(o.origin||this.url),u=l.port||p[l.protocol],g=d.indexOf(l.protocol)>=0,h=function(){m._onConnect()},f=r.tls||{},y=o.origin?o.tls||{}:f,m=this;f.ca=f.ca||r.ca,this._stream=g?i.connect(u,l.hostname,y,h):n.connect(u,l.hostname,h),o.origin&&this._configureProxy(o,f),c.call(this,r)};o.inherits(l,c),l.prototype._onConnect=function(){(this._proxy||this._driver).start()},l.prototype._configureProxy=function(e,t){var r,o=s.parse(this.url),n=d.indexOf(o.protocol)>=0,a=this;if(this._proxy=this._driver.proxy(e.origin),e.headers)for(r in e.headers)this._proxy.setHeader(r,e.headers[r]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",(function(){if(n){var e={socket:a._stream,servername:o.hostname};for(r in t)e[r]=t[r];a._stream=i.connect(e),a._configureStream()}a._driver.io.pipe(a._stream),a._stream.pipe(a._driver.io),a._driver.start()})),this._proxy.on("error",(function(e){a._driver.emit("error",e)}))},e.exports=l},function(e,t){e.exports=require("tls")},function(e,t,r){var o=r(1).Stream,n=r(0),i=r(20),s=r(32),a=r(34),c=r(58),p=r(21),d=function(e,t,r){this.writable=!0,r=r||{},this._stream=t.socket,this._ping=r.ping||this.DEFAULT_PING,this._retry=r.retry||this.DEFAULT_RETRY;var o=i.isSecureRequest(e)?"https:":"http:";this.url=o+"//"+e.headers.host+e.url,this.lastEventId=e.headers["last-event-id"]||"",this.readyState=a.CONNECTING;var n=new s,c=this;if(r.headers)for(var p in r.headers)n.set(p,r.headers[p]);if(this._stream&&this._stream.writable){process.nextTick((function(){c._open()})),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var d="HTTP/1.1 200 OK\r\nContent-Type: text/event-stream\r\nCache-Control: no-cache, no-store\r\nConnection: close\r\n"+n.toString()+"\r\nretry: "+Math.floor(1e3*this._retry)+"\r\n\r\n";this._write(d),this._stream.on("drain",(function(){c.emit("drain")})),this._ping&&(this._pingTimer=setInterval((function(){c.ping()}),1e3*this._ping)),["error","end"].forEach((function(e){c._stream.on(e,(function(){c.close()}))}))}};n.inherits(d,o),d.isEventSource=function(e){return"GET"===e.method&&(e.headers.accept||"").split(/\s*,\s*/).indexOf("text/event-stream")>=0};var l={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(e){if(!this.writable)return!1;try{return this._stream.write(e,"utf8")}catch(e){return!1}},_open:function(){if(this.readyState===a.CONNECTING){this.readyState=a.OPEN;var e=new p("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},write:function(e){return this.send(e)},end:function(e){void 0!==e&&this.write(e),this.close()},send:function(e,t){if(this.readyState>a.OPEN)return!1;e=String(e).replace(/(\r\n|\r|\n)/g,"$1data: ");var r="";return(t=t||{}).event&&(r+="event: "+t.event+"\r\n"),t.id&&(r+="id: "+t.id+"\r\n"),r+="data: "+e+"\r\n\r\n",this._write(r)},ping:function(){return this._write(":\r\n\r\n")},close:function(){if(this.readyState>a.OPEN)return!1;this.readyState=a.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var e=new p("close");return e.initEvent("close",!1,!1),this.dispatchEvent(e),!0}};for(var u in l)d.prototype[u]=l[u];for(var g in c)d.prototype[g]=c[g];e.exports=d},function(e,t,r){
/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
var o=r(8),n=r(35).spawn,i=r(2);t.XMLHttpRequest=function(){"use strict";var e,t,s=this,a=r(24),c=r(36),p={},d=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},u={},g={},h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],f=["TRACE","TRACK","CONNECT"],y=!1,m=!1,S={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;this.open=function(e,t,r,o,n){if(this.abort(),m=!1,!function(e){return e&&-1===f.indexOf(e)}(e))throw new Error("SecurityError: Request method not allowed");p={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:o||null,password:n||null},b(this.OPENED)},this.setDisableHeaderCheck=function(e){d=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(function(e){return d||e&&-1===h.indexOf(e.toLowerCase())}(e)){if(y)throw new Error("INVALID_STATE_ERR: send flag is true");e=g[e.toLowerCase()]||e,g[e.toLowerCase()]=e,u[e]=u[e]?u[e]+", "+t:t}else console.warn('Refused to set unsafe header "'+e+'"')},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&t&&t.headers&&t.headers[e.toLowerCase()]&&!m?t.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||m)return"";var e="";for(var r in t.headers)"set-cookie"!==r&&"set-cookie2"!==r&&(e+=r+": "+t.headers[r]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&g[e.toLowerCase()]?u[g[e.toLowerCase()]]:""},this.send=function(r){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(y)throw new Error("INVALID_STATE_ERR: send has already been called");var d,h=!1,f=!1,S=o.parse(p.url);switch(S.protocol){case"https:":h=!0;case"http:":d=S.hostname;break;case"file:":f=!0;break;case void 0:case null:case"":d="localhost";break;default:throw new Error("Protocol not supported.")}if(f){if("GET"!==p.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(p.async)i.readFile(S.pathname,"utf8",(function(e,t){e?s.handleError(e):(s.status=200,s.responseText=t,b(s.DONE))}));else try{this.responseText=i.readFileSync(S.pathname,"utf8"),this.status=200,b(s.DONE)}catch(e){this.handleError(e)}}else{var _=S.port||(h?443:80),v=S.pathname+(S.search?S.search:"");for(var E in l)g[E.toLowerCase()]||(u[E]=l[E]);if(u.Host=d,h&&443===_||80===_||(u.Host+=":"+S.port),p.user){void 0===p.password&&(p.password="");var O=new Buffer(p.user+":"+p.password);u.Authorization="Basic "+O.toString("base64")}"GET"===p.method||"HEAD"===p.method?r=null:r?(u["Content-Length"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),u["Content-Type"]||(u["Content-Type"]="text/plain;charset=UTF-8")):"POST"===p.method&&(u["Content-Length"]=0);var T={host:d,port:_,path:v,method:p.method,headers:u,agent:!1,withCredentials:s.withCredentials};if(m=!1,p.async){var w=h?c.request:a.request;y=!0,s.dispatchEvent("readystatechange");var M=function(e){s.handleError(e)};e=w(T,(function r(n){if(301!==(t=n).statusCode&&302!==t.statusCode&&303!==t.statusCode&&307!==t.statusCode)t.setEncoding("utf8"),b(s.HEADERS_RECEIVED),s.status=t.statusCode,t.on("data",(function(e){e&&(s.responseText+=e),y&&b(s.LOADING)})),t.on("end",(function(){y&&(b(s.DONE),y=!1)})),t.on("error",(function(e){s.handleError(e)}));else{p.url=t.headers.location;var i=o.parse(p.url);d=i.hostname;var a={hostname:i.hostname,port:i.port,path:i.path,method:303===t.statusCode?"GET":p.method,headers:u,withCredentials:s.withCredentials};(e=w(a,r).on("error",M)).end()}})).on("error",M),r&&e.write(r),e.end(),s.dispatchEvent("loadstart")}else{var I=".node-xmlhttprequest-content-"+process.pid,R=".node-xmlhttprequest-sync-"+process.pid;i.writeFileSync(R,"","utf8");for(var P="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(T)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+I+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+R+"');});response.on('error', function(error) {fs.writeFileSync('"+I+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+R+"');});}).on('error', function(error) {fs.writeFileSync('"+I+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+R+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",C=n(process.argv[0],["-e",P]);i.existsSync(R););var U=JSON.parse(i.readFileSync(I,"utf8"));C.stdin.end(),i.unlinkSync(I),U.err?s.handleError(U.err):(t=U.data,s.status=U.data.statusCode,s.responseText=U.data.text,b(s.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,m=!0,b(this.DONE),this.dispatchEvent("error")},this.abort=function(){e&&(e.abort(),e=null),u=l,this.status=0,this.responseText="",this.responseXML="",m=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!y||this.readyState===this.DONE||(y=!1,b(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in S||(S[e]=[]),S[e].push(t)},this.removeEventListener=function(e,t){e in S&&(S[e]=S[e].filter((function(e){return e!==t})))},this.dispatchEvent=function(e){if("function"==typeof s["on"+e]&&s["on"+e](),e in S)for(var t=0,r=S[e].length;t<r;t++)S[e][t].call(s)};var b=function(e){e!=s.LOADING&&s.readyState===e||(s.readyState=e,(p.async||s.readyState<s.OPENED||s.readyState===s.DONE)&&s.dispatchEvent("readystatechange"),s.readyState!==s.DONE||m||(s.dispatchEvent("load"),s.dispatchEvent("loadend")))}}},function(e,t,r){!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},o=function(){throw new Error("no PRNG")},n=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var s=t(),a=t([1]),c=t([56129,1]),p=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(e,t,r,o){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=o>>24&255,e[t+5]=o>>16&255,e[t+6]=o>>8&255,e[t+7]=255&o}function f(e,t,r,o,n){var i,s=0;for(i=0;i<n;i++)s|=e[t+i]^r[o+i];return(1&s-1>>>8)-1}function y(e,t,r,o){return f(e,t,r,o,16)}function m(e,t,r,o){return f(e,t,r,o,32)}function S(e,t,r,o){!function(e,t,r,o){for(var n,i=255&o[0]|(255&o[1])<<8|(255&o[2])<<16|(255&o[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,p=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&o[4]|(255&o[5])<<8|(255&o[6])<<16|(255&o[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,u=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,g=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,h=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,f=255&o[8]|(255&o[9])<<8|(255&o[10])<<16|(255&o[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,S=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&o[12]|(255&o[13])<<8|(255&o[14])<<16|(255&o[15])<<24,v=i,E=s,O=a,T=c,w=p,M=d,I=l,R=u,P=g,C=h,U=f,B=y,A=m,x=S,k=b,D=_,N=0;N<20;N+=2)v^=(n=(A^=(n=(P^=(n=(w^=(n=v+A|0)<<7|n>>>25)+v|0)<<9|n>>>23)+w|0)<<13|n>>>19)+P|0)<<18|n>>>14,M^=(n=(E^=(n=(x^=(n=(C^=(n=M+E|0)<<7|n>>>25)+M|0)<<9|n>>>23)+C|0)<<13|n>>>19)+x|0)<<18|n>>>14,U^=(n=(I^=(n=(O^=(n=(k^=(n=U+I|0)<<7|n>>>25)+U|0)<<9|n>>>23)+k|0)<<13|n>>>19)+O|0)<<18|n>>>14,D^=(n=(B^=(n=(R^=(n=(T^=(n=D+B|0)<<7|n>>>25)+D|0)<<9|n>>>23)+T|0)<<13|n>>>19)+R|0)<<18|n>>>14,v^=(n=(T^=(n=(O^=(n=(E^=(n=v+T|0)<<7|n>>>25)+v|0)<<9|n>>>23)+E|0)<<13|n>>>19)+O|0)<<18|n>>>14,M^=(n=(w^=(n=(R^=(n=(I^=(n=M+w|0)<<7|n>>>25)+M|0)<<9|n>>>23)+I|0)<<13|n>>>19)+R|0)<<18|n>>>14,U^=(n=(C^=(n=(P^=(n=(B^=(n=U+C|0)<<7|n>>>25)+U|0)<<9|n>>>23)+B|0)<<13|n>>>19)+P|0)<<18|n>>>14,D^=(n=(k^=(n=(x^=(n=(A^=(n=D+k|0)<<7|n>>>25)+D|0)<<9|n>>>23)+A|0)<<13|n>>>19)+x|0)<<18|n>>>14;v=v+i|0,E=E+s|0,O=O+a|0,T=T+c|0,w=w+p|0,M=M+d|0,I=I+l|0,R=R+u|0,P=P+g|0,C=C+h|0,U=U+f|0,B=B+y|0,A=A+m|0,x=x+S|0,k=k+b|0,D=D+_|0,e[0]=v>>>0&255,e[1]=v>>>8&255,e[2]=v>>>16&255,e[3]=v>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=O>>>0&255,e[9]=O>>>8&255,e[10]=O>>>16&255,e[11]=O>>>24&255,e[12]=T>>>0&255,e[13]=T>>>8&255,e[14]=T>>>16&255,e[15]=T>>>24&255,e[16]=w>>>0&255,e[17]=w>>>8&255,e[18]=w>>>16&255,e[19]=w>>>24&255,e[20]=M>>>0&255,e[21]=M>>>8&255,e[22]=M>>>16&255,e[23]=M>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=R>>>0&255,e[29]=R>>>8&255,e[30]=R>>>16&255,e[31]=R>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=C>>>0&255,e[37]=C>>>8&255,e[38]=C>>>16&255,e[39]=C>>>24&255,e[40]=U>>>0&255,e[41]=U>>>8&255,e[42]=U>>>16&255,e[43]=U>>>24&255,e[44]=B>>>0&255,e[45]=B>>>8&255,e[46]=B>>>16&255,e[47]=B>>>24&255,e[48]=A>>>0&255,e[49]=A>>>8&255,e[50]=A>>>16&255,e[51]=A>>>24&255,e[52]=x>>>0&255,e[53]=x>>>8&255,e[54]=x>>>16&255,e[55]=x>>>24&255,e[56]=k>>>0&255,e[57]=k>>>8&255,e[58]=k>>>16&255,e[59]=k>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,o)}function b(e,t,r,o){!function(e,t,r,o){for(var n,i=255&o[0]|(255&o[1])<<8|(255&o[2])<<16|(255&o[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,p=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,d=255&o[4]|(255&o[5])<<8|(255&o[6])<<16|(255&o[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,u=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,g=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,h=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,f=255&o[8]|(255&o[9])<<8|(255&o[10])<<16|(255&o[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,S=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,_=255&o[12]|(255&o[13])<<8|(255&o[14])<<16|(255&o[15])<<24,v=0;v<20;v+=2)i^=(n=(m^=(n=(g^=(n=(p^=(n=i+m|0)<<7|n>>>25)+i|0)<<9|n>>>23)+p|0)<<13|n>>>19)+g|0)<<18|n>>>14,d^=(n=(s^=(n=(S^=(n=(h^=(n=d+s|0)<<7|n>>>25)+d|0)<<9|n>>>23)+h|0)<<13|n>>>19)+S|0)<<18|n>>>14,f^=(n=(l^=(n=(a^=(n=(b^=(n=f+l|0)<<7|n>>>25)+f|0)<<9|n>>>23)+b|0)<<13|n>>>19)+a|0)<<18|n>>>14,_^=(n=(y^=(n=(u^=(n=(c^=(n=_+y|0)<<7|n>>>25)+_|0)<<9|n>>>23)+c|0)<<13|n>>>19)+u|0)<<18|n>>>14,i^=(n=(c^=(n=(a^=(n=(s^=(n=i+c|0)<<7|n>>>25)+i|0)<<9|n>>>23)+s|0)<<13|n>>>19)+a|0)<<18|n>>>14,d^=(n=(p^=(n=(u^=(n=(l^=(n=d+p|0)<<7|n>>>25)+d|0)<<9|n>>>23)+l|0)<<13|n>>>19)+u|0)<<18|n>>>14,f^=(n=(h^=(n=(g^=(n=(y^=(n=f+h|0)<<7|n>>>25)+f|0)<<9|n>>>23)+y|0)<<13|n>>>19)+g|0)<<18|n>>>14,_^=(n=(b^=(n=(S^=(n=(m^=(n=_+b|0)<<7|n>>>25)+_|0)<<9|n>>>23)+m|0)<<13|n>>>19)+S|0)<<18|n>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=d>>>0&255,e[5]=d>>>8&255,e[6]=d>>>16&255,e[7]=d>>>24&255,e[8]=f>>>0&255,e[9]=f>>>8&255,e[10]=f>>>16&255,e[11]=f>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=u>>>0&255,e[21]=u>>>8&255,e[22]=u>>>16&255,e[23]=u>>>24&255,e[24]=g>>>0&255,e[25]=g>>>8&255,e[26]=g>>>16&255,e[27]=g>>>24&255,e[28]=h>>>0&255,e[29]=h>>>8&255,e[30]=h>>>16&255,e[31]=h>>>24&255}(e,t,r,o)}var _=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function v(e,t,r,o,n,i,s){var a,c,p=new Uint8Array(16),d=new Uint8Array(64);for(c=0;c<16;c++)p[c]=0;for(c=0;c<8;c++)p[c]=i[c];for(;n>=64;){for(S(d,p,s,_),c=0;c<64;c++)e[t+c]=r[o+c]^d[c];for(a=1,c=8;c<16;c++)a=a+(255&p[c])|0,p[c]=255&a,a>>>=8;n-=64,t+=64,o+=64}if(n>0)for(S(d,p,s,_),c=0;c<n;c++)e[t+c]=r[o+c]^d[c];return 0}function E(e,t,r,o,n){var i,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=o[s];for(;r>=64;){for(S(c,a,n,_),s=0;s<64;s++)e[t+s]=c[s];for(i=1,s=8;s<16;s++)i=i+(255&a[s])|0,a[s]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(S(c,a,n,_),s=0;s<r;s++)e[t+s]=c[s];return 0}function O(e,t,r,o,n){var i=new Uint8Array(32);b(i,o,n,_);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=o[a+16];return E(e,t,r,s,i)}function T(e,t,r,o,n,i,s){var a=new Uint8Array(32);b(a,i,s,_);for(var c=new Uint8Array(8),p=0;p<8;p++)c[p]=i[p+16];return v(e,t,r,o,n,c,a)}var w=function(e){var t,r,o,n,i,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),o=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|o<<6),n=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(o>>>7|n<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(n>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function M(e,t,r,o,n,i){var s=new w(i);return s.update(r,o,n),s.finish(e,t),0}function I(e,t,r,o,n,i){var s=new Uint8Array(16);return M(s,0,r,o,n,i),y(e,t,s,0)}function R(e,t,r,o,n){var i;if(r<32)return-1;for(T(e,0,t,0,r,o,n),M(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function P(e,t,r,o,n){var i,s=new Uint8Array(32);if(r<32)return-1;if(O(s,0,32,o,n),0!==I(t,16,t,32,r-32,s))return-1;for(T(e,0,t,0,r,o,n),i=0;i<32;i++)e[i]=0;return 0}function C(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function U(e){var t,r,o=1;for(t=0;t<16;t++)r=e[t]+o+65535,o=Math.floor(r/65536),e[t]=r-65536*o;e[0]+=o-1+37*(o-1)}function B(e,t,r){for(var o,n=~(r-1),i=0;i<16;i++)o=n&(e[i]^t[i]),e[i]^=o,t[i]^=o}function A(e,r){var o,n,i,s=t(),a=t();for(o=0;o<16;o++)a[o]=r[o];for(U(a),U(a),U(a),n=0;n<2;n++){for(s[0]=a[0]-65517,o=1;o<15;o++)s[o]=a[o]-65535-(s[o-1]>>16&1),s[o-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,B(a,s,1-i)}for(o=0;o<16;o++)e[2*o]=255&a[o],e[2*o+1]=a[o]>>8}function x(e,t){var r=new Uint8Array(32),o=new Uint8Array(32);return A(r,e),A(o,t),m(r,0,o,0)}function k(e){var t=new Uint8Array(32);return A(t,e),1&t[0]}function D(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function N(e,t,r){for(var o=0;o<16;o++)e[o]=t[o]+r[o]}function L(e,t,r){for(var o=0;o<16;o++)e[o]=t[o]-r[o]}function j(e,t,r){var o,n,i=0,s=0,a=0,c=0,p=0,d=0,l=0,u=0,g=0,h=0,f=0,y=0,m=0,S=0,b=0,_=0,v=0,E=0,O=0,T=0,w=0,M=0,I=0,R=0,P=0,C=0,U=0,B=0,A=0,x=0,k=0,D=r[0],N=r[1],L=r[2],j=r[3],F=r[4],W=r[5],z=r[6],H=r[7],G=r[8],V=r[9],q=r[10],Y=r[11],J=r[12],K=r[13],$=r[14],X=r[15];i+=(o=t[0])*D,s+=o*N,a+=o*L,c+=o*j,p+=o*F,d+=o*W,l+=o*z,u+=o*H,g+=o*G,h+=o*V,f+=o*q,y+=o*Y,m+=o*J,S+=o*K,b+=o*$,_+=o*X,s+=(o=t[1])*D,a+=o*N,c+=o*L,p+=o*j,d+=o*F,l+=o*W,u+=o*z,g+=o*H,h+=o*G,f+=o*V,y+=o*q,m+=o*Y,S+=o*J,b+=o*K,_+=o*$,v+=o*X,a+=(o=t[2])*D,c+=o*N,p+=o*L,d+=o*j,l+=o*F,u+=o*W,g+=o*z,h+=o*H,f+=o*G,y+=o*V,m+=o*q,S+=o*Y,b+=o*J,_+=o*K,v+=o*$,E+=o*X,c+=(o=t[3])*D,p+=o*N,d+=o*L,l+=o*j,u+=o*F,g+=o*W,h+=o*z,f+=o*H,y+=o*G,m+=o*V,S+=o*q,b+=o*Y,_+=o*J,v+=o*K,E+=o*$,O+=o*X,p+=(o=t[4])*D,d+=o*N,l+=o*L,u+=o*j,g+=o*F,h+=o*W,f+=o*z,y+=o*H,m+=o*G,S+=o*V,b+=o*q,_+=o*Y,v+=o*J,E+=o*K,O+=o*$,T+=o*X,d+=(o=t[5])*D,l+=o*N,u+=o*L,g+=o*j,h+=o*F,f+=o*W,y+=o*z,m+=o*H,S+=o*G,b+=o*V,_+=o*q,v+=o*Y,E+=o*J,O+=o*K,T+=o*$,w+=o*X,l+=(o=t[6])*D,u+=o*N,g+=o*L,h+=o*j,f+=o*F,y+=o*W,m+=o*z,S+=o*H,b+=o*G,_+=o*V,v+=o*q,E+=o*Y,O+=o*J,T+=o*K,w+=o*$,M+=o*X,u+=(o=t[7])*D,g+=o*N,h+=o*L,f+=o*j,y+=o*F,m+=o*W,S+=o*z,b+=o*H,_+=o*G,v+=o*V,E+=o*q,O+=o*Y,T+=o*J,w+=o*K,M+=o*$,I+=o*X,g+=(o=t[8])*D,h+=o*N,f+=o*L,y+=o*j,m+=o*F,S+=o*W,b+=o*z,_+=o*H,v+=o*G,E+=o*V,O+=o*q,T+=o*Y,w+=o*J,M+=o*K,I+=o*$,R+=o*X,h+=(o=t[9])*D,f+=o*N,y+=o*L,m+=o*j,S+=o*F,b+=o*W,_+=o*z,v+=o*H,E+=o*G,O+=o*V,T+=o*q,w+=o*Y,M+=o*J,I+=o*K,R+=o*$,P+=o*X,f+=(o=t[10])*D,y+=o*N,m+=o*L,S+=o*j,b+=o*F,_+=o*W,v+=o*z,E+=o*H,O+=o*G,T+=o*V,w+=o*q,M+=o*Y,I+=o*J,R+=o*K,P+=o*$,C+=o*X,y+=(o=t[11])*D,m+=o*N,S+=o*L,b+=o*j,_+=o*F,v+=o*W,E+=o*z,O+=o*H,T+=o*G,w+=o*V,M+=o*q,I+=o*Y,R+=o*J,P+=o*K,C+=o*$,U+=o*X,m+=(o=t[12])*D,S+=o*N,b+=o*L,_+=o*j,v+=o*F,E+=o*W,O+=o*z,T+=o*H,w+=o*G,M+=o*V,I+=o*q,R+=o*Y,P+=o*J,C+=o*K,U+=o*$,B+=o*X,S+=(o=t[13])*D,b+=o*N,_+=o*L,v+=o*j,E+=o*F,O+=o*W,T+=o*z,w+=o*H,M+=o*G,I+=o*V,R+=o*q,P+=o*Y,C+=o*J,U+=o*K,B+=o*$,A+=o*X,b+=(o=t[14])*D,_+=o*N,v+=o*L,E+=o*j,O+=o*F,T+=o*W,w+=o*z,M+=o*H,I+=o*G,R+=o*V,P+=o*q,C+=o*Y,U+=o*J,B+=o*K,A+=o*$,x+=o*X,_+=(o=t[15])*D,s+=38*(E+=o*L),a+=38*(O+=o*j),c+=38*(T+=o*F),p+=38*(w+=o*W),d+=38*(M+=o*z),l+=38*(I+=o*H),u+=38*(R+=o*G),g+=38*(P+=o*V),h+=38*(C+=o*q),f+=38*(U+=o*Y),y+=38*(B+=o*J),m+=38*(A+=o*K),S+=38*(x+=o*$),b+=38*(k+=o*X),i=(o=(i+=38*(v+=o*N))+(n=1)+65535)-65536*(n=Math.floor(o/65536)),s=(o=s+n+65535)-65536*(n=Math.floor(o/65536)),a=(o=a+n+65535)-65536*(n=Math.floor(o/65536)),c=(o=c+n+65535)-65536*(n=Math.floor(o/65536)),p=(o=p+n+65535)-65536*(n=Math.floor(o/65536)),d=(o=d+n+65535)-65536*(n=Math.floor(o/65536)),l=(o=l+n+65535)-65536*(n=Math.floor(o/65536)),u=(o=u+n+65535)-65536*(n=Math.floor(o/65536)),g=(o=g+n+65535)-65536*(n=Math.floor(o/65536)),h=(o=h+n+65535)-65536*(n=Math.floor(o/65536)),f=(o=f+n+65535)-65536*(n=Math.floor(o/65536)),y=(o=y+n+65535)-65536*(n=Math.floor(o/65536)),m=(o=m+n+65535)-65536*(n=Math.floor(o/65536)),S=(o=S+n+65535)-65536*(n=Math.floor(o/65536)),b=(o=b+n+65535)-65536*(n=Math.floor(o/65536)),_=(o=_+n+65535)-65536*(n=Math.floor(o/65536)),i=(o=(i+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(o/65536)),s=(o=s+n+65535)-65536*(n=Math.floor(o/65536)),a=(o=a+n+65535)-65536*(n=Math.floor(o/65536)),c=(o=c+n+65535)-65536*(n=Math.floor(o/65536)),p=(o=p+n+65535)-65536*(n=Math.floor(o/65536)),d=(o=d+n+65535)-65536*(n=Math.floor(o/65536)),l=(o=l+n+65535)-65536*(n=Math.floor(o/65536)),u=(o=u+n+65535)-65536*(n=Math.floor(o/65536)),g=(o=g+n+65535)-65536*(n=Math.floor(o/65536)),h=(o=h+n+65535)-65536*(n=Math.floor(o/65536)),f=(o=f+n+65535)-65536*(n=Math.floor(o/65536)),y=(o=y+n+65535)-65536*(n=Math.floor(o/65536)),m=(o=m+n+65535)-65536*(n=Math.floor(o/65536)),S=(o=S+n+65535)-65536*(n=Math.floor(o/65536)),b=(o=b+n+65535)-65536*(n=Math.floor(o/65536)),_=(o=_+n+65535)-65536*(n=Math.floor(o/65536)),i+=n-1+37*(n-1),e[0]=i,e[1]=s,e[2]=a,e[3]=c,e[4]=p,e[5]=d,e[6]=l,e[7]=u,e[8]=g,e[9]=h,e[10]=f,e[11]=y,e[12]=m,e[13]=S,e[14]=b,e[15]=_}function F(e,t){j(e,t,t)}function W(e,r){var o,n=t();for(o=0;o<16;o++)n[o]=r[o];for(o=253;o>=0;o--)F(n,n),2!==o&&4!==o&&j(n,n,r);for(o=0;o<16;o++)e[o]=n[o]}function z(e,r){var o,n=t();for(o=0;o<16;o++)n[o]=r[o];for(o=250;o>=0;o--)F(n,n),1!==o&&j(n,n,r);for(o=0;o<16;o++)e[o]=n[o]}function H(e,r,o){var n,i,s=new Uint8Array(32),a=new Float64Array(80),p=t(),d=t(),l=t(),u=t(),g=t(),h=t();for(i=0;i<31;i++)s[i]=r[i];for(s[31]=127&r[31]|64,s[0]&=248,D(a,o),i=0;i<16;i++)d[i]=a[i],u[i]=p[i]=l[i]=0;for(p[0]=u[0]=1,i=254;i>=0;--i)B(p,d,n=s[i>>>3]>>>(7&i)&1),B(l,u,n),N(g,p,l),L(p,p,l),N(l,d,u),L(d,d,u),F(u,g),F(h,p),j(p,l,p),j(l,d,g),N(g,p,l),L(p,p,l),F(d,p),L(l,u,h),j(p,l,c),N(p,p,u),j(l,l,p),j(p,u,h),j(u,d,a),F(d,g),B(p,d,n),B(l,u,n);for(i=0;i<16;i++)a[i+16]=p[i],a[i+32]=l[i],a[i+48]=d[i],a[i+64]=u[i];var f=a.subarray(32),y=a.subarray(16);return W(f,f),j(y,y,f),A(e,y),0}function G(e,t){return H(e,t,i)}function V(e,t){return o(t,32),G(e,t)}function q(e,t,r){var o=new Uint8Array(32);return H(o,r,t),b(e,n,o,_)}w.prototype.blocks=function(e,t,r){for(var o,n,i,s,a,c,p,d,l,u,g,h,f,y,m,S,b,_,v,E=this.fin?0:2048,O=this.h[0],T=this.h[1],w=this.h[2],M=this.h[3],I=this.h[4],R=this.h[5],P=this.h[6],C=this.h[7],U=this.h[8],B=this.h[9],A=this.r[0],x=this.r[1],k=this.r[2],D=this.r[3],N=this.r[4],L=this.r[5],j=this.r[6],F=this.r[7],W=this.r[8],z=this.r[9];r>=16;)u=l=0,u+=(O+=8191&(o=255&e[t+0]|(255&e[t+1])<<8))*A,u+=(T+=8191&(o>>>13|(n=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*z),u+=(w+=8191&(n>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*W),u+=(M+=8191&(i>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*F),l=(u+=(I+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*j))>>>13,u&=8191,u+=(R+=a>>>1&8191)*(5*L),u+=(P+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*N),u+=(C+=8191&(c>>>11|(p=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*D),u+=(U+=8191&(p>>>8|(d=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*k),g=l+=(u+=(B+=d>>>5|E)*(5*x))>>>13,g+=O*x,g+=T*A,g+=w*(5*z),g+=M*(5*W),l=(g+=I*(5*F))>>>13,g&=8191,g+=R*(5*j),g+=P*(5*L),g+=C*(5*N),g+=U*(5*D),l+=(g+=B*(5*k))>>>13,g&=8191,h=l,h+=O*k,h+=T*x,h+=w*A,h+=M*(5*z),l=(h+=I*(5*W))>>>13,h&=8191,h+=R*(5*F),h+=P*(5*j),h+=C*(5*L),h+=U*(5*N),f=l+=(h+=B*(5*D))>>>13,f+=O*D,f+=T*k,f+=w*x,f+=M*A,l=(f+=I*(5*z))>>>13,f&=8191,f+=R*(5*W),f+=P*(5*F),f+=C*(5*j),f+=U*(5*L),y=l+=(f+=B*(5*N))>>>13,y+=O*N,y+=T*D,y+=w*k,y+=M*x,l=(y+=I*A)>>>13,y&=8191,y+=R*(5*z),y+=P*(5*W),y+=C*(5*F),y+=U*(5*j),m=l+=(y+=B*(5*L))>>>13,m+=O*L,m+=T*N,m+=w*D,m+=M*k,l=(m+=I*x)>>>13,m&=8191,m+=R*A,m+=P*(5*z),m+=C*(5*W),m+=U*(5*F),S=l+=(m+=B*(5*j))>>>13,S+=O*j,S+=T*L,S+=w*N,S+=M*D,l=(S+=I*k)>>>13,S&=8191,S+=R*x,S+=P*A,S+=C*(5*z),S+=U*(5*W),b=l+=(S+=B*(5*F))>>>13,b+=O*F,b+=T*j,b+=w*L,b+=M*N,l=(b+=I*D)>>>13,b&=8191,b+=R*k,b+=P*x,b+=C*A,b+=U*(5*z),_=l+=(b+=B*(5*W))>>>13,_+=O*W,_+=T*F,_+=w*j,_+=M*L,l=(_+=I*N)>>>13,_&=8191,_+=R*D,_+=P*k,_+=C*x,_+=U*A,v=l+=(_+=B*(5*z))>>>13,v+=O*z,v+=T*W,v+=w*F,v+=M*j,l=(v+=I*L)>>>13,v&=8191,v+=R*N,v+=P*D,v+=C*k,v+=U*x,O=u=8191&(l=(l=((l+=(v+=B*A)>>>13)<<2)+l|0)+(u&=8191)|0),T=g+=l>>>=13,w=h&=8191,M=f&=8191,I=y&=8191,R=m&=8191,P=S&=8191,C=b&=8191,U=_&=8191,B=v&=8191,t+=16,r-=16;this.h[0]=O,this.h[1]=T,this.h[2]=w,this.h[3]=M,this.h[4]=I,this.h[5]=R,this.h[6]=P,this.h[7]=C,this.h[8]=U,this.h[9]=B},w.prototype.finish=function(e,t){var r,o,n,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+r,r=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,o=(1^r)-1,i=0;i<10;i++)s[i]&=o;for(o=~o,i=0;i<10;i++)this.h[i]=this.h[i]&o|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),n=this.h[0]+this.pad[0],this.h[0]=65535&n,i=1;i<8;i++)n=(this.h[i]+this.pad[i]|0)+(n>>>16)|0,this.h[i]=65535&n;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},w.prototype.update=function(e,t,r){var o,n;if(this.leftover){for((n=16-this.leftover)>r&&(n=r),o=0;o<n;o++)this.buffer[this.leftover+o]=e[t+o];if(r-=n,t+=n,this.leftover+=n,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(n=r-r%16,this.blocks(e,t,n),t+=n,r-=n),r){for(o=0;o<r;o++)this.buffer[this.leftover+o]=e[t+o];this.leftover+=r}};var Y=R,J=P;var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function $(e,t,r,o){for(var n,i,s,a,c,p,d,l,u,g,h,f,y,m,S,b,_,v,E,O,T,w,M,I,R,P,C=new Int32Array(16),U=new Int32Array(16),B=e[0],A=e[1],x=e[2],k=e[3],D=e[4],N=e[5],L=e[6],j=e[7],F=t[0],W=t[1],z=t[2],H=t[3],G=t[4],V=t[5],q=t[6],Y=t[7],J=0;o>=128;){for(E=0;E<16;E++)O=8*E+J,C[E]=r[O+0]<<24|r[O+1]<<16|r[O+2]<<8|r[O+3],U[E]=r[O+4]<<24|r[O+5]<<16|r[O+6]<<8|r[O+7];for(E=0;E<80;E++)if(n=B,i=A,s=x,a=k,c=D,p=N,d=L,j,u=F,g=W,h=z,f=H,y=G,m=V,S=q,Y,M=65535&(w=Y),I=w>>>16,R=65535&(T=j),P=T>>>16,M+=65535&(w=(G>>>14|D<<18)^(G>>>18|D<<14)^(D>>>9|G<<23)),I+=w>>>16,R+=65535&(T=(D>>>14|G<<18)^(D>>>18|G<<14)^(G>>>9|D<<23)),P+=T>>>16,M+=65535&(w=G&V^~G&q),I+=w>>>16,R+=65535&(T=D&N^~D&L),P+=T>>>16,M+=65535&(w=K[2*E+1]),I+=w>>>16,R+=65535&(T=K[2*E]),P+=T>>>16,T=C[E%16],I+=(w=U[E%16])>>>16,R+=65535&T,P+=T>>>16,R+=(I+=(M+=65535&w)>>>16)>>>16,M=65535&(w=v=65535&M|I<<16),I=w>>>16,R=65535&(T=_=65535&R|(P+=R>>>16)<<16),P=T>>>16,M+=65535&(w=(F>>>28|B<<4)^(B>>>2|F<<30)^(B>>>7|F<<25)),I+=w>>>16,R+=65535&(T=(B>>>28|F<<4)^(F>>>2|B<<30)^(F>>>7|B<<25)),P+=T>>>16,I+=(w=F&W^F&z^W&z)>>>16,R+=65535&(T=B&A^B&x^A&x),P+=T>>>16,l=65535&(R+=(I+=(M+=65535&w)>>>16)>>>16)|(P+=R>>>16)<<16,b=65535&M|I<<16,M=65535&(w=f),I=w>>>16,R=65535&(T=a),P=T>>>16,I+=(w=v)>>>16,R+=65535&(T=_),P+=T>>>16,A=n,x=i,k=s,D=a=65535&(R+=(I+=(M+=65535&w)>>>16)>>>16)|(P+=R>>>16)<<16,N=c,L=p,j=d,B=l,W=u,z=g,H=h,G=f=65535&M|I<<16,V=y,q=m,Y=S,F=b,E%16==15)for(O=0;O<16;O++)T=C[O],M=65535&(w=U[O]),I=w>>>16,R=65535&T,P=T>>>16,T=C[(O+9)%16],M+=65535&(w=U[(O+9)%16]),I+=w>>>16,R+=65535&T,P+=T>>>16,_=C[(O+1)%16],M+=65535&(w=((v=U[(O+1)%16])>>>1|_<<31)^(v>>>8|_<<24)^(v>>>7|_<<25)),I+=w>>>16,R+=65535&(T=(_>>>1|v<<31)^(_>>>8|v<<24)^_>>>7),P+=T>>>16,_=C[(O+14)%16],I+=(w=((v=U[(O+14)%16])>>>19|_<<13)^(_>>>29|v<<3)^(v>>>6|_<<26))>>>16,R+=65535&(T=(_>>>19|v<<13)^(v>>>29|_<<3)^_>>>6),P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,C[O]=65535&R|P<<16,U[O]=65535&M|I<<16;M=65535&(w=F),I=w>>>16,R=65535&(T=B),P=T>>>16,T=e[0],I+=(w=t[0])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[0]=B=65535&R|P<<16,t[0]=F=65535&M|I<<16,M=65535&(w=W),I=w>>>16,R=65535&(T=A),P=T>>>16,T=e[1],I+=(w=t[1])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[1]=A=65535&R|P<<16,t[1]=W=65535&M|I<<16,M=65535&(w=z),I=w>>>16,R=65535&(T=x),P=T>>>16,T=e[2],I+=(w=t[2])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[2]=x=65535&R|P<<16,t[2]=z=65535&M|I<<16,M=65535&(w=H),I=w>>>16,R=65535&(T=k),P=T>>>16,T=e[3],I+=(w=t[3])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[3]=k=65535&R|P<<16,t[3]=H=65535&M|I<<16,M=65535&(w=G),I=w>>>16,R=65535&(T=D),P=T>>>16,T=e[4],I+=(w=t[4])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[4]=D=65535&R|P<<16,t[4]=G=65535&M|I<<16,M=65535&(w=V),I=w>>>16,R=65535&(T=N),P=T>>>16,T=e[5],I+=(w=t[5])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[5]=N=65535&R|P<<16,t[5]=V=65535&M|I<<16,M=65535&(w=q),I=w>>>16,R=65535&(T=L),P=T>>>16,T=e[6],I+=(w=t[6])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[6]=L=65535&R|P<<16,t[6]=q=65535&M|I<<16,M=65535&(w=Y),I=w>>>16,R=65535&(T=j),P=T>>>16,T=e[7],I+=(w=t[7])>>>16,R+=65535&T,P+=T>>>16,P+=(R+=(I+=(M+=65535&w)>>>16)>>>16)>>>16,e[7]=j=65535&R|P<<16,t[7]=Y=65535&M|I<<16,J+=128,o-=128}return o}function X(e,t,r){var o,n=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),a=r;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,$(n,i,t,r),r%=128,o=0;o<r;o++)s[o]=t[a-r+o];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,h(s,r-8,a/536870912|0,a<<3),$(n,i,s,r),o=0;o<8;o++)h(e,8*o,n[o],i[o]);return 0}function Z(e,r){var o=t(),n=t(),i=t(),s=t(),a=t(),c=t(),p=t(),l=t(),u=t();L(o,e[1],e[0]),L(u,r[1],r[0]),j(o,o,u),N(n,e[0],e[1]),N(u,r[0],r[1]),j(n,n,u),j(i,e[3],r[3]),j(i,i,d),j(s,e[2],r[2]),N(s,s,s),L(a,n,o),L(c,s,i),N(p,s,i),N(l,n,o),j(e[0],a,c),j(e[1],l,p),j(e[2],p,c),j(e[3],a,l)}function Q(e,t,r){var o;for(o=0;o<4;o++)B(e[o],t[o],r)}function ee(e,r){var o=t(),n=t(),i=t();W(i,r[2]),j(o,r[0],i),j(n,r[1],i),A(e,n),e[31]^=k(o)<<7}function te(e,t,r){var o,n;for(C(e[0],s),C(e[1],a),C(e[2],a),C(e[3],s),n=255;n>=0;--n)Q(e,t,o=r[n/8|0]>>(7&n)&1),Z(t,e),Z(e,e),Q(e,t,o)}function re(e,r){var o=[t(),t(),t(),t()];C(o[0],l),C(o[1],u),C(o[2],a),j(o[3],l,u),te(e,o,r)}function oe(e,r,n){var i,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(n||o(r,32),X(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,re(a,s),ee(e,a),i=0;i<32;i++)r[i+32]=e[i];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ie(e,t){var r,o,n,i;for(o=63;o>=32;--o){for(r=0,n=o-32,i=o-12;n<i;++n)t[n]+=r-16*t[o]*ne[n-(o-32)],r=Math.floor((t[n]+128)/256),t[n]-=256*r;t[n]+=r,t[o]=0}for(r=0,n=0;n<32;n++)t[n]+=r-(t[31]>>4)*ne[n],r=t[n]>>8,t[n]&=255;for(n=0;n<32;n++)t[n]-=r*ne[n];for(o=0;o<32;o++)t[o+1]+=t[o]>>8,e[o]=255&t[o]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ie(e,r)}function ae(e,r,o,n){var i,s,a=new Uint8Array(64),c=new Uint8Array(64),p=new Uint8Array(64),d=new Float64Array(64),l=[t(),t(),t(),t()];X(a,n,32),a[0]&=248,a[31]&=127,a[31]|=64;var u=o+64;for(i=0;i<o;i++)e[64+i]=r[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(X(p,e.subarray(32),o+32),se(p),re(l,p),ee(e,l),i=32;i<64;i++)e[i]=n[i];for(X(c,e,o+64),se(c),i=0;i<64;i++)d[i]=0;for(i=0;i<32;i++)d[i]=p[i];for(i=0;i<32;i++)for(s=0;s<32;s++)d[i+s]+=c[i]*a[s];return ie(e.subarray(32),d),u}function ce(e,r,o,n){var i,c=new Uint8Array(32),d=new Uint8Array(64),l=[t(),t(),t(),t()],u=[t(),t(),t(),t()];if(o<64)return-1;if(function(e,r){var o=t(),n=t(),i=t(),c=t(),d=t(),l=t(),u=t();return C(e[2],a),D(e[1],r),F(i,e[1]),j(c,i,p),L(i,i,e[2]),N(c,e[2],c),F(d,c),F(l,d),j(u,l,d),j(o,u,i),j(o,o,c),z(o,o),j(o,o,i),j(o,o,c),j(o,o,c),j(e[0],o,c),F(n,e[0]),j(n,n,c),x(n,i)&&j(e[0],e[0],g),F(n,e[0]),j(n,n,c),x(n,i)?-1:(k(e[0])===r[31]>>7&&L(e[0],s,e[0]),j(e[3],e[0],e[1]),0)}(u,n))return-1;for(i=0;i<o;i++)e[i]=r[i];for(i=0;i<32;i++)e[i+32]=n[i];if(X(d,e,o),se(d),te(l,u,d),re(u,r.subarray(32)),Z(l,u),ee(c,l),o-=64,m(r,0,c,0)){for(i=0;i<o;i++)e[i]=0;return-1}for(i=0;i<o;i++)e[i]=r[i+64];return o}function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function de(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function le(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:T,crypto_stream:O,crypto_stream_salsa20_xor:v,crypto_stream_salsa20:E,crypto_onetimeauth:M,crypto_onetimeauth_verify:I,crypto_verify_16:y,crypto_verify_32:m,crypto_secretbox:R,crypto_secretbox_open:P,crypto_scalarmult:H,crypto_scalarmult_base:G,crypto_box_beforenm:q,crypto_box_afternm:Y,crypto_box:function(e,t,r,o,n,i){var s=new Uint8Array(32);return q(s,n,i),Y(e,t,r,o,s)},crypto_box_open:function(e,t,r,o,n,i){var s=new Uint8Array(32);return q(s,n,i),J(e,t,r,o,s)},crypto_box_keypair:V,crypto_hash:X,crypto_sign:ae,crypto_sign_keypair:oe,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:p,L:ne,pack25519:A,unpack25519:D,M:j,A:N,S:F,Z:L,pow2523:z,add:Z,set25519:C,modL:ie,scalarmult:te,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return o(t,e),t},e.secretbox=function(e,t,r){de(e,t,r),pe(r,t);for(var o=new Uint8Array(32+e.length),n=new Uint8Array(o.length),i=0;i<e.length;i++)o[i+32]=e[i];return R(n,o,o.length,t,r),n.subarray(16)},e.secretbox.open=function(e,t,r){de(e,t,r),pe(r,t);for(var o=new Uint8Array(16+e.length),n=new Uint8Array(o.length),i=0;i<e.length;i++)o[i+16]=e[i];return o.length<32||0!==P(n,o,o.length,t,r)?null:n.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(de(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return H(r,e,t),r},e.scalarMult.base=function(e){if(de(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return G(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,o,n){var i=e.box.before(o,n);return e.secretbox(t,r,i)},e.box.before=function(e,t){de(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return q(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,o,n){var i=e.box.before(o,n);return e.secretbox.open(t,r,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return V(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(de(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return G(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(de(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return ae(r,e,e.length,t),r},e.sign.open=function(e,t){if(de(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),o=ce(r,e,e.length,t);if(o<0)return null;for(var n=new Uint8Array(o),i=0;i<n.length;i++)n[i]=r[i];return n},e.sign.detached=function(t,r){for(var o=e.sign(t,r),n=new Uint8Array(64),i=0;i<n.length;i++)n[i]=o[i];return n},e.sign.detached.verify=function(e,t,r){if(de(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var o,n=new Uint8Array(64+e.length),i=new Uint8Array(64+e.length);for(o=0;o<64;o++)n[o]=t[o];for(o=0;o<e.length;o++)n[o+64]=e[o];return ce(i,n,n.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return oe(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(de(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(de(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),o=0;o<32;o++)r[o]=e[o];return oe(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){de(e);var t=new Uint8Array(64);return X(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return de(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===f(e,0,t,0,e.length))},e.setPRNG=function(e){o=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var o,n=new Uint8Array(r);for(o=0;o<r;o+=65536)t.getRandomValues(n.subarray(o,o+Math.min(r-o,65536)));for(o=0;o<r;o++)e[o]=n[o];le(n)}))}else(t=r(11))&&t.randomBytes&&e.setPRNG((function(e,r){var o,n=t.randomBytes(r);for(o=0;o<r;o++)e[o]=n[o];le(n)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},function(e,t,r){!function(t,r){"use strict";e.exports?e.exports=r():(t.nacl||(t.nacl={}),t.nacl.util=r())}(this,(function(){"use strict";var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),o=new Uint8Array(r.length);for(t=0;t<r.length;t++)o[t]=r.charCodeAt(t);return o},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],o=e.length;for(t=0;t<o;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){t(e);var r,o=atob(e),n=new Uint8Array(o.length);for(r=0;r<o.length;r++)n[r]=o.charCodeAt(r);return n}),e}))},function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=r(5),i=r(18),s=r(37),a=r(120),c=r(121),p=r(25),d=r(14),l=r(2);t.default=class{constructor({client:e,portalId:t,editor:r}){this.hostClosedPortal=!1,this.hostLostConnection=!1,this.leaveEvents=[],this.editorProxies=new Set,this.tetherPosition=null,this.activePositionsBySiteId={},this.client=e,this.portalId=t,this.editor=r,this.lastEditorProxyChangePromise=Promise.resolve(),this.editorBindingsByEditorProxy=new Map,this.bufferBindingsByBufferProxy=new Map,this.bufferBindingsByBuffer=new Map,this.editorBindingsByEditor=new Map,this.editorProxiesByEditor=new WeakMap,this.tetherEditorProxyChangeCounter=0}initialize(){return o(this,void 0,void 0,(function*(){try{console.log("Inside the try block of setting delegate"),void 0!==this.client&&console.log("This client is not undefined"),void 0!==this.editor&&console.log("This editor is not undefined"),void 0!==this.portalId&&console.log("This portalId is not undefined"+this.portalId),this.portal=yield this.client.joinPortal(this.portalId),this.portal.setDelegate(this),i.window.showInformationMessage("Joined Portal with ID "+this.portalId+" "),this.registerWorkspaceEvents()}catch(e){console.log("Inside the catch block of setting delegate"),console.log(e.message),console.log("After error message"),i.window.showErrorMessage("Unable to join the Portal with ID "+this.portalId+" ")}}))}registerWorkspaceEvents(){i.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument.bind(this)),i.workspace.onWillSaveTextDocument(this.saveDocument.bind(this)),i.window.onDidChangeTextEditorSelection(this.triggerSelectionChanges.bind(this))}onDidChangeTextDocument(e){if(this.bufferBindingsByBuffer){const t=this.bufferBindingsByBuffer.get(e.document);t&&t.onDidChangeBuffer(e.contentChanges)}}saveDocument(e){if(this.bufferBindingsByBuffer){const t=this.bufferBindingsByBuffer.get(e.document);t&&e.waitUntil(t.requestSavePromise())}}triggerSelectionChanges(e){const t=this.editorBindingsByEditor.get(e.textEditor);t&&t.updateSelections(e.selections)}dispose(){this.disposed=!0}isDisposed(){return this.disposed}hostDidClosePortal(){this.hostClosedPortal=!0}hasHostClosedPortal(){return this.hostClosedPortal}hostDidLoseConnection(){this.hostLostConnection=!0}hasHostLostConnection(){return this.hostLostConnection}addEditorProxy(e){e&&this.editorProxies&&("function"==typeof this.onAddEditorProxy&&this.onAddEditorProxy(e),console.log("addEditorProxy: "+e.bufferProxy.uri),this.editorProxies.has(e)||(console.log("Cannot add the same editor proxy multiple times remove/add again"),this.editorProxies.delete(e)),this.editorProxies.add(e))}removeEditorProxy(e){"function"==typeof this.onRemoveEditorProxy&&this.onRemoveEditorProxy(e),n(this.editorProxies.has(e),"Can only remove editor proxies that had previously been added"),this.editorProxies.delete(e),this.tetherEditorProxy===e&&(this.tetherEditorProxy=null,this.tetherEditorProxyChangeCounter++)}editorProxyForURI(e){return Array.from(this.editorProxies).find(t=>t.bufferProxy.uri===e)}getTetherEditorProxy(){return this.tetherEditorProxy}getTetherBufferProxyURI(){return this.tetherEditorProxy?this.tetherEditorProxy.bufferProxy.uri:null}getEditorProxies(){return Array.from(this.editorProxies)}updateTether(e,t,r){return o(this,void 0,void 0,(function*(){t&&(this.lastEditorProxyChangePromise=this.lastEditorProxyChangePromise.then(()=>this.onUpdateTether(e,t,r))),console.log("updateTether: "+t.bufferProxy.uri),this.addEditorProxy(t),this.tetherState=e,t!==this.tetherEditorProxy&&(this.tetherEditorProxy=t,this.tetherEditorProxyChangeCounter++),this.tetherPosition=r}))}onUpdateTether(e,t,r){return o(this,void 0,void 0,(function*(){if(e===s.FollowState.RETRACTED){yield this.findOrCreateEditorByEditorProxy(t)}else this.editorBindingsByEditorProxy.forEach(t=>t.updateTether(e,void 0));const o=this.editorBindingsByEditorProxy.get(t);o&&r&&o.updateTether(e,r)}))}findOrCreateEditorByEditorProxy(e){return o(this,void 0,void 0,(function*(){let t,r=this.editorBindingsByEditorProxy.get(e);if(r)t=r.editor;else{const{bufferProxy:o}=e,n=yield this.findOrCreateBufferForBufferProxy(o),s=this.bufferBindingsByBufferProxy.get(o);yield i.workspace.openTextDocument(n.uri),console.log("find buffer, now show it"),t=yield i.window.showTextDocument(n),r=new c.default({editor:t,portal:this.portal,isHost:!1}),yield i.commands.executeCommand("workbench.action.keepEditor"),s&&s.setEditor(t),r.setEditorProxy(e),e.setDelegate(r),this.editorBindingsByEditorProxy.set(e,r),this.editorProxiesByEditor.set(t,e),this.editorBindingsByEditor.set(t,r),r.onDidDispose(()=>{this.editorProxiesByEditor.delete(t),this.editorBindingsByEditorProxy.delete(e)})}return t}))}findOrCreateBufferForBufferProxy(e){return o(this,void 0,void 0,(function*(){let t,o=this.bufferBindingsByBufferProxy.get(e);if(o)t=o.buffer;else{const n=i.Uri.parse("file://"+d.join(p.tmpdir(),`/${this.portalId}/`,e.uri));yield r(122)(d.dirname(n.fsPath)),l.writeFileSync(n.fsPath,""),t=yield i.workspace.openTextDocument(n),o=new a.default({buffer:t,isHost:!1,didDispose:()=>this.bufferBindingsByBufferProxy.delete(e)}),o.setBufferProxy(e),e.setDelegate(o),this.bufferBindingsByBuffer.set(t,o),this.bufferBindingsByBufferProxy.set(e,o)}return t}))}getTetherState(){return this.tetherState}getTetherPosition(){return this.tetherPosition}updateActivePositions(e){}siteDidJoin(e){this.joinEvents.push(e)}siteDidLeave(e){this.leaveEvents.push(e)}didChangeEditorProxies(){}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(2),n=r(18);t.default=class{constructor({buffer:e,isHost:t,didDispose:r}){this.buffer=e,this.isHost=t,this.didDispose=r}dispose(){this.disposed=!0}isDisposed(){return this.disposed}getText(){return"function"==typeof this.onGetText?this.onGetText():null}setBufferProxy(e){this.bufferProxy=e}setText(e){o.writeFileSync(this.buffer.uri.fsPath,e)}setEditor(e){this.editor=e}updateText(e){return this.editor.edit(t=>{for(let r=e.length-1;r>=0;r--){const o=e[r];t.replace(this.createRange(o.oldStart,o.oldEnd),o.newText)}},{undoStopBefore:!1,undoStopAfter:!0})}traverse(e,t){return 0===t.row?{row:e.row,column:e.column+t.column}:{row:e.row+t.row,column:t.column}}insert(e,t){return console.log("buffer insert pos:"+e+" text: "+t),"function"==typeof this.onInsert&&this.onInsert(e,t),[e,e,t]}delete(e,t){console.log("buffer delete start pos:"+e+" extent: "+t),"function"==typeof this.onDelete&&this.onDelete(e,t);return[e,this.traverse(e,t),""]}createRange(e,t){return new n.Range(new n.Position(e.row,e.column),new n.Position(t.row,t.column))}onDidChangeBuffer(e){this.bufferProxy.onDidChangeBuffer(e.map(e=>{const{start:t,end:r}=e.range;return{oldStart:{row:t.line,column:t.character},oldEnd:{row:r.line,column:r.character},newText:e.text}}))}requestSavePromise(){return new Promise(()=>{this.bufferProxy.requestSave()})}save(){this.buffer.save()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(18);t.default=class{constructor({editor:e,portal:t,isHost:r}){this.editor=e,this.portal=t,this.isHost=r,this.localSelectionMap={},this.selectionsBySiteId=new Map,this.decorationBySiteId=new Map,this.localMarkerSelectionMap=new Map}dispose(){this.disposed=!0}isDisposed(){return this.disposed}onDidDispose(e){this.onDidDispose=e}setEditorProxy(e){this.editorProxy=e}updateSelectionsForSiteId(e,t){console.log("updateSelectionsForSiteID: "+e);let r=this.localMarkerSelectionMap.get(e);const o=Object.assign(Object.assign({},r),t);this.localMarkerSelectionMap.set(e,o);let n=[],i=[];r||(r={},this.selectionsBySiteId[e]=r);for(const e in t){const o=t[e];if(o)if(r[e]=o,this.isCursor(o))i=i.concat(this.convertTeletypeRange(o.range));else{if(o.tailed){const e=this.getCursorRangeFromSelection(o);i=i.concat(this.convertTeletypeRange(e))}n=n.concat(this.convertTeletypeRange(o.range))}else delete r[e]}let s=this.findSiteDecoration(e);this.updateDecorations(s,i,n)}updateDecorations(e,t,r){const{cursorDecoration:o,selectionDecoration:n}=e;this.editor.setDecorations(o,t),this.editor.setDecorations(n,r)}findSiteDecoration(e){let t=this.decorationBySiteId.get(e);return t||(t=this.createDecorationFromSiteId(e),this.decorationBySiteId.set(e,t)),t}isScrollNeededToViewPosition(e){}updateTether(e,t){}clearSelectionsForSiteId(e){const t=this.findSiteDecoration(e);this.updateDecorations(t,[],[])}updateSelections(e){this.processSelections(e),this.editorProxy.updateSelections(this.localSelectionMap)}processSelections(e){const t=Object.keys(this.localSelectionMap),r=e.length;e.forEach((e,t)=>{this.localSelectionMap[t]={range:{start:this.convertVSCodePosition(e.start),end:this.convertVSCodePosition(e.end)},reversed:e.isReversed}}),e.forEach((e,o)=>{if(t.length>r)for(let o=r;o<t.length;o+=1)this.localSelectionMap[o]={range:{start:this.convertVSCodePosition(e.start),end:this.convertVSCodePosition(e.end)},reversed:!1}})}convertVSCodePosition(e){return{column:e.character,row:e.line}}convertTeletypePosition(e){return new o.Position(e.row,e.column)}convertTeletypeRange(e){return new o.Range(this.convertTeletypePosition(e.start),this.convertTeletypePosition(e.end))}createDecorationFromSiteId(e){const t={backgroundColor:"rgba(0,0,255,0.6)"},{login:r}=this.portal.getSiteIdentity(e),n={border:"solid rgba(0,0,255,0.6)",borderWidth:"5px 5px 5px 5px",after:{contentText:r,backgroundColor:"rgba(0,0,255,0.6)",color:"rgba(192,192,192,30)",textDecoration:"none; "+this.stringifyCssProperties({position:"absolute",top:"12px",padding:"0px 5px 0px 0px",display:"inline-block","z-index":1,"border-radius":"20px","font-size":"15px","font-weight":"bold"})}},i=o.window.createTextEditorDecorationType;return{selectionDecoration:i(t),cursorDecoration:i(n)}}stringifyCssProperties(e){return Object.keys(e).map(t=>`${t}: ${e[t]};`).join(" ")}getCursorRangeFromSelection(e){const{range:{end:t,start:r}}=e;return e.reversed?{start:r,end:r}:{start:t,end:t}}isCursor(e){const{start:t,end:r}=e.range;return t.column===r.column&&t.row===r.row}}},function(e,t,r){"use strict";const o=r(123);e.exports=function(e,t){return new Promise((r,n)=>{o(e,t,(e,t)=>null===e?r(t):n(e))})}},function(e,t,r){var o=r(14),n=r(2),i=parseInt("0777",8);function s(e,t,r,a){"function"==typeof t?(r=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,p=t.fs||n;void 0===c&&(c=i&~process.umask()),a||(a=null);var d=r||function(){};e=o.resolve(e),p.mkdir(e,c,(function(r){if(!r)return d(null,a=a||e);switch(r.code){case"ENOENT":s(o.dirname(e),t,(function(r,o){r?d(r,o):s(e,t,d,o)}));break;default:p.stat(e,(function(e,t){e||!t.isDirectory()?d(r,a):d(null,a)}))}}))}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(t,r,s){r&&"object"==typeof r||(r={mode:r});var a=r.mode,c=r.fs||n;void 0===a&&(a=i&~process.umask()),s||(s=null),t=o.resolve(t);try{c.mkdirSync(t,a),s=s||t}catch(n){switch(n.code){case"ENOENT":s=e(o.dirname(t),r,s),e(t,r,s);break;default:var p;try{p=c.statSync(t)}catch(e){throw n}if(!p.isDirectory())throw n}}return s}},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return P})),r.d(t,"Request",(function(){return H})),r.d(t,"Response",(function(){return N})),r.d(t,"FetchError",(function(){return u}));var o=r(1),n=r(24),i=r(8),s=r(36),a=r(9);const c=o.Readable,p=Symbol("buffer"),d=Symbol("type");class l{constructor(){this[d]="";const e=arguments[0],t=arguments[1],r=[];let o=0;if(e){const t=e,n=Number(t.length);for(let e=0;e<n;e++){const n=t[e];let i;i=n instanceof Buffer?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?Buffer.from(n):n instanceof l?n[p]:Buffer.from("string"==typeof n?n:String(n)),o+=i.length,r.push(i)}}this[p]=Buffer.concat(r);let n=t&&void 0!==t.type&&String(t.type).toLowerCase();n&&!/[^\u0020-\u007E]/.test(n)&&(this[d]=n)}get size(){return this[p].length}get type(){return this[d]}text(){return Promise.resolve(this[p].toString())}arrayBuffer(){const e=this[p],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new c;return e._read=function(){},e.push(this[p]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let o,n;o=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),n=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const i=Math.max(n-o,0),s=this[p].slice(o,o+i),a=new l([],{type:arguments[2]});return a[p]=s,a}}function u(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let g;Object.defineProperties(l.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="FetchError";try{g=require("encoding").convert}catch(e){}const h=Symbol("Body internals"),f=o.PassThrough;function y(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size;let i=void 0===n?0:n;var s=r.timeout;let a=void 0===s?0:s;null==e?e=null:S(e)?e=Buffer.from(e.toString()):b(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof o||(e=Buffer.from(String(e)))),this[h]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=a,e instanceof o&&e.on("error",(function(e){const r="AbortError"===e.name?e:new u(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[h].error=r}))}function m(){var e=this;if(this[h].disturbed)return y.Promise.reject(new TypeError("body used already for: "+this.url));if(this[h].disturbed=!0,this[h].error)return y.Promise.reject(this[h].error);let t=this.body;if(null===t)return y.Promise.resolve(Buffer.alloc(0));if(b(t)&&(t=t.stream()),Buffer.isBuffer(t))return y.Promise.resolve(t);if(!(t instanceof o))return y.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new y.Promise((function(o,s){let a;e.timeout&&(a=setTimeout((function(){i=!0,s(new u(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(i=!0,s(t)):s(new u(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!i&&null!==t){if(e.size&&n+t.length>e.size)return i=!0,void s(new u(`content size at ${e.url} over limit: ${e.size}`,"max-size"));n+=t.length,r.push(t)}})),t.on("end",(function(){if(!i){clearTimeout(a);try{o(Buffer.concat(r,n))}catch(t){s(new u(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function S(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function b(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function _(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof o&&"function"!=typeof n.getBoundary&&(t=new f,r=new f,n.pipe(t),n.pipe(r),e[h].body=t,n=r),n}function v(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":S(e)?"application/x-www-form-urlencoded;charset=UTF-8":b(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof o?null:"text/plain;charset=UTF-8"}function E(e){const t=e.body;return null===t?0:b(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}y.prototype={get body(){return this[h].body},get bodyUsed(){return this[h].disturbed},arrayBuffer(){return m.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return m.call(this).then((function(t){return Object.assign(new l([],{type:e.toLowerCase()}),{[p]:t})}))},json(){var e=this;return m.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return y.Promise.reject(new u(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return m.call(this).then((function(e){return e.toString()}))},buffer(){return m.call(this)},textConverted(){var e=this;return m.call(this).then((function(t){return function(e,t){if("function"!=typeof g)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let o,n,i="utf-8";r&&(o=/charset=([^;]*)/i.exec(r));n=e.slice(0,1024).toString(),!o&&n&&(o=/<meta.+?charset=(['"])(.+?)\1/i.exec(n));!o&&n&&(o=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(n),o&&(o=/charset=(.*)/i.exec(o.pop())));!o&&n&&(o=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(n));o&&(i=o.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030"));return g(e,"UTF-8",i).toString()}(t,e.headers)}))}},Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),y.mixIn=function(e){for(const t of Object.getOwnPropertyNames(y.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(y.prototype,t);Object.defineProperty(e,t,r)}},y.Promise=global.Promise;const O=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,T=/[^\t\x20-\x7e\x80-\xff]/;function w(e){if(e=""+e,O.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function M(e){if(e=""+e,T.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function I(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const R=Symbol("map");class P{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[R]=Object.create(null),e instanceof P){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){w(e=""+e);const t=I(this[R],e);return void 0===t?null:this[R][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=C(this),o=0;for(;o<r.length;){var n=r[o];const i=n[0],s=n[1];e.call(t,s,i,this),r=C(this),o++}}set(e,t){t=""+t,w(e=""+e),M(t);const r=I(this[R],e);this[R][void 0!==r?r:e]=[t]}append(e,t){t=""+t,w(e=""+e),M(t);const r=I(this[R],e);void 0!==r?this[R][r].push(t):this[R][e]=[t]}has(e){return w(e=""+e),void 0!==I(this[R],e)}delete(e){w(e=""+e);const t=I(this[R],e);void 0!==t&&delete this[R][t]}raw(){return this[R]}keys(){return B(this,"key")}values(){return B(this,"value")}[Symbol.iterator](){return B(this,"key+value")}}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[R]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[R][t].join(", ")}:function(t){return[t.toLowerCase(),e[R][t].join(", ")]})}P.prototype.entries=P.prototype[Symbol.iterator],Object.defineProperty(P.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(P.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const U=Symbol("internal");function B(e,t){const r=Object.create(A);return r[U]={target:e,kind:t,index:0},r}const A=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==A)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[U];const t=e.target,r=e.kind,o=e.index,n=C(t,r);return o>=n.length?{value:void 0,done:!0}:(this[U].index=o+1,{value:n[o],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function x(e){const t=Object.assign({__proto__:null},e[R]),r=I(e[R],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(A,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const k=Symbol("Response internals"),D=n.STATUS_CODES;class N{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.call(this,e,t);const r=t.status||200,o=new P(t.headers);if(null!=e&&!o.has("Content-Type")){const t=v(e);t&&o.append("Content-Type",t)}this[k]={url:t.url,status:r,statusText:t.statusText||D[r],headers:o,counter:t.counter}}get url(){return this[k].url||""}get status(){return this[k].status}get ok(){return this[k].status>=200&&this[k].status<300}get redirected(){return this[k].counter>0}get statusText(){return this[k].statusText}get headers(){return this[k].headers}clone(){return new N(_(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}y.mixIn(N.prototype),Object.defineProperties(N.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(N.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const L=Symbol("Request internals"),j=i.parse,F=i.format,W="destroy"in o.Readable.prototype;function z(e){return"object"==typeof e&&"object"==typeof e[L]}class H{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};z(e)?t=j(e.url):(t=e&&e.href?j(e.href):j(""+e),e={});let o=r.method||e.method||"GET";if(o=o.toUpperCase(),(null!=r.body||z(e)&&null!==e.body)&&("GET"===o||"HEAD"===o))throw new TypeError("Request with GET/HEAD method cannot have body");let n=null!=r.body?r.body:z(e)&&null!==e.body?_(e):null;y.call(this,n,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new P(r.headers||e.headers||{});if(null!=n&&!i.has("Content-Type")){const e=v(n);e&&i.append("Content-Type",e)}let s=z(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[L]={method:o,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[L].method}get url(){return F(this[L].parsedURL)}get headers(){return this[L].headers}get redirect(){return this[L].redirect}get signal(){return this[L].signal}clone(){return new H(this)}}function G(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}y.mixIn(H.prototype),Object.defineProperty(H.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(H.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),G.prototype=Object.create(Error.prototype),G.prototype.constructor=G,G.prototype.name="AbortError";const V=o.PassThrough,q=i.resolve;function Y(e,t){if(!Y.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return y.Promise=Y.Promise,new Y.Promise((function(r,i){const c=new H(e,t),p=function(e){const t=e[L].parsedURL,r=new P(e[L].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof o.Readable&&!W)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),null!=e.body){const t=E(e);"number"==typeof t&&(n=String(t))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:x(r),agent:i})}(c),d=("https:"===p.protocol?s:n).request,l=c.signal;let g=null;const h=function(){let e=new G("The user aborted a request.");i(e),c.body&&c.body instanceof o.Readable&&c.body.destroy(e),g&&g.body&&g.body.emit("error",e)};if(l&&l.aborted)return void h();const f=function(){h(),S()},y=d(p);let m;function S(){y.abort(),l&&l.removeEventListener("abort",f),clearTimeout(m)}l&&l.addEventListener("abort",f),c.timeout&&y.once("socket",(function(e){m=setTimeout((function(){i(new u("network timeout at: "+c.url,"request-timeout")),S()}),c.timeout)})),y.on("error",(function(e){i(new u(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),S()})),y.on("response",(function(e){clearTimeout(m);const t=function(e){const t=new P;for(const r of Object.keys(e))if(!O.test(r))if(Array.isArray(e[r]))for(const o of e[r])T.test(o)||(void 0===t[R][r]?t[R][r]=[o]:t[R][r].push(o));else T.test(e[r])||(t[R][r]=[e[r]]);return t}(e.headers);if(Y.isRedirect(e.statusCode)){const o=t.get("Location"),n=null===o?null:q(c.url,o);switch(c.redirect){case"error":return i(new u("redirect mode is set to error: "+c.url,"no-redirect")),void S();case"manual":if(null!==n)try{t.set("Location",n)}catch(e){i(e)}break;case"follow":if(null===n)break;if(c.counter>=c.follow)return i(new u("maximum redirect reached at: "+c.url,"max-redirect")),void S();const o={headers:new P(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:c.body,signal:c.signal,timeout:c.timeout};return 303!==e.statusCode&&c.body&&null===E(c)?(i(new u("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void S()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==c.method)||(o.method="GET",o.body=void 0,o.headers.delete("content-length")),r(Y(new H(n,o))),void S())}}e.once("end",(function(){l&&l.removeEventListener("abort",f)}));let o=e.pipe(new V);const n={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:c.size,timeout:c.timeout,counter:c.counter},s=t.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===s||204===e.statusCode||304===e.statusCode)return g=new N(o,n),void r(g);const p={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"==s||"x-gzip"==s)return o=o.pipe(a.createGunzip(p)),g=new N(o,n),void r(g);if("deflate"!=s&&"x-deflate"!=s){if("br"==s&&"function"==typeof a.createBrotliDecompress)return o=o.pipe(a.createBrotliDecompress()),g=new N(o,n),void r(g);g=new N(o,n),r(g)}else{e.pipe(new V).once("data",(function(e){o=8==(15&e[0])?o.pipe(a.createInflate()):o.pipe(a.createInflateRaw()),g=new N(o,n),r(g)}))}})),function(e,t){const r=t.body;null===r?e.end():b(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(y,c)}))}Y.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},Y.Promise=global.Promise,t.default=Y},function(e,t,r){"use strict";e.exports={API_URL_BASE:"https://api.teletype.atom.io",PUSHER_KEY:"f119821248b7429bece3",PUSHER_CLUSTER:"mt1",AUTH_TOKEN:""}},function(e,t,r){var o=r(13).EventEmitter,n=r(127);e.exports=function(e){var t=n(e),i=new o;return Object.assign(i,{close:t.close.bind(t),electronDaemon:t,RTCPeerConnection:r(157)(t,i),RTCSessionDescription:r(163),RTCIceCandidate:r(164),RTCDataChannel:r(73)})}},function(e,t,r){e.exports=r(128)},function(e,t,r){"use strict";(function(t){var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();var n,i=r(129),s=r(130),a=r(14),c=r(13),p=r(145);try{n=r(156)}catch(e){}e.exports=function(e){return new l(e)};var d=0,l=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return(e=e||{}).daemonMain=e.daemonMain||a.join(t,"..","app","daemon.js"),e.timeout="number"==typeof e.timeout?e.timeout:1e4,e.windowOpts=e.windowOpts||{show:!1,skipTaskbar:!0},e.headless=null!=e.headless?e.headless:null,null==e.headless&&"linux"===process.platform&&(e.headless=!0),null==e.nodeIPC&&"linux"!==process.platform&&(e.nodeIPC=!0),o.queue=[],o.ready=!1,o.closing=!1,e.headless?o._startHeadless((function(t){if(t)return o.error(t);o._startElectron(e)})):o._startElectron(e),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),o(r,[{key:"eval",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];"function"==typeof r&&(o=r,r={});var n=(d++).toString(36);if(this.once(n,(function(n){if(n.err){var i=r.mainProcess?"main process":"window",s=new Error('Error evaluating "'+e+'" in "'+i+'": '+n.err);s.original=n.err}if(o)return s?o(s):o(null,n.res);s&&t.emit("error",s)})),!this.ready)return this.queue.push([e,r,o]);this.child.send({id:n,opts:r,code:e})}},{key:"keepalive",value:function(){this.child.send(0)}},{key:"error",value:function(e){this.emit("error",e),this.close()}},{key:"close",value:function(e){var t=this;this.closing||(this.closing=!0,this.xvfb&&process.kill(this.xvfb.pid,"SIGKILL"),this.child&&this.child.kill(e),this.eval=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];"function"==typeof r&&(o=r,r={});var n=new Error("Daemon already closed");if(o)return o(n);t.emit("error",n)},clearInterval(this.keepaliveInterval))}},{key:"_startHeadless",value:function(e){var t=this;if(null==n)return e(new Error('Could not load "headless" module'));n({display:{width:1024,height:768,depth:24},args:["-nolisten","tcp"]},(function(r,o,n){if(r){var i=new Error('Could not start Xvfb: "'+r.message+'". \nThe "xvfb" package is required to run "electron-eval" on Linux. Please install it first ("sudo apt-get install xvfb").');return e(i)}process.on("exit",(function(){t.closing||process.kill(o.pid,"SIGKILL")})),t.xvfb=o,t.xDisplay=":"+n,e(null)}))}},{key:"_startElectron",value:function(e,t){var r=this,o={},n="";this.xDisplay&&(o.DISPLAY=this.xDisplay);var a={env:o};e.nodeIPC&&(a.stdio=["ipc"]),this.child=s(e.electron||i,[e.daemonMain],a),this.child.on("close",(function(e){if(!r.closing){var t="electron-eval error: Electron process exited with code "+e;n&&(t+=".\nStderr:\n"+n),r.error(new Error(t))}})),this.child.on("error",(function(e){return r.error(e)})),this.child.stderr.on("data",(function(e){n+=e.toString()+(n?"\n":"")})),process.on("exit",(function(){return r.child.kill()})),e.nodeIPC||this._startIPC(),this.child.once("message",(function(t){r.keepaliveInterval=setInterval(r.keepalive.bind(r),e.timeout/2),r.keepaliveInterval.unref(),r.child.send(e),r.child.once("message",(function(e){r.child.on("message",(function(e){return r.emit(e[0],e[1])})),r.ready=!0,r.queue.forEach((function(e){return r.eval.apply(r,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))})),r.queue=null,r.emit("ready"),r.keepalive()}))}))}},{key:"_startIPC",value:function(){var e=this,t=p.serialize();t.on("error",(function(t){return e.error(t)})),t.pipe(this.child.stdin);var r=p.parse();r.on("error",(function(t){return e.error(t)})),this.child.stdout.pipe(r),this.child.send=function(e){return t.write(e)},r.on("data",(function(t){return e.child.emit("message",t)}))}}]),r}(c)}).call(this,"/")},function(e,t,r){(function(t){var o=r(2),n=r(14),i=n.join(t,"path.txt");if(!o.existsSync(i))throw new Error("Electron failed to install correctly, please delete node_modules/electron and try installing again");e.exports=n.join(t,o.readFileSync(i,"utf-8"))}).call(this,"/")},function(e,t,r){"use strict";var o=r(35),n=r(131),i=r(144),s=o.spawnSync;function a(e,t,r){var s,a;return s=n(e,t,r),a=o.spawn(s.command,s.args,s.options),i.hookChildProcess(a,s),a}e.exports=a,e.exports.spawn=a,e.exports.sync=function(e,t,o){var a,c;if(!s)try{s=r(!function(){var e=new Error("Cannot find module 'spawn-sync'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){throw new Error("In order to use spawnSync on node 0.10 or older, you must install spawn-sync:\n\n  npm install spawn-sync --save")}return a=n(e,t,o),(c=s(a.command,a.args,a.options)).error=c.error||i.verifyENOENTSync(c.status,a),c},e.exports._parse=n,e.exports._enoent=i},function(e,t,r){"use strict";var o=r(61),n=r(139),i=r(63),s=r(140),a=r(141),c="win32"===process.platform,p=/\.(?:com|exe)$/i,d=parseInt(process.version.substr(1).split(".")[0],10)>=6||4===parseInt(process.version.substr(1).split(".")[0],10)&&parseInt(process.version.substr(1).split(".")[1],10)>=8;e.exports=function(e,t,r){var l;return t&&!Array.isArray(t)&&(r=t,t=null),l={command:e,args:t=t?t.slice(0):[],options:r=r||{},file:void 0,original:e},r.shell?function(e){var t;return d||(t=[e.command].concat(e.args).join(" "),c?(e.command="string"==typeof e.options.shell?e.options.shell:process.env.comspec||"cmd.exe",e.args=["/d","/s","/c",'"'+t+'"'],e.options.windowsVerbatimArguments=!0):("string"==typeof e.options.shell?e.command=e.options.shell:"android"===process.platform?e.command="/system/bin/sh":e.command="/bin/sh",e.args=["-c",t])),e}(l):function(e){var t,r,d;return c?(e.file=o(e.command),e.file=e.file||o(e.command,!0),(t=e.file&&a(e.file))?(e.args.unshift(e.file),e.command=t,r=n||!p.test(o(t)||o(t,!0))):r=n||!p.test(e.file),r&&(d="echo"!==e.command,e.command=s(e.command),e.args=e.args.map((function(e){return i(e,d)})),e.args=["/d","/s","/c",'"'+e.command+(e.args.length?" "+e.args.join(" "):"")+'"'],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0),e):e}(l)}},function(e,t,r){e.exports=p,p.sync=function(e,t){for(var r=c(e,t=t||{}),o=r.env,i=r.ext,p=r.extExe,d=[],l=0,u=o.length;l<u;l++){var g=o[l];'"'===g.charAt(0)&&'"'===g.slice(-1)&&(g=g.slice(1,-1));var h=n.join(g,e);!g&&/^\.[\\\/]/.test(e)&&(h=e.slice(0,2)+h);for(var f=0,y=i.length;f<y;f++){var m=h+i[f];try{if(s.sync(m,{pathExt:p})){if(!t.all)return m;d.push(m)}}catch(e){}}}if(t.all&&d.length)return d;if(t.nothrow)return null;throw a(e)};var o="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,n=r(14),i=o?";":":",s=r(133);function a(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function c(e,t){var r=t.colon||i,n=t.path||process.env.PATH||"",s=[""];n=n.split(r);var a="";return o&&(n.unshift(process.cwd()),s=(a=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(r),-1!==e.indexOf(".")&&""!==s[0]&&s.unshift("")),(e.match(/\//)||o&&e.match(/\\/))&&(n=[""]),{env:n,ext:s,extExe:a}}function p(e,t,r){"function"==typeof t&&(r=t,t={});var o=c(e,t),i=o.env,p=o.ext,d=o.extExe,l=[];!function o(c,u){if(c===u)return t.all&&l.length?r(null,l):r(a(e));var g=i[c];'"'===g.charAt(0)&&'"'===g.slice(-1)&&(g=g.slice(1,-1));var h=n.join(g,e);!g&&/^\.[\\\/]/.test(e)&&(h=e.slice(0,2)+h),function e(n,i){if(n===i)return o(c+1,u);var a=p[n];s(h+a,{pathExt:d},(function(o,s){if(!o&&s){if(!t.all)return r(null,h+a);l.push(h+a)}return e(n+1,i)}))}(0,p.length)}(0,i.length)}},function(e,t,r){var o;r(2);function n(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,o){n(e,t||{},(function(e,t){e?o(e):r(t)}))}))}o(e,t||{},(function(e,o){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,o=!1),r(e,o)}))}o="win32"===process.platform||global.TESTING_WINDOWS?r(134):r(135),e.exports=n,n.sync=function(e,t){try{return o.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,r){e.exports=i,i.sync=function(e,t){return n(o.statSync(e),e,t)};var o=r(2);function n(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var o=0;o<r.length;o++){var n=r[o].toLowerCase();if(n&&e.substr(-n.length).toLowerCase()===n)return!0}return!1}(t,r)}function i(e,t,r){o.stat(e,(function(o,i){r(o,!o&&n(i,e,t))}))}},function(e,t,r){e.exports=n,n.sync=function(e,t){return i(o.statSync(e),t)};var o=r(2);function n(e,t,r){o.stat(e,(function(e,o){r(e,!e&&i(o,t))}))}function i(e,t){return e.isFile()&&function(e,t){var r=e.mode,o=e.uid,n=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),p=parseInt("001",8),d=a|c;return r&p||r&c&&n===s||r&a&&o===i||r&d&&0===i}(e,t)}},function(e,t,r){"pseudomap"===process.env.npm_package_name&&"test"===process.env.npm_lifecycle_script&&(process.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||process.env.TEST_PSEUDOMAP?e.exports=r(137):e.exports=Map},function(e,t){var r=Object.prototype.hasOwnProperty;function o(e){if(!(this instanceof o))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof o||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function n(e,t){return e===t||e!=e&&t!=t}function i(e,t,r){this.key=e,this.value=t,this._index=r}function s(e,t){for(var o=0,i="_"+t,s=i;r.call(e,s);s=i+o++)if(n(e[s].key,t))return e[s]}e.exports=o,o.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(r){"size"!==r&&e.call(t,this._data[r].value,this._data[r].key)}),this)},o.prototype.has=function(e){return!!s(this._data,e)},o.prototype.get=function(e){var t=s(this._data,e);return t&&t.value},o.prototype.set=function(e,t){!function(e,t,o){for(var s=0,a="_"+t,c=a;r.call(e,c);c=a+s++)if(n(e[c].key,t))return void(e[c].value=o);e.size++,e[c]=new i(t,o,c)}(this._data,e,t)},o.prototype.delete=function(e){var t=s(this._data,e);t&&(delete this._data[t._index],this._data.size--)},o.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(o.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),o.prototype.values=o.prototype.keys=o.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},function(e,t){function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var o=0,n=arguments.length;o<n;o++)t.push(arguments[o]);return t}function o(e,t){e.tail=new i(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function n(e,t){e.head=new i(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function i(e,t,r,o){if(!(this instanceof i))return new i(e,t,r,o);this.list=o,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=r,r.Node=i,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,o=0;null!==r;o++)e.call(t,r.value,o,this),r=r.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,o=this.length-1;null!==r;o--)e.call(t,r.value,o,this),r=r.prev},r.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},r.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},r.prototype.map=function(e,t){t=t||this;for(var o=new r,n=this.head;null!==n;)o.push(e.call(t,n.value,this)),n=n.next;return o},r.prototype.mapReverse=function(e,t){t=t||this;for(var o=new r,n=this.tail;null!==n;)o.push(e.call(t,n.value,this)),n=n.prev;return o},r.prototype.reduce=function(e,t){var r,o=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");o=this.head.next,r=this.head.value}for(var n=0;null!==o;n++)r=e(r,o.value,n),o=o.next;return r},r.prototype.reduceReverse=function(e,t){var r,o=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");o=this.tail.prev,r=this.tail.value}for(var n=this.length-1;null!==o;n--)r=e(r,o.value,n),o=o.prev;return r},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var o=new r;if(t<e||t<0)return o;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)o.push(i.value);return o},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var o=new r;if(t<e||t<0)return o;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)o.push(i.value);return o},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var o=r.prev;r.prev=r.next,r.next=o}return this.head=t,this.tail=e,this}},function(e,t,r){"use strict";var o;e.exports="win32"===process.platform&&0===(o=process.version.substr(1).split(".").map((function(e){return parseInt(e,10)})))[0]&&o[1]<12},function(e,t,r){"use strict";var o=r(63);e.exports=function(e){return/^[a-z0-9_-]+$/i.test(e)?e:o(e,!0)}},function(e,t,r){"use strict";var o=r(2),n=r(62),i=r(142),s=new n({max:50,maxAge:3e4});e.exports=function(e){var t,r,n;if(s.has(e))return s.get(e);t=new Buffer(150);try{r=o.openSync(e,"r"),o.readSync(r,t,0,150,0),o.closeSync(r)}catch(e){}return n=i(t.toString()),s.set(e,n),n}},function(e,t,r){"use strict";var o=r(143);e.exports=function(e){var t=e.match(o);if(!t)return null;var r=t[0].replace(/#! ?/,"").split(" "),n=r[0].split("/").pop(),i=r[1];return"env"===n?i:n+(i?" "+i:"")}},function(e,t,r){"use strict";e.exports=/^#!.*/},function(e,t,r){"use strict";var o="win32"===process.platform,n=r(61),i=0===process.version.indexOf("v0.10.");function s(e,t){var r;return(r=new Error(t+" "+e+" ENOENT")).code=r.errno="ENOENT",r.syscall=t+" "+e,r}function a(e,t){return o&&1===e&&!t.file?s(t.original,"spawn"):null}e.exports.hookChildProcess=function(e,t){var r;o&&(r=e.emit,e.emit=function(o,n){var i;return"exit"===o&&(i=a(n,t))?r.call(e,"error",i):r.apply(e,arguments)})},e.exports.verifyENOENT=a,e.exports.verifyENOENTSync=function(e,t){return o&&1===e&&!t.file||i&&-1===e&&(t.file=o?t.file:n(t.original),!t.file)?s(t.original,"spawnSync"):null},e.exports.notFoundError=s},function(e,t,r){var o=r(64),n=r(153),i=r(25).EOL,s=r(155);function a(e){return(e=e||{}).strict=!1!==e.strict,n((function(t){try{if(t)return JSON.parse(t)}catch(r){e.strict&&this.emit("error",new Error("Could not parse row "+t.slice(0,50)+"..."))}}),e)}e.exports=a,e.exports.serialize=e.exports.stringify=function(e){return o.obj(e,(function(e,t,r){r(null,s(e)+i)}))},e.exports.parse=a},function(e,t,r){var o=r(1);"disable"===process.env.READABLE_STREAM&&o?(e.exports=o,(t=e.exports=o.Readable).Readable=o.Readable,t.Writable=o.Writable,t.Duplex=o.Duplex,t.Transform=o.Transform,t.PassThrough=o.PassThrough,t.Stream=o):((t=e.exports=r(65)).Stream=o||t,t.Readable=t,t.Writable=r(68),t.Duplex=r(15),t.Transform=r(70),t.PassThrough=r(151))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";var o=r(23).Buffer,n=r(0);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,t.copy(r,n),a+=s.data.length,s=s.next;return i},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,r){e.exports=r(0).deprecate},function(e,t,r){"use strict";e.exports=i;var o=r(70),n=Object.create(r(16));function i(e){if(!(this instanceof i))return new i(e);o.call(this,e)}n.inherits=r(17),n.inherits(i,o),i.prototype._transform=function(e,t,r){r(null,e)}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var o=arguments[t];for(var n in o)r.call(o,n)&&(e[n]=o[n])}return e};var r=Object.prototype.hasOwnProperty},function(e,t,r){"use strict";var o=r(64),n=r(154).StringDecoder;function i(e,t,r){if(this._last+=this._decoder.write(e),this._last.length>this.maxLength)return r(new Error("maximum buffer reached"));var o=this._last.split(this.matcher);this._last=o.pop();for(var n=0;n<o.length;n++)a(this,this.mapper(o[n]));r()}function s(e){this._last+=this._decoder.end(),this._last&&a(this,this.mapper(this._last)),e()}function a(e,t){void 0!==t&&e.push(t)}function c(e){return e}e.exports=function(e,t,r){switch(e=e||/\r?\n/,t=t||c,r=r||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||(r=e,e=/\r?\n/);break;case 2:"function"==typeof e?(r=t,t=e,e=/\r?\n/):"object"==typeof t&&(r=t,t=c)}var a=o(r,i,s);return a._readableState.objectMode=!0,a._readableState.highWaterMark&&!r.highWaterMark&&(a._readableState.highWaterMark=16),a._last="",a._decoder=new n("utf8"),a.matcher=e,a.mapper=t,a.maxLength=r.maxLength,a}},function(e,t){e.exports=require("string_decoder")},function(e,t){function r(e,t){var r=[],o=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]"}),function(n,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?o.splice(s,1/0,n):o.push(n),~r.indexOf(i)&&(i=t.call(this,n,i))}else r.push(i);return null==e?i:e.call(this,n,i)}}(e.exports=function(e,t,o,n){return JSON.stringify(e,r(t,n),o)}).getSerialize=r},function(e,t,r){var o,n=r(2);try{o=r(!function(){var e=new Error("Cannot find module 'child-killer'");throw e.code="MODULE_NOT_FOUND",e}()).spawn}catch(e){o=r(35).spawn}e.exports=function e(t,r,i){i||r?!i&&r&&(i=r,"object"==typeof t?r=99:"number"==typeof t&&(r=t,t=null)):(i=t,t=null,r=99);var s=[];(t=t||{}).display&&(s=["-screen","0",t.display.width+"x"+t.display.height+"x"+(t.display.depth||16)]),function e(t,r){n.exists("/tmp/.X"+t+"-lock",(function(o){o?e(++t,r):r(t)}))}(r,(function(r){var n=[":"+r].concat(s).concat(t.args||[]),a=o("Xvfb",n,{stdio:t.stdio}),c=setTimeout((function(){l(),i(null,a,r)}),500);function p(){clearTimeout(c),l(),r++,e(r,i)}function d(e){clearTimeout(c),l(),~e.message.indexOf("ENOENT")?i(new Error("Xvfb is not installed or is not in your $PATH")):i(e)}function l(){a.removeListener("exit",p),a.removeListener("error",d)}a.once("exit",p),a.once("error",d)}))}},function(e,t,r){"use strict";var o=r(13).EventEmitter,n=r(158),i=r(71)("RTCPC");e.exports=function(e,t){var s=r(73)(e,t),a=0;return e.eval("window.conns = {}",e=>{e&&t.emit("error",e)}),class extends o{constructor(r){if(super(),e.closing)throw new Error("Cannot create RTCPeerConnection, the electron-webrtc daemon has been closed");this._id=(a++).toString(36),this._dataChannels=new Map,this._offer=null,this._answer=null,this.iceConnectionState="new",this.iceGatheringState="new",this.localDescription=null,this.peerIdentity=null,this.remoteDescription=null,this.signalingState="stable",e.on("pc:"+this._id,this.onMessage.bind(this)),e.eval(`\n        (function () {\n          var pc = conns[${JSON.stringify(this._id)}] = new webkitRTCPeerConnection(${JSON.stringify(r)})\n          pc.dataChannels = {}\n          var id = 'pc:' + ${JSON.stringify(this._id)}\n          pc.onaddstream = function (e) {\n            // TODO: send MediaStream info\n            send(id, { type: 'addstream' })\n          }\n          pc.ondatachannel = function (e) {\n            pc.dataChannels[e.channel.id] = e.channel\n            var channel = {}\n            for (var key in e.channel) {\n              if (typeof e.channel[key] === 'function' || e.channel[key] == null) continue\n              channel[key] = e.channel[key]\n            }\n            // Queues messages that have been recieved before the message listener has been added\n            e.channel.msgQueue = []\n            e.channel.onmessage = function (eMsg) {\n              e.channel.msgQueue.push(eMsg)\n            }\n            send(id, {\n              type: 'datachannel',\n              channel: channel\n            })\n          }\n          pc.onicecandidate = function (e) {\n            var event = {}\n            if (e.candidate) {\n              event.candidate = {\n                candidate: e.candidate.candidate,\n                sdpMid: e.candidate.sdpMid,\n                sdpMLineIndex: e.candidate.sdpMLineIndex\n              }\n            }\n            var offer, answer\n            function sendEvent () {\n              send(id, {\n                type: 'icecandidate',\n                event: event,\n                iceGatheringState: pc.iceGatheringState,\n                offer: offer ? offer.toJSON() : null\n              })\n            }\n            pc.createOffer(function (o) {\n              offer = o\n              sendEvent()\n            }, function () {\n              offer = false\n              sendEvent()\n            })\n          }\n          pc.oniceconnectionstatechange = function (e) {\n            send(id, { type: 'iceconnectionstatechange', iceConnectionState: pc.iceConnectionState })\n          }\n          pc.onidentityresult = function (e) {\n            send(id, { type: 'identityresult', event: {\n              assertion: e.assertion\n            }})\n          }\n          pc.onidpassertionerror = function (e) {\n            send(id, {\n              type: 'idpassertionerror',\n              event: {\n                idp: e.idp,\n                loginUrl: e.loginUrl,\n                protocol: e.protocol,\n              }\n            })\n          }\n          pc.onidpvalidationerror = function (e) {\n            send(id, {\n              type: 'idpvalidationerror',\n              event: {\n                idp: e.idp,\n                loginUrl: e.loginUrl,\n                protocol: e.protocol,\n              }\n            })\n          }\n          pc.onnegotiationneeded = function (e) {\n            send(id, { type: 'negotiationneeded' })\n          }\n          pc.onremovestream = function (e) {\n            send(id, {\n              type: 'removestream',\n              event: { id: e.stream.id }\n            })\n          }\n          pc.onsignalingstatechange = function (e) {\n            send(id, {\n              type: 'signalingstatechange',\n              signalingState: pc.signalingState\n            })\n          }\n        })()\n      `,e=>{e&&t.emit("error",e,this)})}onMessage(e){var t=this["on"+e.type],r=e.event||{};switch(i(this._id+"<<",e.type,e,!!t),e.type){case"addstream":break;case"datachannel":e.channel._pcId=this._id,r.channel=new s(e.channel),this._dataChannels.set(r.channel.id,r.channel);break;case"icecandidate":this.iceGatheringState=e.iceGatheringState,e.offer&&(this._offer=Object.assign(this._offer||{},e.offer));break;case"iceconnectionstatechange":this.iceConnectionState=e.iceConnectionState;break;case"removestream":break;case"signalingstatechange":this.signalingState=e.signalingState}this.emit(e.type,r),t&&t(r)}createDataChannel(e,t){var r=new s(this._id,e,t);return r.once("init",()=>this._dataChannels.set(r.id,r)),r}_getCreateArgs(e,t,r){return e&&t?{cb:e,errCb:t,options:r}:{options:e}}createOffer(e,t,r){let{cb:o,errCb:n,options:i}=this._getCreateArgs(e,t,r);return this._offer&&(o&&o(this._offer),Promise.resolve(this._offer)),this._callRemote("createOffer","onSuccess, onFailure, "+JSON.stringify(i),e=>{this._offer=e,o&&o(e)},n)}createAnswer(e,t,r){let{cb:o,errCb:n,options:i}=this._getCreateArgs(e,t,r);return this._answer&&(o&&o(this._answer),Promise.resolve(this._answer)),this._callRemote("createAnswer","onSuccess, onFailure, "+JSON.stringify(i),e=>{this._answer=e,o&&o(e)},n)}setLocalDescription(e,t,r){return this.localDescription=e,this._callRemote("setLocalDescription",`new RTCSessionDescription(${JSON.stringify(e)}), onSuccess, onFailure`,t,r)}setRemoteDescription(e,t,r){return this.remoteDescription=e,this._callRemote("setRemoteDescription",`new RTCSessionDescription(${JSON.stringify(e)}), onSuccess, onFailure`,t,r)}addIceCandidate(e,t,r){return this._callRemote("addIceCandidate",`new RTCIceCandidate(${JSON.stringify(e)}), onSuccess, onFailure`,t,r)}close(){this._eval("\n        if (pc.signalingState !== 'closed') pc.close()\n      ")}getStats(e){this._callRemote("getStats","\n        function (res) {\n          res = res.result()\n          var output = res.map(function (res) {\n            var item = {\n              id: res.id,\n              timestamp: res.timestamp,\n              type: res.type,\n              stats: {}\n            }\n            res.names().forEach(function (name) {\n              item.stats[name] = res.stat(name)\n            })\n            return item\n          })\n          onSuccess(output)\n        }\n      ",t=>{for(let e of t){let t=e.stats;delete e.stats,e.names=()=>Object.keys(t),e.stat=e=>t[e]}e({result:()=>t})})}_eval(r,o,i){var s,a,c=new Promise((e,t)=>{s=e,a=t}),p=n();return e.once(p,e=>{e.err?(i&&i(e.err),a(e.err)):(o&&o(e.res),s(e.res))}),e.eval(`\n        (function () {\n          var id = ${JSON.stringify(this._id)}\n          var reqId = ${JSON.stringify(p)}\n          var pc = conns[id]\n          var onSuccess = function (res) {\n            send(reqId, { res: res && res.toJSON ? res.toJSON() : res })\n          }\n          var onFailure = function (err) {\n            send(reqId, { err: err })\n          }\n          ${r}\n        })()\n      `,e=>{e&&t.emit("error",e,this)}),c}_callRemote(e,t,r,o){return this._eval(`pc.${e}(${t||""})`,r,o)}}}},function(e,t){var r=e.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var o=Math.log(Math.pow(2,e))/Math.log(t),n=2;o===1/0;n*=2)o=Math.log(Math.pow(2,e/n))/Math.log(t)*n;var i=o-Math.floor(o),s="";for(n=0;n<Math.floor(o);n++){s=Math.floor(Math.random()*t).toString(t)+s}if(i){var a=Math.pow(t,i);s=Math.floor(Math.random()*a).toString(t)+s}var c=parseInt(s,t);return c!==1/0&&c>=Math.pow(2,e)?r(e,t):s};r.rack=function(e,t,o){var n=function(n){var s=0;do{if(s++>10){if(!o)throw new Error("too many ID collisions, use more bits");e+=o}var a=r(e,t)}while(Object.hasOwnProperty.call(i,a));return i[a]=n,a},i=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=e||128,n.base=t||16,n}},function(e,t,r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(72)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var o="color: "+this.color;e.splice(1,0,o,"color: inherit");var n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,o)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())},function(e,t){var r=1e3,o=6e4,n=60*o,i=24*n;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*o;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(a=e,i,"day")||s(a,n,"hour")||s(a,o,"minute")||s(a,r,"second")||a+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=n)return Math.round(e/n)+"h";if(e>=o)return Math.round(e/o)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var o=r(162),n=r(0);(t=e.exports=r(72)).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),o=0;o<r.length;o++)e.inspectOpts[r[o]]=t.inspectOpts[r[o]]},t.log=function(){return s.write(n.format.apply(n,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var o=this.color,n="  [3"+o+";1m"+r+" [0m";e[0]=n+e[0].split("\n").join("\n"+n),e.push("[3"+o+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):o.isatty(i)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),o=process.env[t];return o=!!/^(yes|on|true|enabled)$/i.test(o)||!/^(no|off|false|disabled)$/i.test(o)&&("null"===o?null:Number(o)),e[r]=o,e}),{});var i=parseInt(process.env.DEBUG_FD,10)||2;1!==i&&2!==i&&n.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===i?process.stdout:2===i?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new o.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var n=r(2);(t=new n.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var i=r(59);(t=new i.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(i);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t){e.exports=require("tty")},function(e,t,r){"use strict";e.exports=class{constructor(e){this.type=e.type,this.sdp=e.sdp}toJSON(){return this}}},function(e,t,r){"use strict";e.exports=class{constructor(e){this.candidate=e.candidate,this.sdpMid=e.sdpMid,this.sdpMLineIndex=e.sdpMLineIndex}}}]);
//# sourceMappingURL=extension.js.map